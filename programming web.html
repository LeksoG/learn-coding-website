<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevLearn Pro - Master Programming</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
            background: #0a0a0a;
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.3s ease, color 0.3s ease;
            padding-bottom: 80px;
        }

        body.light-mode {
            background: #f5f5f5;
            color: #1a1a1a;
        }

        /* AUTH SCREEN STYLES */
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeIn 0.5s ease;
        }

        body.light-mode .auth-screen {
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
        }

        .auth-container {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 25px;
            padding: 50px;
            width: 450px;
            max-width: 90%;
            backdrop-filter: blur(20px);
            animation: slideUp 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        body.light-mode .auth-container {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(10, 122, 94, 0.3);
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .auth-logo-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .auth-logo-text {
            font-size: 2.2em;
            color: #64ffda;
            font-weight: 700;
            text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .auth-logo-text {
            color: #0a7a5e;
        }

        .auth-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            color: #8b949e;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
        }

        .auth-tab.active {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            color: #64ffda;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #e0e0e0;
            font-weight: 600;
            font-size: 0.95em;
        }

        body.light-mode .form-label {
            color: #1a1a1a;
        }

        .form-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 15px;
            color: #e0e0e0;
            font-size: 1em;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
        }

        body.light-mode .form-input {
            background: rgba(10, 122, 94, 0.05);
            color: #1a1a1a;
        }

        .form-input:focus {
            border-color: #64ffda;
            background: rgba(100, 255, 218, 0.1);
        }

        .form-button {
            width: 100%;
            padding: 15px;
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .form-button:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .form-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .auth-message {
            margin-top: 15px;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            animation: fadeIn 0.3s ease;
        }

        .auth-message.error {
            background: rgba(255, 100, 100, 0.1);
            border: 1px solid rgba(255, 100, 100, 0.3);
            color: #ff6b6b;
        }

        .auth-message.success {
            background: rgba(100, 255, 100, 0.1);
            border: 1px solid rgba(100, 255, 100, 0.3);
            color: #00ff00;
        }

        /* NAVIGATION - DESKTOP */
        .nav-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            animation: slideDown 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            width: auto;
        }

        .nav-container.search-active {
            width: 500px;
        }

        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-50px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        .nav-tabs {
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 8px;
            border-radius: 50px;
            display: flex;
            gap: 8px;
            box-shadow: 0 8px 32px rgba(100, 255, 218, 0.1);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        body.light-mode .nav-tabs {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(0, 0, 0, 0.1);
        }

        .nav-tab {
            padding: 12px 28px;
            border: none;
            background: transparent;
            color: #8b949e;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
        }

        body.light-mode .nav-tab {
            color: #666;
        }

        .nav-tab:hover {
            color: #64ffda;
            background: rgba(100, 255, 218, 0.05);
        }

        .nav-tab.active {
            background: rgba(100, 255, 218, 0.15);
            color: #64ffda;
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
        }

        .search-icon {
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: #8b949e;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-icon:hover {
            color: #64ffda;
            background: rgba(100, 255, 218, 0.05);
        }

        .search-icon svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        .search-input-container {
            display: none;
            position: relative;
            width: 100%;
            padding: 8px 20px;
            opacity: 0;
            transform: scale(0.95);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .search-input-container.active {
            display: block;
            opacity: 1;
            transform: scale(1);
        }

        .search-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-input {
            width: 100%;
            background: rgba(100, 255, 218, 0.05);
            border: 2px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            font-size: 1em;
            font-weight: 600;
            outline: none;
            padding: 10px 40px 10px 15px;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        body.light-mode .search-input {
            color: #0a7a5e;
            background: rgba(10, 122, 94, 0.05);
            border-color: rgba(10, 122, 94, 0.3);
        }

        .search-input:focus {
            border-color: #64ffda;
            background: rgba(100, 255, 218, 0.1);
        }

        .search-input::placeholder {
            color: #8b949e;
        }

        .search-close-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(100, 255, 218, 0.1);
            border: none;
            color: #64ffda;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.2em;
            font-weight: 600;
        }

        .search-close-btn:hover {
            background: rgba(100, 255, 218, 0.2);
            transform: translateY(-50%) scale(1.1);
        }

        .search-results {
            position: absolute;
            top: calc(100% + 10px);
            left: 0;
            right: 0;
            background: rgba(30, 30, 30, 0.95);
            border: 2px solid rgba(100, 255, 218, 0.3);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            max-height: 400px;
            overflow-y: auto;
            display: none;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        body.light-mode .search-results {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(10, 122, 94, 0.3);
        }

        .search-results.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .search-result-item {
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }

        .search-result-item:hover {
            background: rgba(100, 255, 218, 0.1);
        }

        .search-result-title {
            color: #64ffda;
            font-weight: 600;
            margin-bottom: 5px;
        }

        body.light-mode .search-result-title {
            color: #0a7a5e;
        }

        .search-result-desc {
            color: #8b949e;
            font-size: 0.85em;
        }

        /* MOBILE BOTTOM NAVIGATION */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(30, 30, 30, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(100, 255, 218, 0.1);
            padding: 10px 0;
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
        }

        body.light-mode .mobile-nav {
            background: rgba(255, 255, 255, 0.95);
            border-top-color: rgba(10, 122, 94, 0.2);
        }

        .mobile-nav-items {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            color: #8b949e;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 12px;
            min-width: 60px;
        }

        .mobile-nav-item.active {
            color: #64ffda;
            background: rgba(100, 255, 218, 0.1);
        }

        .mobile-nav-icon {
            font-size: 1.4em;
        }

        .mobile-nav-label {
            font-size: 0.7em;
            font-weight: 600;
        }

        /* MOBILE SEARCH */
        .mobile-search-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .mobile-search-overlay.active {
            display: block;
        }

        .mobile-search-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(30, 30, 30, 0.98);
            backdrop-filter: blur(20px);
            padding: 20px;
            transform: translateY(-100%);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 2001;
            border-bottom: 2px solid rgba(100, 255, 218, 0.2);
        }

        body.light-mode .mobile-search-container {
            background: rgba(255, 255, 255, 0.98);
        }

        .mobile-search-container.active {
            transform: translateY(0);
        }

        .mobile-search-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .mobile-search-back {
            background: rgba(100, 255, 218, 0.1);
            border: none;
            color: #64ffda;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2em;
        }

        .mobile-search-input {
            flex: 1;
            background: rgba(100, 255, 218, 0.05);
            border: 2px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 1em;
            outline: none;
        }

        .mobile-search-results {
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }

        .main-content {
            padding-top: 100px;
            min-height: 100vh;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dashboard {
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .dashboard-title {
            font-size: 3.5em;
            color: #64ffda;
            margin-bottom: 15px;
            text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .dashboard-title {
            color: #0a7a5e;
            text-shadow: 0 0 20px rgba(10, 122, 94, 0.2);
        }

        .dashboard-subtitle {
            font-size: 1.2em;
            color: #8b949e;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .stat-card {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        body.light-mode .stat-card {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .stat-card:hover {
            border-color: rgba(100, 255, 218, 0.3);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(100, 255, 218, 0.1);
        }

        .stat-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 2.5em;
            color: #64ffda;
            font-weight: 700;
            margin-bottom: 10px;
        }

        body.light-mode .stat-value {
            color: #0a7a5e;
        }

        .stat-label {
            color: #8b949e;
            font-size: 0.95em;
        }

        .progress-section {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        body.light-mode .progress-section {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .progress-section h2 {
            color: #64ffda;
            margin-bottom: 30px;
            font-size: 1.8em;
        }

        body.light-mode .progress-section h2 {
            color: #0a7a5e;
        }

        .chart-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .chart-tab {
            padding: 10px 24px;
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            color: #8b949e;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9em;
        }

        .chart-tab:hover {
            background: rgba(100, 255, 218, 0.1);
            color: #64ffda;
        }

        .chart-tab.active {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            color: #64ffda;
        }

        .chart-container {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        .chart-container.active {
            display: block;
        }

        /* IMPROVED BAR CHART ALIGNMENT */
.bar-chart {
    display: flex;
    align-items: flex-end;
    gap: 20px;
    height: 320px;
    padding: 20px 0;
    justify-content: center;
}

.bar-item {
    flex: 0 1 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    position: relative;
}

.bar {
    width: 100%;
    background: linear-gradient(180deg, #64ffda, #00d4ff);
    border-radius: 15px 15px 0 0;
    transition: height 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    box-shadow: 0 -5px 30px rgba(100, 255, 218, 0.3);
    min-height: 20px;
}

.bar-value {
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    color: #64ffda;
    font-weight: 700;
    font-size: 0.95em;
    white-space: nowrap;
}

body.light-mode .bar-value {
    color: #0a7a5e;
}

.bar-label {
    color: #8b949e;
    font-size: 0.85em;
    text-align: center;
    word-break: break-word;
    max-width: 100%;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1.3;
}

/* IMPROVED LIGHT THEME */
body.light-mode .form-button {
    background: rgba(10, 122, 94, 0.2);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

body.light-mode .form-button:hover {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .run-button {
    background: rgba(10, 122, 94, 0.2);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

body.light-mode .run-button:hover {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .submit-button,
body.light-mode .next-button {
    background: rgba(10, 122, 94, 0.2);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

body.light-mode .submit-button:hover,
body.light-mode .next-button:hover {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .modal-button.retry {
    background: rgba(10, 122, 94, 0.2);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

body.light-mode .modal-button.retry:hover {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .back-button {
    background: rgba(10, 122, 94, 0.15);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

/* GOAL SETTING STYLES */
.set-goal-btn {
    background: rgba(100, 255, 218, 0.2);
    border: 1px solid #64ffda;
    color: #64ffda;
    padding: 10px 25px;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.95em;
}

.set-goal-btn:hover {
    background: rgba(100, 255, 218, 0.3);
    transform: translateY(-2px);
}

.goal-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 3000;
    animation: fadeIn 0.3s ease;
}

.goal-modal.active {
    display: flex;
}

.goal-modal-content {
    background: rgba(30, 30, 30, 0.95);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 25px;
    padding: 40px;
    max-width: 500px;
    width: 90%;
    animation: modalSlide 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

body.light-mode .goal-modal-content {
    background: rgba(255, 255, 255, 0.95);
}

.goal-header {
    text-align: center;
    margin-bottom: 30px;
}

.goal-header h2 {
    color: #64ffda;
    font-size: 2em;
    margin-bottom: 10px;
}

body.light-mode .goal-header h2 {
    color: #0a7a5e;
}

.goal-input-group {
    margin-bottom: 25px;
}

.goal-input-group label {
    display: block;
    color: #e0e0e0;
    margin-bottom: 10px;
    font-weight: 600;
}

body.light-mode .goal-input-group label {
    color: #1a1a1a;
}

.goal-input {
    width: 100%;
    padding: 15px;
    background: rgba(100, 255, 218, 0.05);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 15px;
    color: #e0e0e0;
    font-size: 1em;
    outline: none;
}

body.light-mode .goal-input {
    background: rgba(10, 122, 94, 0.05);
    border-color: rgba(10, 122, 94, 0.3);
    color: #1a1a1a;
}

.goal-input:focus {
    border-color: #64ffda;
}

.goal-buttons {
    display: flex;
    gap: 15px;
    margin-top: 30px;
}

.goal-btn {
    flex: 1;
    padding: 15px;
    border: none;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.goal-btn.save {
    background: rgba(100, 255, 218, 0.2);
    border: 2px solid #64ffda;
    color: #64ffda;
}

.goal-btn.save:hover {
    background: rgba(100, 255, 218, 0.3);
}

.goal-btn.cancel {
    background: rgba(100, 100, 100, 0.2);
    border: 2px solid rgba(100, 100, 100, 0.3);
    color: #8b949e;
}

.goal-btn.cancel:hover {
    background: rgba(100, 100, 100, 0.3);
}

/* PROGRESS TAB SWITCHES */
.progress-tab-switches {
    display: flex;
    gap: 12px;
    margin-bottom: 25px;
}

.progress-tab-switch {
    padding: 10px 24px;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    color: #8b949e;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
}

.progress-tab-switch.active {
    background: rgba(100, 255, 218, 0.2);
    border-color: #64ffda;
    color: #64ffda;
}

.progress-content-panel {
    display: none;
    animation: fadeIn 0.4s ease;
}

.progress-content-panel.active {
    display: block;
}

.goal-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.goal-stat-card {
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    padding: 25px;
    border-radius: 15px;
    text-align: center;
}

.goal-stat-value {
    font-size: 2.5em;
    color: #64ffda;
    font-weight: 700;
    margin-bottom: 10px;
}

body.light-mode .goal-stat-value {
    color: #0a7a5e;
}

.goal-stat-label {
    color: #8b949e;
    font-size: 0.9em;
}

.motivational-message {
    background: rgba(100, 255, 218, 0.1);
    border: 1px solid rgba(100, 255, 218, 0.3);
    padding: 20px;
    border-radius: 15px;
    text-align: center;
    color: #64ffda;
    font-size: 1.1em;
    font-weight: 600;
    margin-top: 20px;
}

body.light-mode .motivational-message {
    color: #0a7a5e;
}

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 10, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            animation: fadeIn 0.3s ease-out;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            text-align: center;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(100, 255, 218, 0.2);
            border-top-color: #64ffda;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: #64ffda;
            font-size: 1.2em;
            font-weight: 600;
        }

        .learn-section {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .learn-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .learn-header h1 {
            font-size: 3em;
            color: #64ffda;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .learn-header h1 {
            color: #0a7a5e;
        }

        .language-tabs {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .language-tab {
            padding: 12px 30px;
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            color: #8b949e;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        body.light-mode .language-tab {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .language-tab:hover {
            border-color: rgba(100, 255, 218, 0.3);
            color: #64ffda;
        }

        .language-tab.active {
            background: rgba(100, 255, 218, 0.15);
            border-color: #64ffda;
            color: #64ffda;
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
        }

        .language-content {
            display: none;
        }

        .language-content.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }

        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .course-card {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        body.light-mode .course-card {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .course-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .course-card:not(.locked):hover {
            border-color: rgba(100, 255, 218, 0.3);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(100, 255, 218, 0.15);
        }

        .lock-overlay {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 100, 100, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            color: #ff6b6b;
            border: 1px solid rgba(255, 100, 100, 0.3);
        }

        .completed-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(100, 255, 100, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            color: #00ff00;
            border: 1px solid rgba(100, 255, 100, 0.3);
        }

        .course-header {
            padding: 30px;
            background: linear-gradient(135deg, rgba(100, 255, 218, 0.1), rgba(0, 212, 255, 0.1));
        }

        .course-title {
            font-size: 1.8em;
            color: #64ffda;
            margin-bottom: 10px;
        }

        body.light-mode .course-title {
            color: #0a7a5e;
        }

        .course-desc {
            color: #8b949e;
            font-size: 0.95em;
        }

        .course-progress-bar {
            margin: 20px 30px;
        }

        .course-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .course-progress-name {
            font-weight: 600;
            color: #e0e0e0;
        }

        body.light-mode .course-progress-name {
            color: #1a1a1a;
        }

        .course-progress-percent {
            color: #64ffda;
            font-weight: 700;
        }

        body.light-mode .course-progress-percent {
            color: #0a7a5e;
        }

        .progress-bar {
            height: 8px;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #64ffda, #00d4ff);
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2500;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            animation: modalSlide 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        body.light-mode .modal-content {
            background: rgba(255, 255, 255, 0.95);
        }

        @keyframes modalSlide {
            from { opacity: 0; transform: scale(0.8) translateY(30px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 1.8em;
            color: #64ffda;
            margin-bottom: 10px;
        }

        body.light-mode .modal-title {
            color: #0a7a5e;
        }

        .modal-text {
            color: #8b949e;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 50px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-button.retry {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
        }

        .modal-button.retry:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .modal-button.continue {
            background: rgba(100, 100, 100, 0.2);
            border: 1px solid rgba(100, 100, 100, 0.3);
            color: #8b949e;
        }

        .modal-button.continue:hover {
            background: rgba(100, 100, 100, 0.3);
        }

        .practice-container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        .practice-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .practice-header h1 {
            font-size: 3em;
            color: #64ffda;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .practice-header h1 {
            color: #0a7a5e;
        }

        .practice-workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: calc(100vh - 250px);
        }

        .code-panel, .output-panel {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        body.light-mode .code-panel,
        body.light-mode .output-panel {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .panel-header {
            background: rgba(20, 20, 20, 0.8);
            padding: 15px 25px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        body.light-mode .panel-header {
            background: rgba(240, 240, 240, 0.9);
        }

        .panel-title {
            color: #64ffda;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        body.light-mode .panel-title {
            color: #0a7a5e;
        }

        .run-button {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
            padding: 8px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .run-button:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: scale(1.05);
        }

        .code-editor-area {
            flex: 1;
            padding: 0;
            overflow: hidden;
        }

        .code-editor-area textarea {
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            color: #e0e0e0;
            border: none;
            padding: 25px;
            font-family: 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.7;
            resize: none;
            outline: none;
        }

        body.light-mode .code-editor-area textarea {
            background: #fff;
            color: #1a1a1a;
        }

        .output-content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: #0a0a0a;
        }

        body.light-mode .output-content {
            background: #fff;
        }

        .output-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        .console-output {
            color: #64ffda;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            line-height: 1.8;
        }

        body.light-mode .console-output {
            color: #0a7a5e;
        }

        .settings-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .settings-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .settings-header h1 {
            font-size: 3em;
            color: #64ffda;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .settings-header h1 {
            color: #0a7a5e;
        }

        .settings-section {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 25px;
        }

        body.light-mode .settings-section {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .settings-section h2 {
            color: #64ffda;
            margin-bottom: 25px;
            font-size: 1.5em;
        }

        body.light-mode .settings-section h2 {
            color: #0a7a5e;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-info h3 {
            color: #e0e0e0;
            margin-bottom: 5px;
        }

        body.light-mode .setting-info h3 {
            color: #1a1a1a;
        }

        .setting-info p {
            color: #8b949e;
            font-size: 0.9em;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: rgba(100, 255, 218, 0.3);
            border-color: #64ffda;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 22px;
            height: 22px;
            background: #64ffda;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 2px 8px rgba(100, 255, 218, 0.4);
        }

        .toggle-switch.active::after {
            left: 33px;
        }

        .lesson-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #0a0a0a;
            z-index: 2000;
        }

        body.light-mode .lesson-view {
            background: #f5f5f5;
        }

        .lesson-view.active {
            display: flex;
            flex-direction: column;
            animation: iOSSlideIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes iOSSlideIn {
            from { opacity: 0; transform: scale(0.9) translateY(50px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .lesson-header-bar {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            padding: 20px 30px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        body.light-mode .lesson-header-bar {
            background: rgba(255, 255, 255, 0.95);
        }

        .lesson-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .back-button {
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .back-button:hover {
            background: rgba(100, 255, 218, 0.2);
            transform: translateX(-3px);
        }

        .lesson-title {
            font-size: 1.4em;
            color: #e0e0e0;
        }

        body.light-mode .lesson-title {
            color: #1a1a1a;
        }

        .lesson-progress-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .progress-indicator {
            background: rgba(100, 255, 218, 0.1);
            padding: 8px 20px;
            border-radius: 20px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            font-weight: 600;
            color: #64ffda;
        }

        body.light-mode .progress-indicator {
            color: #0a7a5e;
        }

        .tab-switcher {
            background: rgba(30, 30, 30, 0.6);
            padding: 5px;
            border-radius: 50px;
            display: flex;
            gap: 5px;
        }

        body.light-mode .tab-switcher {
            background: rgba(255, 255, 255, 0.8);
        }

        .tab-switch-btn {
            padding: 8px 24px;
            border: none;
            background: transparent;
            color: #8b949e;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
        }

        .tab-switch-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .tab-switch-btn.active {
            background: rgba(100, 255, 218, 0.2);
            color: #64ffda;
        }

        body.light-mode .tab-switch-btn.active {
            color: #0a7a5e;
        }

        .lesson-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .content-panel {
            display: none;
            max-width: 1000px;
            margin: 0 auto;
        }

        .content-panel.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }

        .chat-container {
            background: rgba(30, 30, 30, 0.4);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            padding: 35px;
        }

        body.light-mode .chat-container {
            background: rgba(255, 255, 255, 0.6);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .chat-messages {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .message {
            display: flex;
            gap: 15px;
            animation: messageSlide 0.4s ease-out;
        }

        @keyframes messageSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(100, 255, 218, 0.2);
            border: 2px solid rgba(100, 255, 218, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            flex-shrink: 0;
        }

        .message-bubble {
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 18px 22px;
            border-radius: 15px;
            line-height: 1.7;
            font-size: 1.05em;
            color: #e0e0e0;
        }

        body.light-mode .message-bubble {
            background: rgba(10, 122, 94, 0.05);
            color: #1a1a1a;
        }

        .code-example {
            background: #1a1a1a;
            border: 1px solid rgba(100, 255, 218, 0.2);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        body.light-mode .code-example {
            background: #f0f0f0;
            border-color: rgba(10, 122, 94, 0.2);
        }

        .code-example code {
            color: #64ffda;
            line-height: 1.8;
        }

        body.light-mode .code-example code {
            color: #0a7a5e;
        }

        .typing-indicator {
            display: flex;
            gap: 6px;
            padding: 15px 20px;
        }

        .typing-dot {
            width: 10px;
            height: 10px;
            background: #64ffda;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
            30% { transform: translateY(-10px); opacity: 1; }
        }

        .exercise-box {
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .exercise-title {
            color: #64ffda;
            font-weight: 700;
            margin-bottom: 18px;
            font-size: 1.15em;
        }

        body.light-mode .exercise-title {
            color: #0a7a5e;
        }

        .code-fill {
            background: #1a1a1a;
            border: 1px solid rgba(100, 255, 218, 0.2);
            padding: 20px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            line-height: 2;
            margin: 15px 0;
            color: #e0e0e0;
        }

        body.light-mode .code-fill {
            background: #f0f0f0;
            color: #1a1a1a;
        }

        .code-blank-wrapper {
            display: inline-block;
            background: rgba(100, 255, 218, 0.2);
            border: 2px solid transparent;
            border-radius: 6px;
            padding: 2px 4px;
            transition: all 0.3s ease;
        }

        .code-blank-wrapper.correct {
            background: rgba(100, 255, 100, 0.2);
            border-color: #00ff00;
            animation: correctPulse 0.5s ease;
        }

        .code-blank-wrapper.incorrect {
            background: rgba(255, 100, 100, 0.2);
            border-color: #ff6b6b;
            animation: shake 0.5s ease;
        }

        .code-blank {
            background: transparent;
            border: none;
            color: #64ffda;
            font-family: 'Courier New', monospace;
            min-width: 80px;
            text-align: center;
            outline: none;
            font-weight: 600;
            font-size: 1em;
            padding: 2px 8px;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .mcq-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 15px 0;
        }

        .mcq-option {
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #e0e0e0;
        }

        body.light-mode .mcq-option {
            color: #1a1a1a;
        }

        .mcq-option:hover {
            background: rgba(100, 255, 218, 0.1);
            border-color: rgba(100, 255, 218, 0.4);
            transform: translateX(5px);
        }

        .mcq-option.selected {
            background: rgba(100, 255, 218, 0.15);
            border-color: #64ffda;
        }

        .mcq-option.correct {
            background: rgba(100, 255, 100, 0.15);
            border-color: #00ff00;
            animation: correctPulse 0.5s ease;
        }

        .mcq-option.incorrect {
            background: rgba(255, 100, 100, 0.15);
            border-color: #ff6b6b;
            animation: shake 0.5s ease;
        }

        .submit-button {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
            padding: 12px 35px;
            border-radius: 50px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .submit-button:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .next-button {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
            padding: 12px 35px;
            border-radius: 50px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .next-button:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px 20px;
            border-radius: 12px;
            font-weight: 600;
            animation: feedbackSlide 0.4s ease-out;
        }

        @keyframes feedbackSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback.correct {
            background: rgba(100, 255, 100, 0.1);
            border: 1px solid rgba(100, 255, 100, 0.3);
            color: #00ff00;
        }

        .feedback.incorrect {
            background: rgba(255, 100, 100, 0.1);
            border: 1px solid rgba(255, 100, 100, 0.3);
            color: #ff6b6b;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            body {
                padding-bottom: 70px;
            }

            .nav-container {
                display: none !important;
            }

            .mobile-nav {
                display: block;
            }

            .main-content {
                padding-top: 20px;
            }

            .dashboard-title {
                font-size: 2.5em;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .practice-workspace {
                grid-template-columns: 1fr;
                height: auto;
            }

            .code-panel, .output-panel {
                min-height: 400px;
            }

            .bar-chart {
                height: 200px;
            }

            .course-grid {
                grid-template-columns: 1fr;
            }

            .auth-container {
                padding: 30px 20px;
            }

            .lesson-header-bar {
                flex-wrap: wrap;
                gap: 15px;
            }

            .lesson-progress-info {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 480px) {
            .dashboard-title {
                font-size: 2em;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 30px 20px;
            }

            .modal-buttons {
                flex-direction: column;
            }
        }

        /* IMPROVED SETTINGS */
.account-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 30px 35px;
    border-radius: 20px;
    margin-bottom: 25px;
}

body.light-mode .account-header {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(10, 122, 94, 0.2);
}

.account-info {
    display: flex;
    align-items: center;
    gap: 20px;
}

.account-avatar {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: linear-gradient(135deg, #64ffda, #00d4ff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    font-weight: 700;
    color: #0a0a0a;
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.3);
}

.account-details h2 {
    color: #64ffda;
    margin-bottom: 5px;
    font-size: 1.5em;
}

body.light-mode .account-details h2 {
    color: #0a7a5e;
}

.account-details p {
    color: #8b949e;
    font-size: 0.9em;
}

.logout-btn {
    background: rgba(255, 100, 100, 0.2);
    border: 1px solid rgba(255, 100, 100, 0.3);
    color: #ff6b6b;
    padding: 12px 30px;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.logout-btn:hover {
    background: rgba(255, 100, 100, 0.3);
    transform: translateY(-2px);
}

.settings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}

.setting-card {
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 25px;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    transition: all 0.3s ease;
}

body.light-mode .setting-card {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(10, 122, 94, 0.2);
}

.setting-card:hover {
    border-color: rgba(100, 255, 218, 0.3);
    transform: translateY(-3px);
}

.setting-card h3 {
    color: #64ffda;
    font-size: 1.1em;
    margin-bottom: 5px;
}

body.light-mode .setting-card h3 {
    color: #0a7a5e;
}

.setting-card p {
    color: #8b949e;
    font-size: 0.9em;
    flex: 1;
}

/* SMOOTH ANIMATIONS */
.nav-tabs {
    opacity: 1;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.nav-tabs.hiding {
    opacity: 0;
    transform: scale(0.95);
}

.chat-messages {
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* UPDATE SPLASH SCREEN */
.update-splash {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.4s ease;
}

.update-splash.active {
    display: flex;
}

.update-content {
    background: rgba(30, 30, 30, 0.95);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 25px;
    padding: 50px;
    max-width: 600px;
    width: 90%;
    text-align: center;
    animation: splashSlide 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

body.light-mode .update-content {
    background: rgba(255, 255, 255, 0.95);
}

@keyframes splashSlide {
    from { opacity: 0; transform: scale(0.8) translateY(50px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}

.update-icon {
    font-size: 5em;
    margin-bottom: 20px;
}

.update-title {
    font-size: 2.5em;
    color: #64ffda;
    margin-bottom: 15px;
    text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
}

body.light-mode .update-title {
    color: #0a7a5e;
}

.update-version {
    color: #8b949e;
    margin-bottom: 30px;
    font-size: 1.1em;
}

.changelog {
    text-align: left;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    padding: 25px;
    margin-bottom: 30px;
}

.changelog h3 {
    color: #64ffda;
    margin-bottom: 15px;
    font-size: 1.2em;
}

body.light-mode .changelog h3 {
    color: #0a7a5e;
}

.changelog ul {
    list-style: none;
    padding: 0;
}

.changelog li {
    color: #e0e0e0;
    padding: 10px 0;
    padding-left: 30px;
    position: relative;
}

body.light-mode .changelog li {
    color: #1a1a1a;
}

.changelog li::before {
    content: "";
    position: absolute;
    left: 0;
    color: #64ffda;
    font-weight: 700;
}

.close-splash-btn {
    background: rgba(100, 255, 218, 0.2);
    border: 1px solid #64ffda;
    color: #64ffda;
    padding: 15px 40px;
    border-radius: 50px;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.close-splash-btn:hover {
    background: rgba(100, 255, 218, 0.3);
    transform: translateY(-2px);
}

.bar-chart {
    display: flex;
    align-items: flex-end;
    gap: 30px;
    height: 350px;
    padding: 20px 20px 60px 80px;
    justify-content: center;
    position: relative;
    background: 
        linear-gradient(90deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px),
        linear-gradient(0deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px);
    background-size: 50px 35px;
}

/* Y-axis (left vertical line) */
.bar-chart::before {
    content: '';
    position: absolute;
    left: 70px;
    bottom: 50px;
    width: 3px;
    height: calc(100% - 70px);
    background: linear-gradient(180deg, rgba(100, 255, 218, 0.5), rgba(100, 255, 218, 0.2));
    border-radius: 2px;
}

/* X-axis (bottom horizontal line) */
.bar-chart::after {
    content: '';
    position: absolute;
    left: 70px;
    bottom: 50px;
    width: calc(100% - 90px);
    height: 3px;
    background: linear-gradient(90deg, rgba(100, 255, 218, 0.5), rgba(100, 255, 218, 0.2));
    border-radius: 2px;
}

.chart-y-labels {
    position: absolute;
    left: 10px;
    top: 20px;
    bottom: 60px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    color: #64ffda;
    font-size: 0.85em;
    font-weight: 600;
    z-index: 10;
}

body.light-mode .chart-y-labels {
    color: #0a7a5e;
}

.chart-y-labels span {
    background: rgba(10, 10, 10, 0.8);
    padding: 4px 8px;
    border-radius: 6px;
    border: 1px solid rgba(100, 255, 218, 0.3);
}

body.light-mode .chart-y-labels span {
    background: rgba(245, 245, 245, 0.9);
    border-color: rgba(10, 122, 94, 0.3);
}

.bar-item {
    flex: 0 1 120px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    position: relative;
    height: 280px; /* Fixed height for consistent calculation */
    justify-content: flex-end;
}

.bar {
    width: 100%;
    background: linear-gradient(180deg, #64ffda 0%, #00d4ff 100%);
    border-radius: 12px 12px 0 0;
    transition: height 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    box-shadow: 
        0 -5px 30px rgba(100, 255, 218, 0.3),
        inset 0 -2px 10px rgba(255, 255, 255, 0.3);
    min-height: 0px;
    max-height: 100%;
    border: 2px solid rgba(100, 255, 218, 0.4);
    border-bottom: none;
}

body.light-mode .bar {
    background: linear-gradient(180deg, #0a7a5e 0%, #00a896 100%);
    box-shadow: 
        0 -5px 30px rgba(10, 122, 94, 0.3),
        inset 0 -2px 10px rgba(255, 255, 255, 0.5);
    border-color: rgba(10, 122, 94, 0.5);
}

.bar-value {
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    color: #64ffda;
    font-weight: 700;
    font-size: 1em;
    white-space: nowrap;
    background: rgba(10, 10, 10, 0.9);
    padding: 6px 12px;
    border-radius: 8px;
    border: 1px solid rgba(100, 255, 218, 0.3);
    box-shadow: 0 4px 15px rgba(100, 255, 218, 0.2);
}

body.light-mode .bar-value {
    color: #0a7a5e;
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(10, 122, 94, 0.3);
}

.bar-label {
    color: #8b949e;
    font-size: 0.9em;
    text-align: center;
    word-break: break-word;
    max-width: 100%;
    height: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1.3;
    position: absolute;
    bottom: -45px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* STREAK CELEBRATION */
.streak-celebration {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0);
    z-index: 5000;
    display: none;
    justify-content: center;
    align-items: center;
    pointer-events: none;
    transition: background 0.5s ease;
}

.streak-celebration.active {
    display: flex;
}

.streak-celebration.show-bg {
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(10px);
}

.streak-card-animated {
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 30px;
    border-radius: 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 40px rgba(100, 255, 218, 0.1);
    width: 280px;
    min-width: 280px;
    opacity: 0;
    position: fixed;
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    will-change: transform, opacity, left, top;
}

body.light-mode .streak-card-animated {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(10, 122, 94, 0.2);
    box-shadow: 0 10px 40px rgba(10, 122, 94, 0.1);
}

.streak-icon-big {
    font-size: 2.5em;
    text-align: center;
    margin-bottom: 15px;
    transition: transform 0.3s ease;
}

.streak-number-container {
    position: relative;
    height: 60px;
    overflow: hidden;
    margin-bottom: 10px;
}

.streak-number-big {
    font-size: 2.5em;
    color: #64ffda;
    font-weight: 700;
    text-align: center;
    text-shadow: 0 0 30px rgba(100, 255, 218, 0.5);
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
    transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.6s ease;
    line-height: 1;
}

body.light-mode .streak-number-big {
    color: #0a7a5e;
    text-shadow: 0 0 30px rgba(10, 122, 94, 0.5);
}

.streak-text-big {
    font-size: 0.95em;
    color: #8b949e;
    text-align: center;
    font-weight: 600;
}

/* Add this new class */
.stat-card.animating {
    opacity: 0 !important;
    transition: opacity 0.3s ease;
}

/* Highlighted keywords in learn content */
.keyword-highlight {
    background: linear-gradient(120deg, rgba(100, 255, 218, 0.2) 0%, rgba(100, 255, 218, 0.1) 100%);
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 600;
    color: #64ffda;
    cursor: help;
    position: relative;
    transition: all 0.3s ease;
    border-bottom: 2px dotted rgba(100, 255, 218, 0.4);
}

body.light-mode .keyword-highlight {
    background: linear-gradient(120deg, rgba(10, 122, 94, 0.15) 0%, rgba(10, 122, 94, 0.08) 100%);
    color: #0a7a5e;
    border-bottom-color: rgba(10, 122, 94, 0.4);
}

.keyword-highlight:hover {
    background: linear-gradient(120deg, rgba(100, 255, 218, 0.3) 0%, rgba(100, 255, 218, 0.2) 100%);
    transform: translateY(-1px);
}

.keyword-highlight::after {
    content: 'Ask AI';
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%) scale(0);
    background: rgba(30, 30, 30, 0.95);
    color: #64ffda;
    padding: 6px 12px;
    border-radius: 8px;
    font-size: 0.75em;
    white-space: nowrap;
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    pointer-events: none;
    border: 1px solid rgba(100, 255, 218, 0.3);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

body.light-mode .keyword-highlight::after {
    background: rgba(255, 255, 255, 0.98);
    color: #0a7a5e;
    border-color: rgba(10, 122, 94, 0.3);
}

.keyword-highlight:hover::after {
    transform: translateX(-50%) scale(1);
    opacity: 1;
}

/* AI Explanation Modal */
.ai-explanation-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 6000;
    animation: fadeIn 0.3s ease;
}

.ai-explanation-modal.active {
    display: flex;
}

.ai-explanation-content {
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 20px;
    padding: 40px;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
    animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

body.light-mode .ai-explanation-content {
    background: rgba(255, 255, 255, 0.98);
    border-color: rgba(10, 122, 94, 0.3);
}

@keyframes popIn {
    0% {
        opacity: 0;
        transform: scale(0.3) translateY(100px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.ai-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 100, 100, 0.2);
    border: 1px solid rgba(255, 100, 100, 0.3);
    color: #ff6b6b;
    font-size: 1.5em;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.ai-close-btn:hover {
    background: rgba(255, 100, 100, 0.3);
    transform: rotate(90deg);
}

.ai-keyword-display {
    font-size: 2em;
    color: #64ffda;
    font-weight: 700;
    text-align: center;
    margin-bottom: 25px;
    text-shadow: 0 0 20px rgba(100, 255, 218, 0.3);
}

body.light-mode .ai-keyword-display {
    color: #0a7a5e;
}

.ai-loading {
    text-align: center;
    color: #8b949e;
    padding: 20px;
}

.ai-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(100, 255, 218, 0.2);
    border-top-color: #64ffda;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 20px auto;
}

.ai-explanation-text {
    color: #e0e0e0;
    line-height: 1.8;
    font-size: 1.05em;
}

body.light-mode .ai-explanation-text {
    color: #1a1a1a;
}

.ai-explanation-text p {
    margin-bottom: 15px;
}

.ai-explanation-text strong {
    color: #64ffda;
}

body.light-mode .ai-explanation-text strong {
    color: #0a7a5e;
}

.feature-preview {
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    padding: 20px;
    margin-top: 25px;
    text-align: center;
}

.preview-label {
    color: #8b949e;
    font-size: 0.9em;
    margin-bottom: 15px;
    font-weight: 600;
}

.preview-demo {
    position: relative;
    display: inline-block;
    font-size: 1.5em;
}

.demo-highlight {
    animation: demoGlow 2s ease-in-out infinite;
}

@keyframes demoGlow {
    0%, 100% { box-shadow: 0 0 10px rgba(100, 255, 218, 0.3); }
    50% { box-shadow: 0 0 20px rgba(100, 255, 218, 0.6); }
}

.preview-explanation {
    position: absolute;
    top: calc(100% + 10px);
    left: 50%;
    transform: translateX(-50%) scale(0);
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 12px;
    padding: 15px 20px;
    min-width: 200px;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    pointer-events: none;
    z-index: 10;
}

body.light-mode .preview-explanation {
    background: rgba(255, 255, 255, 0.98);
}

.preview-explanation.show {
    transform: translateX(-50%) scale(1);
    opacity: 1;
}

.preview-ai-icon {
    font-size: 2em;
    margin-bottom: 8px;
    animation: sparkle 1s ease-in-out infinite;
}

@keyframes sparkle {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.1) rotate(-5deg); }
    75% { transform: scale(1.1) rotate(5deg); }
}

.preview-text {
    color: #64ffda;
    font-weight: 600;
    font-size: 0.9em;
}

body.light-mode .preview-text {
    color: #0a7a5e;
}

/* UPDATE SPLASH SCREEN */
.update-splash {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.4s ease;
    overflow: hidden;
}

.update-splash.active {
    display: flex;
    overflow: hidden;
}

/* Prevent body scroll when splash is open */
body.splash-open {
    overflow: hidden;
}

.update-content {
    background: rgba(30, 30, 30, 0.95);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 25px;
    padding: 35px;
    max-width: 550px;
    width: 90%;
    max-height: 85vh;
    overflow-y: auto;
    text-align: center;
    animation: splashSlide 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

body.light-mode .update-content {
    background: rgba(255, 255, 255, 0.95);
}

.update-icon {
    font-size: 4em;
    margin-bottom: 15px;
}

.update-title {
    font-size: 2em;
    color: #64ffda;
    margin-bottom: 10px;
    text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
}

body.light-mode .update-title {
    color: #0a7a5e;
}

.update-version {
    color: #8b949e;
    margin-bottom: 25px;
    font-size: 1em;
}

.changelog {
    text-align: left;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 25px;
}

.changelog h3 {
    color: #64ffda;
    margin-bottom: 15px;
    font-size: 1.1em;
    text-align: center;
}

body.light-mode .changelog h3 {
    color: #0a7a5e;
}

.changelog ul {
    list-style: none;
    padding: 0;
}

.changelog li {
    color: #e0e0e0;
    padding: 8px 0;
    padding-left: 25px;
    position: relative;
    font-size: 0.95em;
    line-height: 1.4;
}

body.light-mode .changelog li {
    color: #1a1a1a;
}

.changelog li::before {
    content: "";
    position: absolute;
    left: 0;
    color: #64ffda;
    font-weight: 700;
}

.feature-preview {
    background: rgba(100, 255, 218, 0.08);
    border: 1px solid rgba(100, 255, 218, 0.25);
    border-radius: 12px;
    padding: 15px;
    margin-top: 15px;
}

.preview-label {
    color: #8b949e;
    font-size: 0.85em;
    margin-bottom: 12px;
    font-weight: 600;
}

.preview-demo {
    position: relative;
    display: inline-block;
    font-size: 1.3em;
    padding-bottom: 100px;
}

.demo-highlight {
    pointer-events: none;
    animation: demoGlow 2s ease-in-out infinite;
}

@keyframes demoGlow {
    0%, 100% { 
        box-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
        transform: translateY(0);
    }
    50% { 
        box-shadow: 0 0 20px rgba(100, 255, 218, 0.6);
        transform: translateY(-2px);
    }
}

.preview-explanation {
    position: absolute;
    top: calc(100% + 15px);
    left: 50%;
    transform: translateX(-50%) scale(0);
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 12px;
    padding: 15px 20px;
    min-width: 180px;
    opacity: 0;
    animation: previewPop 3s ease-in-out infinite;
    pointer-events: none;
    z-index: 10;
}

body.light-mode .preview-explanation {
    background: rgba(255, 255, 255, 0.98);
}

@keyframes previewPop {
    0%, 100% {
        transform: translateX(-50%) scale(0);
        opacity: 0;
    }
    20%, 80% {
        transform: translateX(-50%) scale(1);
        opacity: 1;
    }
}

.preview-ai-icon {
    font-size: 2em;
    margin-bottom: 5px;
    animation: sparkle 1.5s ease-in-out infinite;
}

@keyframes sparkle {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.15) rotate(-8deg); }
    75% { transform: scale(1.15) rotate(8deg); }
}

.preview-text {
    color: #64ffda;
    font-weight: 600;
    font-size: 0.85em;
}

body.light-mode .preview-text {
    color: #0a7a5e;
}

.close-splash-btn {
    background: rgba(100, 255, 218, 0.2);
    border: 1px solid #64ffda;
    color: #64ffda;
    padding: 12px 35px;
    border-radius: 50px;
    font-size: 1em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.close-splash-btn:hover {
    background: rgba(100, 255, 218, 0.3);
    transform: translateY(-2px);
}
    </style>
</head>
<body>
    <!-- AUTH SCREEN -->
    <div class="auth-screen" id="authScreen">
        <div class="auth-container">
            <div class="auth-logo">
                <div class="auth-logo-icon"></div>
                <div class="auth-logo-text">DevLearn Pro</div>
            </div>

            <div class="auth-tabs">
                <div class="auth-tab active" onclick="switchAuthTab('login')">Login</div>
                <div class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</div>
            </div>

            <form class="auth-form active" id="loginForm" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="loginEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="loginPassword" required>
                </div>
                <button type="submit" class="form-button" id="loginBtn">Login</button>
                <div id="loginMessage"></div>
            </form>

            <form class="auth-form" id="signupForm" onsubmit="handleSignup(event)">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-input" id="signupName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="signupEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" id="signupPassword" required minlength="6">
                </div>
                <button type="submit" class="form-button" id="signupBtn">Create Account</button>
                <div id="signupMessage"></div>
            </form>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Updating Progress...</div>
        </div>
    </div>

    <div class="modal-overlay" id="retryModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon"></div>
                <div class="modal-title">Course Completed!</div>
                <div class="modal-text">You've already completed this course. Would you like to retry it for practice or continue?</div>
            </div>
            <div class="modal-buttons">
                <button class="modal-button retry" onclick="retryLesson()"> Retry</button>
                <button class="modal-button continue" onclick="closeModal()"> Continue</button>
            </div>
        </div>
    </div>

    <!-- DESKTOP NAVIGATION -->
    <div class="nav-container" id="navContainer">
        <div class="nav-tabs" id="navTabs">
            <button class="nav-tab active" onclick="showSection('home')">Overview</button>
            <button class="nav-tab" onclick="showSection('learn')">Learn</button>
            <button class="nav-tab" onclick="showSection('practice')">Practice</button>
            <button class="nav-tab" onclick="showSection('settings')">Settings</button>
            <button class="search-icon" onclick="toggleSearch()">
                <svg viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
            </button>
        </div>
        <div class="search-input-container" id="searchContainer">
            <div class="search-input-wrapper">
                <input type="text" class="search-input" id="searchInput" placeholder="Search courses..." oninput="handleSearch()">
                <button class="search-close-btn" onclick="toggleSearch()"></button>
            </div>
            <div class="search-results" id="searchResults"></div>
        </div>
    </div>

    <!-- MOBILE NAVIGATION -->
    <div class="mobile-nav">
        <div class="mobile-nav-items">
            <div class="mobile-nav-item active" onclick="showSectionMobile('home', this)">
                <div class="mobile-nav-icon"></div>
                <div class="mobile-nav-label">Overview</div>
            </div>
            <div class="mobile-nav-item" onclick="showSectionMobile('learn', this)">
                <div class="mobile-nav-icon"></div>
                <div class="mobile-nav-label">Learn</div>
            </div>
            <div class="mobile-nav-item" onclick="showSectionMobile('practice', this)">
                <div class="mobile-nav-icon"></div>
                <div class="mobile-nav-label">Practice</div>
            </div>
            <div class="mobile-nav-item" onclick="toggleMobileSearch()">
                <div class="mobile-nav-icon"></div>
                <div class="mobile-nav-label">Search</div>
            </div>
            <div class="mobile-nav-item" onclick="showSectionMobile('settings', this)">
                <div class="mobile-nav-icon"></div>
                <div class="mobile-nav-label">Settings</div>
            </div>
        </div>
    </div>

    <!-- MOBILE SEARCH -->
    <div class="mobile-search-overlay" id="mobileSearchOverlay" onclick="closeMobileSearch()"></div>
    <div class="mobile-search-container" id="mobileSearchContainer">
        <div class="mobile-search-header">
            <button class="mobile-search-back" onclick="closeMobileSearch()"></button>
            <input type="text" class="mobile-search-input" id="mobileSearchInput" placeholder="Search courses..." oninput="handleMobileSearch()">
        </div>
        <div class="mobile-search-results" id="mobileSearchResults"></div>
    </div>

    <div class="main-content">
        <div id="home" class="section active">
            <div class="dashboard">
                <div class="dashboard-header">
                    <h1 class="dashboard-title"> Your Progress Dashboard</h1>
                    <p class="dashboard-subtitle">Track your learning journey in real-time</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-value" id="totalCourses">0</div>
                        <div class="stat-label">Courses Started</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-value" id="completedLessons">0</div>
                        <div class="stat-label">Lessons Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-value" id="streakDays">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"></div>
                        <div class="stat-value" id="totalTime">0h 0m</div>
                        <div class="stat-label">Time Studied</div>
                    </div>
                </div>

                <div class="progress-section">
                    <h2> Course Progress by Language</h2>
                    
                    <div class="chart-tabs">
                        <div class="chart-tab active" onclick="switchChart('all')">All Languages</div>
                        <div class="chart-tab" onclick="switchChart('python')"> Python</div>
                        <div class="chart-tab" onclick="switchChart('javascript')"> JavaScript</div>
                        <div class="chart-tab" onclick="switchChart('html')"> HTML</div>
                        <div class="chart-tab" onclick="switchChart('css')"> CSS</div>
                        <div class="chart-tab" onclick="switchChart('react')"> React</div>
                    </div>

                    <div id="allChart" class="chart-container active">
                        <div class="bar-chart" id="allBarChart"></div>
                    </div>
                    <div id="pythonChart" class="chart-container">
                        <div class="bar-chart" id="pythonBarChart"></div>
                    </div>
                    <div id="javascriptChart" class="chart-container">
                        <div class="bar-chart" id="javascriptBarChart"></div>
                    </div>
                    <div id="htmlChart" class="chart-container">
                        <div class="bar-chart" id="htmlBarChart"></div>
                    </div>
                    <div id="cssChart" class="chart-container">
                        <div class="bar-chart" id="cssBarChart"></div>
                    </div>
                    <div id="reactChart" class="chart-container">
                        <div class="bar-chart" id="reactBarChart"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="learn" class="section">
            <div class="learn-section">
                <div class="learn-header">
                    <h1> Master Programming</h1>
                    <p style="color: #8b949e; margin-top: 10px;">Choose a language and start your journey</p>
                </div>

                <div class="language-tabs">
                    <div class="language-tab active" onclick="switchLanguage('python')"> Python</div>
                    <div class="language-tab" onclick="switchLanguage('javascript')"> JavaScript</div>
                    <div class="language-tab" onclick="switchLanguage('html')"> HTML</div>
                    <div class="language-tab" onclick="switchLanguage('css')"> CSS</div>
                    <div class="language-tab" onclick="switchLanguage('react')"> React</div>
                </div>

                <div id="python-content" class="language-content active">
                    <div class="course-grid" id="python-courses"></div>
                </div>
                <div id="javascript-content" class="language-content">
                    <div class="course-grid" id="javascript-courses"></div>
                </div>
                <div id="html-content" class="language-content">
                    <div class="course-grid" id="html-courses"></div>
                </div>
                <div id="css-content" class="language-content">
                    <div class="course-grid" id="css-courses"></div>
                </div>
                <div id="react-content" class="language-content">
                    <div class="course-grid" id="react-courses"></div>
                </div>
            </div>
        </div>

        <div id="practice" class="section">
            <div class="practice-container">
                <div class="practice-header">
                    <h1> Code Playground</h1>
                    <p style="color: #8b949e; margin-top: 10px;">Write code and see it run in real-time</p>
                </div>

                <div class="practice-workspace">
                    <div class="code-panel">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span></span> Code Editor
                            </div>
                            <button class="run-button" onclick="runCode()">
                                <span></span> Run Code
                            </button>
                        </div>
                        <div class="code-editor-area">
                            <textarea id="codeEditor" placeholder="// Write your code here...
console.log('Hello, World!');

// HTML Example:
document.body.innerHTML = '<h1>Hello from JavaScript!</h1>';"></textarea>
                        </div>
                    </div>

                    <div class="output-panel">
                        <div class="panel-header">
                            <div class="panel-title">
                                <span></span> Output
                            </div>
                        </div>
                        <div class="output-content">
                            <iframe id="outputFrame" class="output-frame"></iframe>
                            <div id="consoleOutput" class="console-output" style="display: none;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="settings" class="section">
    <div class="settings-container">
        <div class="settings-header">
            <h1> Settings</h1>
            <p style="color: #8b949e; margin-top: 10px;">Customize your learning experience</p>
        </div>

        <div class="account-header">
            <div class="account-info">
                <div class="account-avatar" id="userAvatar">A</div>
                <div class="account-details">
                    <h2 id="userName">User</h2>
                    <p id="userEmail">user@example.com</p>
                </div>
            </div>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>

        <div class="settings-section">
            <h2> Preferences</h2>
            <div class="settings-grid">
                <div class="setting-card">
                    <h3> Dark Mode</h3>
                    <p>Toggle between dark and light themes</p>
                    <div class="toggle-switch active" id="themeToggle" onclick="toggleTheme()"></div>
                </div>
                
                <div class="setting-card">
                    <h3> Sound Effects</h3>
                    <p>Play sounds on interactions</p>
                    <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                </div>
                
                <div class="setting-card">
                    <h3> Auto-advance</h3>
                    <p>Move to next lesson automatically</p>
                    <div class="toggle-switch" onclick="toggleSetting(this)"></div>
                </div>
                
                <div class="setting-card">
                    <h3> Email Notifications</h3>
                    <p>Get updates about your progress</p>
                    <div class="toggle-switch active" onclick="toggleSetting(this)"></div>
                </div>
                
                <div class="setting-card">
                    <h3> Daily Goals</h3>
                    <p>Set learning time targets</p>
                    <div class="toggle-switch" onclick="toggleSetting(this)"></div>
                </div>
                
                <div class="setting-card">
                    <h3> Clear Cache</h3>
                    <p>Remove temporary data</p>
                    <button class="submit-button" onclick="clearCache()">Clear</button>
                </div>
            </div>
        </div>
    </div>
</div>

    <div id="lessonView" class="lesson-view">
        <div class="lesson-header-bar">
            <div class="lesson-left">
                <button class="back-button" onclick="closeLesson()"> Back</button>
                <div class="lesson-title" id="lessonTitle"></div>
            </div>
            <div class="lesson-progress-info">
                <div class="progress-indicator" id="lessonProgressText">0% Complete</div>
                <div class="tab-switcher">
                    <button class="tab-switch-btn active" id="learnTabBtn" onclick="switchPanel('learn')">Learn</button>
                    <button class="tab-switch-btn" id="questionsTabBtn" onclick="switchPanel('questions')" disabled>Questions </button>
                </div>
            </div>
        </div>
        <div class="lesson-content">
            <div id="learnPanel" class="content-panel active">
                <div class="chat-container">
                    <div class="chat-messages" id="learnMessages"></div>
                </div>
            </div>
            <div id="questionsPanel" class="content-panel">
                <div class="chat-container">
                    <div class="chat-messages" id="questionMessages"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="update-splash" id="updateSplash">
    <div class="update-content">
        <div class="update-icon"></div>
        <h1 class="update-title" id="splashTitle">New Version</h1>
        <p class="update-version">Version 3.1</p>
        
        <div class="changelog">
            <h3>New Features</h3>
            <ul>
                <li> AI-powered keyword explanations with smart highlighting</li>
                <li> New animated streak card system</li>
                <li> 2 more courses per language (more coming soon!)</li>
                <li> Enhanced progress charts with precise measurements</li>
                <li> Smart question locking after correct answers</li>
                <li> 2x faster lesson loading times</li>
            </ul>
            
            <div class="feature-preview">
                <div class="preview-label">Preview: AI Keyword Help</div>
                <div class="preview-demo">
                    <span class="keyword-highlight demo-highlight">variable</span>
                    <div class="preview-explanation">
                        <div class="preview-ai-icon"></div>
                        <div class="preview-text">AI explains instantly!</div>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="close-splash-btn" onclick="closeUpdateSplash()">Get Started</button>
    </div>
</div>

<div class="streak-celebration" id="streakCelebration">
    <div class="streak-card-animated">
        <div class="streak-icon-big"></div>
        <div class="streak-number-container">
            <div class="streak-number-big old">0</div>
            <div class="streak-number-big new">1</div>
        </div>
        <div class="streak-text-big">Day Streak!</div>
    </div>
</div>

<div class="ai-explanation-modal" id="aiExplanationModal" onclick="closeAIExplanation(event)">
    <div class="ai-explanation-content" onclick="event.stopPropagation()">
        <button class="ai-close-btn" onclick="closeAIExplanation()"></button>
        <div class="ai-keyword-display" id="aiKeyword"></div>
        <div class="ai-loading" id="aiLoading">
            <div class="ai-spinner"></div>
            <p>AI is thinking...</p>
        </div>
        <div class="ai-explanation-text" id="aiExplanationText" style="display: none;"></div>
    </div>
</div>

    <script>
        /*
         * IMPORTANT: This code uses localStorage for data persistence.
         * localStorage WILL NOT WORK in Claude.ai artifacts.
         * 
         * To use this application with full functionality:
         * 1. Copy this entire HTML file
         * 2. Save it as "devlearn.html" on your computer
         * 3. Open it in your web browser
         * 
         * When run locally or on a web server, all features will work.
         */

        let studyStartTime = null;
        let totalStudyTime = 0;
        let timerInterval = null;
        let pendingLesson = null;
        let soundEnabled = true;
        let currentUser = null;

        let userProgress = {
    python: { 
        course1: { completed: false, progress: 0, time: 0 },
        course2: { completed: false, progress: 0, time: 0 },
        course3: { completed: false, progress: 0, time: 0 },
        course4: { completed: false, progress: 0, time: 0 },
        course5: { completed: false, progress: 0, time: 0 }
    },
    javascript: { 
        course1: { completed: false, progress: 0, time: 0 },
        course2: { completed: false, progress: 0, time: 0 },
        course3: { completed: false, progress: 0, time: 0 },
        course4: { completed: false, progress: 0, time: 0 },
        course5: { completed: false, progress: 0, time: 0 }
    },
    html: { 
        course1: { completed: false, progress: 0, time: 0 },
        course2: { completed: false, progress: 0, time: 0 },
        course3: { completed: false, progress: 0, time: 0 },
        course4: { completed: false, progress: 0, time: 0 },
        course5: { completed: false, progress: 0, time: 0 }
    },
    css: { 
        course1: { completed: false, progress: 0, time: 0 },
        course2: { completed: false, progress: 0, time: 0 },
        course3: { completed: false, progress: 0, time: 0 },
        course4: { completed: false, progress: 0, time: 0 },
        course5: { completed: false, progress: 0, time: 0 }
    },
    react: { 
        course1: { completed: false, progress: 0, time: 0 },
        course2: { completed: false, progress: 0, time: 0 },
        course3: { completed: false, progress: 0, time: 0 },
        course4: { completed: false, progress: 0, time: 0 },
        course5: { completed: false, progress: 0, time: 0 }
    }
};

        const courses = {
    python: [
        { id: 'course1', title: 'Python Fundamentals', desc: 'Learn the basics', icon: '' },
        { id: 'course2', title: 'Data Types & Variables', desc: 'Master data structures', icon: '' },
        { id: 'course3', title: 'Control Flow', desc: 'Loops and conditionals', icon: '' },
        { id: 'course4', title: 'Functions & Modules', desc: 'Reusable code blocks', icon: '' },
        { id: 'course5', title: 'File Handling', desc: 'Read and write files', icon: '' }
    ],
    javascript: [
        { id: 'course1', title: 'JavaScript Basics', desc: 'Variables & console', icon: '' },
        { id: 'course2', title: 'Functions & Scope', desc: 'Master functions', icon: '' },
        { id: 'course3', title: 'DOM Manipulation', desc: 'Control web pages', icon: '' },
        { id: 'course4', title: 'Arrays & Objects', desc: 'Data structures', icon: '' },
        { id: 'course5', title: 'Events & Interaction', desc: 'User interactions', icon: '' }
    ],
    html: [
        { id: 'course1', title: 'HTML Basics', desc: 'Web structure', icon: '' },
        { id: 'course2', title: 'Lists & Organization', desc: 'Organize content', icon: '' },
        { id: 'course3', title: 'Images & Media', desc: 'Visual content', icon: '' },
        { id: 'course4', title: 'Forms & Input', desc: 'User input', icon: '' },
        { id: 'course5', title: 'Links & Navigation', desc: 'Connect pages', icon: '' }
    ],
    css: [
        { id: 'course1', title: 'CSS Basics', desc: 'Style pages', icon: '' },
        { id: 'course2', title: 'Box Model', desc: 'Layout fundamentals', icon: '' },
        { id: 'course3', title: 'Colors & Fonts', desc: 'Typography & design', icon: '' },
        { id: 'course4', title: 'Flexbox & Grid', desc: 'Modern layouts', icon: '' },
        { id: 'course5', title: 'Responsive Design', desc: 'Mobile-first CSS', icon: '' }
    ],
    react: [
        { id: 'course1', title: 'React Basics', desc: 'Components & JSX', icon: '' },
        { id: 'course2', title: 'Props', desc: 'Pass data to components', icon: '' },
        { id: 'course3', title: 'State Management', desc: 'Dynamic data', icon: '' },
        { id: 'course4', title: 'Events & Handlers', desc: 'User interactions', icon: '' },
        { id: 'course5', title: 'Conditional Rendering', desc: 'Dynamic UI', icon: '' }
    ]
};

        const lessonContent = {
  python: {
    course1: {
      learn: [
        { bot: "Hello! I'm your AI programming tutor, and I'm genuinely excited to guide you through learning Python from the ground up." },
        { bot: "Before we dive in, let me tell you why Python is an excellent choice for beginners: it reads almost like English, has a simple syntax, and is used by companies like Google, Netflix, and NASA." },
        { bot: "Python can do everything from building websites and analyzing data to creating games and automating boring tasks. The possibilities are truly endless!" },
        { bot: "Let's start with the absolute basics. Every programming language needs a way to display information to you, the user. In Python, we use something called the <code>print()</code> function." },
        { bot: "Think of <code>print()</code> as Python's way of talking to you. Whatever you put inside the parentheses, Python will display it on the screen." },
        { bot: "Here's your first line of Python code:<div class='code-example'><code>print('Hello, World!')</code></div>Let's break this down piece by piece." },
        { bot: "<code>print</code> is the function name - it tells Python what to do. The parentheses <code>()</code> are where we put what we want to print. The quotes <code>' '</code> tell Python this is text (we call this a 'string')." },
        { bot: "You can use either single quotes <code>'text'</code> or double quotes <code>\"text\"</code> - Python treats them the same way. Just make sure they match!" },
        { bot: "Now let's talk about variables. Variables are like labeled boxes where you can store information. You give them a name, and Python remembers what's inside." },
        { bot: "Here's how you create a variable:<div class='code-example'><code>name = 'Alice'<br>age = 25<br>print(name)<br>print(age)</code></div>" },
        { bot: "The equals sign <code>=</code> doesn't mean 'equal to' in Python - it means 'store this value'. We read <code>name = 'Alice'</code> as 'name gets the value Alice'." },
        { bot: "Variable names should be descriptive. Instead of <code>x = 25</code>, use <code>age = 25</code>. Your future self (and other programmers) will thank you!" },
        { bot: "Important rule: variable names can't start with numbers, can't have spaces, and should use underscores instead: <code>user_age</code> not <code>user age</code>." },
        { bot: "Python is very particular about indentation - that means the spaces at the beginning of lines. This isn't just for looks; Python uses indentation to understand your code structure." },
        { bot: "One last thing: Python uses <code>#</code> for comments. Comments are notes for humans - Python completely ignores them:<div class='code-example'><code># This is a comment<br>print('This runs')  # This comment is ignored</code></div>" },
        { bot: "Great job making it through the fundamentals! You now understand print statements, variables, and the basics of Python syntax. Ready to test your knowledge?" }
      ],
      exercises: [
        { type: 'fill', question: 'Complete the print statement:', code: '___BLANK___(<span style="color:#ce9178">\'Hello World\'</span>)', answer: 'print' },
        { type: 'fill', question: 'Create a variable storing your age:', code: '___BLANK___ = 18', answer: 'age' },
        { type: 'mcq', question: 'How many spaces does Python use for indentation?', options: ['2 spaces', '3 spaces', '4 spaces', '8 spaces'], correct: 2 },
        { type: 'mcq', question: 'Which symbol is used for comments in Python?', options: ['//', '#', '/*', '--'], correct: 1 },
        { type: 'fill', question: 'Print your name using a variable:', code: '___BLANK___(name)', answer: 'print' }
      ]
    },
    course2: {
      learn: [
        { bot: "Welcome back! Now that you understand variables, let's explore the different types of data Python can work with." },
        { bot: "In programming, we call these 'data types'. Think of them as different categories of information, like how we categorize things in real life: numbers, words, lists of items, etc." },
        { bot: "Python has several main data types: <strong>strings</strong> (text), <strong>integers</strong> (whole numbers), <strong>floats</strong> (decimal numbers), <strong>booleans</strong> (True/False), <strong>lists</strong>, and <strong>dictionaries</strong>." },
        { bot: "Let's start with numbers. <strong>Integers</strong> are whole numbers like 1, 42, -7. <strong>Floats</strong> have decimal points like 3.14, -0.5, 2.0:<div class='code-example'><code>age = 25  # integer<br>price = 19.99  # float</code></div>" },
        { bot: "<strong>Strings</strong> are text, always wrapped in quotes. You can combine (concatenate) strings with the <code>+</code> operator:<div class='code-example'><code>first = 'John'<br>last = 'Doe'<br>full = first + ' ' + last<br>print(full)  # John Doe</code></div>" },
        { bot: "<strong>Booleans</strong> are special values that are either <code>True</code> or <code>False</code> (note the capital letters!). They're incredibly useful for making decisions in your code." },
        { bot: "Now for something powerful: <strong>Lists</strong>. Lists store multiple items in order. You create them with square brackets:<div class='code-example'><code>grades = [90, 85, 92, 88]<br>names = ['Alice', 'Bob', 'Charlie']</code></div>" },
        { bot: "Lists are indexed starting from 0 (not 1!). So the first item is <code>grades[0]</code>, the second is <code>grades[1]</code>, and so on. This takes some getting used to!" },
        { bot: "You can add items to lists with <code>.append()</code>, remove with <code>.remove()</code>, and check the length with <code>len()</code>:<div class='code-example'><code>numbers = [1, 2, 3]<br>numbers.append(4)  # [1, 2, 3, 4]<br>print(len(numbers))  # 4</code></div>" },
        { bot: "<strong>Dictionaries</strong> store key-value pairs, like a real dictionary stores word-definition pairs:<div class='code-example'><code>person = {<br>  'name': 'Alice',<br>  'age': 25,<br>  'city': 'Paris'<br>}</code></div>" },
        { bot: "Access dictionary values using their keys: <code>person['name']</code> gives you 'Alice'. You can add new pairs: <code>person['job'] = 'Engineer'</code>." },
        { bot: "Here's a key concept: some data types are <strong>mutable</strong> (can change) and others are <strong>immutable</strong> (cannot change). Lists and dictionaries are mutable. Strings and numbers are immutable." },
        { bot: "Understanding data types helps you avoid errors and write better code. For example, you can't add a string to a number directly - you need to convert them first!" },
        { bot: "Excellent progress! You now understand Python's core data types and how to work with them. Let's test your knowledge!" }
      ],
      exercises: [
        { type: 'fill', question: 'Create an empty list variable:', code: 'my_list = ___BLANK___', answer: '[]' },
        { type: 'fill', question: 'Add a new grade 95 to the list "grades":', code: 'grades.___BLANK___(95)', answer: 'append' },
        { type: 'mcq', question: 'Which data type is mutable?', options: ['String', 'Integer', 'List', 'Float'], correct: 2 },
        { type: 'mcq', question: 'Which data type stores key-value pairs?', options: ['List', 'Tuple', 'Dictionary', 'String'], correct: 2 },
        { type: 'fill', question: 'Create a tuple with values 1, 2, 3:', code: 'my_tuple = ___BLANK___', answer: '(1, 2, 3)' }
      ]
    },
    course3: {
      learn: [
        { bot: "Welcome to one of the most important concepts in programming: Control Flow! This is where your code starts making decisions and repeating tasks." },
        { bot: "Until now, your code has run line by line, top to bottom. But real programs need to make choices and repeat actions. That's what control flow is all about." },
        { bot: "Let's start with <strong>if statements</strong>. They let your code make decisions based on conditions:<div class='code-example'><code>age = 18<br>if age >= 18:<br>    print('You can vote!')</code></div>" },
        { bot: "Notice the indentation! Everything indented under the <code>if</code> only runs when the condition is True. This is crucial in Python - wrong indentation will cause errors." },
        { bot: "You can add <code>else</code> for an alternative action, and <code>elif</code> (else-if) for multiple conditions:<div class='code-example'><code>score = 85<br>if score >= 90:<br>    print('A grade')<br>elif score >= 80:<br>    print('B grade')<br>else:<br>    print('Keep studying!')</code></div>" },
        { bot: "Comparison operators you'll use: <code>==</code> (equals), <code>!=</code> (not equals), <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>. Don't confuse <code>=</code> (assignment) with <code>==</code> (comparison)!" },
        { bot: "Now for <strong>loops</strong>! Loops repeat code multiple times. The <strong>for loop</strong> iterates over a sequence:<div class='code-example'><code>for i in range(5):<br>    print(i)  # Prints 0, 1, 2, 3, 4</code></div>" },
        { bot: "<code>range(5)</code> generates numbers from 0 to 4. You can also loop through lists:<div class='code-example'><code>fruits = ['apple', 'banana', 'orange']<br>for fruit in fruits:<br>    print(fruit)</code></div>" },
        { bot: "The <strong>while loop</strong> repeats as long as a condition is True. Be careful - if the condition never becomes False, you'll create an infinite loop!<div class='code-example'><code>count = 0<br>while count < 5:<br>    print(count)<br>    count = count + 1  # or count += 1</code></div>" },
        { bot: "You can control loops with <code>break</code> (exit the loop immediately) and <code>continue</code> (skip to next iteration):<div class='code-example'><code>for i in range(10):<br>    if i == 5:<br>        break  # Stops at 5<br>    print(i)</code></div>" },
        { bot: "Logical operators help combine conditions: <code>and</code> (both must be True), <code>or</code> (at least one must be True), <code>not</code> (inverts True/False)." },
        { bot: "Example with logical operators:<div class='code-example'><code>age = 20<br>has_id = True<br>if age >= 18 and has_id:<br>    print('You can enter')</code></div>" },
        { bot: "Control flow is what makes programs intelligent. Master these concepts and you can build anything - from simple calculators to complex games!" },
        { bot: "You're doing great! Let's practice what you've learned about making decisions and repeating actions." }
      ],
      exercises: [
        { type: 'fill', question: 'Complete the for loop:', code: '___BLANK___ i in range(3):', answer: 'for' },
        { type: 'fill', question: 'Write an if statement checking age:', code: '___BLANK___ age > 18:', answer: 'if' },
        { type: 'mcq', question: 'Which loop checks the condition before each iteration?', options: ['for', 'while', 'if', 'function'], correct: 1 },
        { type: 'mcq', question: 'Which operator means "equals" in comparison?', options: ['=', '==', '===', '!='], correct: 1 },
        { type: 'fill', question: 'Exit a loop immediately:', code: '___BLANK___', answer: 'break' }
      ]
    },
    course4: {
      learn: [
        { bot: "Let's talk about functions - one of the most powerful tools in programming. Functions are reusable blocks of code that perform specific tasks." },
        { bot: "Think of functions like recipes. Once you write a recipe (function), you can use it over and over without rewriting all the steps every time." },
        { bot: "Here's how to create a function in Python:<div class='code-example'><code>def greet(name):<br>    print('Hello, ' + name + '!')<br><br>greet('Alice')  # Calls the function</code></div>" },
        { bot: "Let's break this down: <code>def</code> tells Python you're defining a function. <code>greet</code> is the function name. <code>(name)</code> is a parameter - a value you pass in." },
        { bot: "Functions can return values using the <code>return</code> keyword. This lets you get results back from the function:<div class='code-example'><code>def add(a, b):<br>    return a + b<br><br>result = add(5, 3)<br>print(result)  # 8</code></div>" },
        { bot: "Important: <code>return</code> immediately exits the function. Any code after <code>return</code> won't run. Also, functions without <code>return</code> automatically return <code>None</code>." },
        { bot: "Functions can have default parameter values. If you don't provide a value when calling, it uses the default:<div class='code-example'><code>def greet(name='friend'):<br>    print('Hello, ' + name)<br><br>greet()  # Hello, friend<br>greet('Bob')  # Hello, Bob</code></div>" },
        { bot: "You can have multiple parameters and multiple return values:<div class='code-example'><code>def calculate(a, b):<br>    sum = a + b<br>    product = a * b<br>    return sum, product<br><br>s, p = calculate(4, 5)</code></div>" },
        { bot: "Now let's talk about <strong>modules</strong>. Modules are Python files containing functions and variables you can reuse. Think of them as toolboxes." },
        { bot: "Python has many built-in modules. To use them, you <code>import</code> them:<div class='code-example'><code>import math<br>print(math.sqrt(16))  # 4.0<br>print(math.pi)  # 3.14159...</code></div>" },
        { bot: "You can import specific functions from a module:<div class='code-example'><code>from math import sqrt, pi<br>print(sqrt(16))  # No need for math. prefix</code></div>" },
        { bot: "Some commonly used modules: <code>math</code> (mathematical functions), <code>random</code> (random numbers), <code>datetime</code> (dates and times), <code>os</code> (operating system functions)." },
        { bot: "You can create your own modules too! Just save functions in a .py file and import it. This keeps your code organized and reusable across different projects." },
        { bot: "Functions and modules make your code DRY (Don't Repeat Yourself). Write once, use everywhere. This is professional programming!" },
        { bot: "Excellent work! You now understand how to create reusable, organized code. Let's test your knowledge!" }
      ],
      exercises: [
        { type: 'fill', question: 'Define a function called greet:', code: '___BLANK___ greet():', answer: 'def' },
        { type: 'mcq', question: 'What keyword defines a function?', options: ['func', 'def', 'function', 'define'], correct: 1 },
        { type: 'fill', question: 'Import the math module:', code: '___BLANK___ math', answer: 'import' },
        { type: 'fill', question: 'Return a value from a function:', code: '___BLANK___ result', answer: 'return' },
        { type: 'mcq', question: 'What does DRY mean?', options: ['Delete Repeated Years', 'Don\'t Repeat Yourself', 'Data Return Yield', 'Define Return Yes'], correct: 1 }
      ]
    },
    course5: {
      learn: [
        { bot: "Welcome to File Handling! This is where your programs start interacting with files on your computer - reading data, saving results, and more." },
        { bot: "Why is file handling important? Because data doesn't just exist in your code. Real applications read from files (configuration, user data, logs) and write to files (saving progress, exporting results)." },
        { bot: "In Python, we use the <code>open()</code> function to work with files. It takes two main arguments: the filename and the mode:<div class='code-example'><code>file = open('data.txt', 'r')</code></div>" },
        { bot: "The mode tells Python what you want to do. The main modes are:<br><code>'r'</code> - Read (default, file must exist)<br><code>'w'</code> - Write (creates new or overwrites existing)<br><code>'a'</code> - Append (adds to end of file)<br><code>'r+'</code> - Read and write" },
        { bot: "Here's how to read an entire file:<div class='code-example'><code>file = open('data.txt', 'r')<br>content = file.read()<br>print(content)<br>file.close()  # Always close files!</code></div>" },
        { bot: "Important: Always close files when you're done! Forgetting to close can cause data loss or lock files. Think of it like closing a book after reading." },
        { bot: "Python has a better way: the <code>with</code> statement. It automatically closes the file for you:<div class='code-example'><code>with open('data.txt', 'r') as file:<br>    content = file.read()<br>    print(content)<br># File automatically closed here!</code></div>" },
        { bot: "You can read files line by line, which is better for large files:<div class='code-example'><code>with open('data.txt', 'r') as file:<br>    for line in file:<br>        print(line.strip())  # strip() removes extra whitespace</code></div>" },
        { bot: "Writing to files is straightforward:<div class='code-example'><code>with open('output.txt', 'w') as file:<br>    file.write('Hello, file!')<br>    file.write('\\n')  # \\n is newline<br>    file.write('Second line')</code></div>" },
        { bot: "Remember: <code>'w'</code> mode will erase the file if it exists! Use <code>'a'</code> to append instead:<div class='code-example'><code>with open('log.txt', 'a') as file:<br>    file.write('New log entry\\n')</code></div>" },
        { bot: "You can read all lines into a list:<div class='code-example'><code>with open('data.txt', 'r') as file:<br>    lines = file.readlines()  # Returns list of lines<br>    print(lines[0])  # First line</code></div>" },
        { bot: "File paths can be absolute (full path: <code>C:\\Users\\file.txt</code>) or relative (to your program: <code>data\\file.txt</code>). Use forward slashes or raw strings for Windows paths." },
        { bot: "Error handling is important with files. Files might not exist, or you might not have permission:<div class='code-example'><code>try:<br>    with open('data.txt', 'r') as file:<br>        content = file.read()<br>except FileNotFoundError:<br>    print('File not found!')</code></div>" },
        { bot: "File handling opens up so many possibilities: saving game progress, processing data files, creating logs, reading configuration, and more!" },
        { bot: "Great job! You now know how to make your programs interact with the file system. Let's practice!" }
      ],
      exercises: [
        { type: 'fill', question: 'Open a file in read mode:', code: '___BLANK___(\"data.txt\", \"r\")', answer: 'open' },
        { type: 'fill', question: 'Close a file:', code: 'file.___BLANK___()', answer: 'close' },
        { type: 'mcq', question: 'Which mode overwrites a file?', options: ['r', 'w', 'a', 'x'], correct: 1 },
        { type: 'fill', question: 'Use with statement to open file:', code: '___BLANK___ open("data.txt", "r") as f:', answer: 'with' },
        { type: 'mcq', question: 'What does "a" mode do?', options: ['Read', 'Write (overwrite)', 'Append', 'Delete'], correct: 2 }
      ]
    }
  },

  javascript: {
    course1: {
      learn: [
        { bot: "Welcome to JavaScript! This is the language that makes websites interactive and dynamic. Every modern website you visit uses JavaScript." },
        { bot: "JavaScript started as a browser language but now runs everywhere - on servers (Node.js), mobile apps, desktop applications, and even robots!" },
        { bot: "Let's start with the basics: variables. In JavaScript, we have three ways to declare variables: <code>var</code>, <code>let</code>, and <code>const</code>." },
        { bot: "Modern JavaScript uses <code>let</code> for variables that can change and <code>const</code> for constants:<div class='code-example'><code>let age = 25;  // can change<br>const name = 'Alice';  // cannot change<br>age = 26;  // OK<br>// name = 'Bob';  // Error!</code></div>" },
        { bot: "Notice the semicolons at the end? They're optional in JavaScript but considered good practice. They mark the end of a statement." },
        { bot: "JavaScript has several data types: <strong>strings</strong> (text), <strong>numbers</strong> (integers and decimals are the same type), <strong>booleans</strong> (true/false), <strong>arrays</strong>, <strong>objects</strong>, and <strong>undefined</strong>/<strong>null</strong>." },
        { bot: "Here's the interesting part: JavaScript is 'loosely typed'. You don't declare types - JavaScript figures it out:<div class='code-example'><code>let x = 5;  // number<br>x = 'hello';  // now a string - this is OK!</code></div>" },
        { bot: "To display output in the browser console, we use <code>console.log()</code>:<div class='code-example'><code>console.log('Hello, World!');<br>console.log(42);<br>console.log(true);</code></div>" },
        { bot: "Comments in JavaScript use <code>//</code> for single lines or <code>/* */</code> for multiple lines:<div class='code-example'><code>// This is a single line comment<br>/* This is a<br>   multi-line comment */</code></div>" },
        { bot: "JavaScript has all the basic operators: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> for math, <code>===</code> for equality (yes, three equals!), <code>!==</code> for not equal." },
        { bot: "Important: use <code>===</code> (strict equality) instead of <code>==</code>. The triple equals checks both value AND type:<div class='code-example'><code>5 === '5'  // false (number vs string)<br>5 == '5'   // true (JavaScript converts types)</code></div>" },
        { bot: "Template literals make string concatenation easier. Use backticks and <code>${}</code> for variables:<div class='code-example'><code>const name = 'Alice';<br>const age = 25;<br>console.log(`My name is ${name} and I'm ${age}`);</code></div>" },
        { bot: "JavaScript is case-sensitive: <code>name</code>, <code>Name</code>, and <code>NAME</code> are three different variables. Be consistent with your naming!" },
        { bot: "You're off to a great start! JavaScript's flexibility makes it powerful but requires you to be careful. Let's test your understanding!" }
      ],
      exercises: [
        { type: 'fill', question: 'Declare a constant:', code: '___BLANK___ x = 10;', answer: 'const' },
        { type: 'fill', question: 'Declare a variable that can change:', code: '___BLANK___ name = "Alice";', answer: 'let' },
        { type: 'mcq', question: 'Which allows changing the variable value?', options: ['const','let','both','neither'], correct: 1 },
        { type: 'fill', question: 'Output to console:', code: '___BLANK___.log(name);', answer: 'console' },
        { type: 'mcq', question: 'Strict equality operator?', options: ['==','===','=','!='], correct: 1 }
      ]
    },
    course2: {
      learn: [
        { bot: "Let's dive into functions - the building blocks of JavaScript programs. Functions let you organize code into reusable chunks." },
        { bot: "There are several ways to create functions in JavaScript. Let's start with the traditional function declaration:<div class='code-example'><code>function greet(name) {<br>  return 'Hello, ' + name;<br>}<br>console.log(greet('Alice'));</code></div>" },
        { bot: "Functions can take parameters (inputs) and return values (outputs). The <code>return</code> statement ends the function and sends a value back." },
        { bot: "JavaScript has a modern, shorter syntax called <strong>arrow functions</strong>:<div class='code-example'><code>const greet = (name) => {<br>  return 'Hello, ' + name;<br>};</code></div>" },
        { bot: "If your arrow function has just one line that returns something, you can make it even shorter:<div class='code-example'><code>const add = (a, b) => a + b;<br>// The return is implicit!</code></div>" },
        { bot: "Functions can have default parameters. If you don't provide a value, it uses the default:<div class='code-example'><code>function greet(name = 'friend') {<br>  return `Hello, ${name}!`;<br>}<br>greet();  // 'Hello, friend!'<br>greet('Alice');  // 'Hello, Alice!'</code></div>" },
        { bot: "Understanding <strong>scope</strong> is crucial. Variables declared inside functions are <em>local</em> - they don't exist outside the function:<div class='code-example'><code>function test() {<br>  let x = 5;  // local variable<br>}<br>// console.log(x);  // Error! x doesn't exist here</code></div>" },
        { bot: "Variables declared outside functions are <em>global</em> - accessible everywhere. But be careful: too many global variables can cause problems!" },
        { bot: "JavaScript functions are 'first-class' - you can store them in variables, pass them as arguments, and return them from other functions:<div class='code-example'><code>const sayHi = function() {<br>  console.log('Hi!');<br>};<br>sayHi();  // Call the function</code></div>" },
        { bot: "You can pass functions as arguments to other functions (we call these 'callbacks'):<div class='code-example'><code>function doMath(a, b, operation) {<br>  return operation(a, b);<br>}<br>const add = (x, y) => x + y;<br>console.log(doMath(5, 3, add));  // 8</code></div>" },
        { bot: "Functions can be anonymous (no name) when used as callbacks:<div class='code-example'><code>setTimeout(function() {<br>  console.log('This runs after 1 second');<br>}, 1000);</code></div>" },
        { bot: "The <code>return</code> keyword immediately exits the function. Code after <code>return</code> never runs. Functions without <code>return</code> return <code>undefined</code>." },
        { bot: "Pro tip: Keep functions small and focused. Each function should do one thing well. This makes your code easier to read, test, and debug." },
        { bot: "Excellent progress! Functions are fundamental to JavaScript. Master them and you're well on your way to being a great developer. Let's practice!" }
      ],
      exercises: [
        { type: 'fill', question: 'Declare a function:', code: '___BLANK___ add(a,b){ return a+b; }', answer: 'function' },
        { type: 'fill', question: 'Create an arrow function that returns sum:', code: 'const sum = (a,b) => ___BLANK___;', answer: 'a+b' },
        { type: 'mcq', question: 'Arrow function symbol?', options: ['->','=>','==>','::'], correct: 1 },
        { type: 'fill', question: 'Return a value:', code: '___BLANK___ a + b;', answer: 'return' },
        { type: 'mcq', question: 'Variables inside functions are:', options: ['global','local','constant','undefined'], correct: 1 }
      ]
    },
    course3: {
      learn: [
        { bot: "Time to make websites interactive! DOM manipulation lets JavaScript control and change HTML elements in real-time." },
        { bot: "DOM stands for Document Object Model. Think of it as JavaScript's way of 'seeing' and controlling the web page. Every HTML element becomes an object JavaScript can manipulate." },
        { bot: "The most common way to select elements is by ID:<div class='code-example'><code>const title = document.getElementById('title');<br>console.log(title);  // The element object</code></div>" },
        { bot: "You can also select by class name (returns multiple elements), tag name, or CSS selectors:<div class='code-example'><code>const items = document.getElementsByClassName('item');<br>const paragraphs = document.getElementsByTagName('p');<br>const first = document.querySelector('.item');  // First match<br>const all = document.querySelectorAll('.item');  // All matches</code></div>" },
        { bot: "<code>querySelector</code> and <code>querySelectorAll</code> are the most flexible - they accept any CSS selector, just like in CSS stylesheets!" },
        { bot: "Once you have an element, you can read or change its content:<div class='code-example'><code>const heading = document.querySelector('h1');<br>console.log(heading.textContent);  // Read text<br>heading.textContent = 'New Title';  // Change text<br>heading.innerHTML = '&lt;em&gt;Styled Title&lt;/em&gt;';  // Change HTML</code></div>" },
        { bot: "You can modify styles directly from JavaScript:<div class='code-example'><code>const box = document.getElementById('box');<br>box.style.backgroundColor = 'blue';<br>box.style.color = 'white';<br>box.style.fontSize = '20px';</code></div>" },
        { bot: "Notice how CSS property names change: <code>background-color</code> becomes <code>backgroundColor</code> (camelCase). This is a JavaScript convention." },
        { bot: "Adding and removing CSS classes is often better than inline styles:<div class='code-example'><code>element.classList.add('active');<br>element.classList.remove('hidden');<br>element.classList.toggle('selected');  // Add if absent, remove if present<br>element.classList.contains('active');  // Check if class exists</code></div>" },
        { bot: "You can read and change HTML attributes:<div class='code-example'><code>const link = document.querySelector('a');<br>link.getAttribute('href');  // Read attribute<br>link.setAttribute('href', 'https://google.com');  // Change it<br>link.hasAttribute('target');  // Check if exists</code></div>" },
        { bot: "Creating new elements and adding them to the page:<div class='code-example'><code>const newDiv = document.createElement('div');<br>newDiv.textContent = 'I am new!';<br>newDiv.classList.add('box');<br>document.body.appendChild(newDiv);  // Add to page</code></div>" },
        { bot: "Removing elements from the page:<div class='code-example'><code>const element = document.getElementById('remove-me');<br>element.remove();  // Modern way<br>// or<br>element.parentNode.removeChild(element);  // Old way</code></div>" },
        { bot: "These are the tools that make websites dynamic and interactive. With DOM manipulation, you can build anything from simple form validators to complex web applications!" },
        { bot: "Great work! You now have the power to control web pages with JavaScript. Let's test your DOM skills!" }
      ],
      exercises: [
        { type: 'fill', question: 'Select element by ID:', code: 'document.___BLANK___(\"myId\")', answer: 'getElementById' },
        { type: 'fill', question: 'Select all elements by class:', code: 'document.___BLANK___(\"myClass\")', answer: 'getElementsByClassName' },
        { type: 'mcq', question: 'Which selector accepts CSS syntax?', options: ['getElementById','getElementsByClassName','querySelector','getElementsByTagName'], correct: 2 },
        { type: 'fill', question: 'Change text content:', code: 'element.___BLANK___ = \"Hello\";', answer: 'textContent' },
        { type: 'mcq', question: 'To add a CSS class:', options: ['element.addClass()','element.classList.add()','element.class.add()','element.addClas()'], correct: 1 }
      ]
    },
    course4: {
      learn: [
        { bot: "Let's explore JavaScript's powerful data structures: arrays and objects. These let you organize and manage complex data." },
        { bot: "Arrays store ordered lists of values. You create them with square brackets:<div class='code-example'><code>const fruits = ['apple', 'banana', 'orange'];<br>const numbers = [1, 2, 3, 4, 5];<br>const mixed = [1, 'hello', true, null];  // Can mix types!</code></div>" },
        { bot: "Arrays are zero-indexed (first item is index 0):<div class='code-example'><code>const fruits = ['apple', 'banana', 'orange'];<br>console.log(fruits[0]);  // 'apple'<br>console.log(fruits[2]);  // 'orange'<br>console.log(fruits.length);  // 3</code></div>" },
        { bot: "Common array methods you'll use constantly:<div class='code-example'><code>fruits.push('grape');  // Add to end<br>fruits.pop();  // Remove from end<br>fruits.unshift('mango');  // Add to start<br>fruits.shift();  // Remove from start</code></div>" },
        { bot: "More powerful array methods:<div class='code-example'><code>fruits.includes('apple');  // Check if exists<br>fruits.indexOf('banana');  // Find position<br>fruits.slice(1, 3);  // Copy portion<br>fruits.splice(1, 2);  // Remove items</code></div>" },
        { bot: "Modern JavaScript has amazing array methods for functional programming. <code>map()</code> transforms each element:<div class='code-example'><code>const numbers = [1, 2, 3, 4];<br>const doubled = numbers.map(n => n * 2);<br>// doubled = [2, 4, 6, 8]</code></div>" },
        { bot: "<code>filter()</code> keeps only elements that pass a test:<div class='code-example'><code>const numbers = [1, 2, 3, 4, 5, 6];<br>const evens = numbers.filter(n => n % 2 === 0);<br>// evens = [2, 4, 6]</code></div>" },
        { bot: "<code>reduce()</code> combines all elements into a single value:<div class='code-example'><code>const numbers = [1, 2, 3, 4];<br>const sum = numbers.reduce((total, n) => total + n, 0);<br>// sum = 10</code></div>" },
        { bot: "Now for objects - they store key-value pairs (like dictionaries in Python):<div class='code-example'><code>const person = {<br>  name: 'Alice',<br>  age: 25,<br>  city: 'Paris'<br>};</code></div>" },
        { bot: "Accessing object properties - two ways:<div class='code-example'><code>console.log(person.name);  // Dot notation<br>console.log(person['age']);  // Bracket notation<br>// Bracket notation is useful for dynamic keys</code></div>" },
        { bot: "Adding, modifying, and deleting properties:<div class='code-example'><code>person.job = 'Engineer';  // Add<br>person.age = 26;  // Modify<br>delete person.city;  // Remove</code></div>" },
        { bot: "Objects can contain arrays, and arrays can contain objects:<div class='code-example'><code>const users = [<br>  { name: 'Alice', age: 25 },<br>  { name: 'Bob', age: 30 }<br>];<br>console.log(users[0].name);  // 'Alice'</code></div>" },
        { bot: "Useful object methods:<div class='code-example'><code>Object.keys(person);  // Array of keys<br>Object.values(person);  // Array of values<br>Object.entries(person);  // Array of [key, value] pairs</code></div>" },
        { bot: "Destructuring makes it easy to extract values:<div class='code-example'><code>const { name, age } = person;<br>console.log(name);  // 'Alice'<br>const [first, second] = fruits;<br>console.log(first);  // First fruit</code></div>" },
        { bot: "Arrays and objects are reference types - when you copy them, you copy the reference, not the data. Use spread operator <code>...</code> for real copies:<div class='code-example'><code>const copy = [...fruits];  // Array copy<br>const personCopy = {...person};  // Object copy</code></div>" },
        { bot: "Mastering arrays and objects is essential for JavaScript. Almost all data you work with will be structured this way!" },
        { bot: "Fantastic job! You now understand JavaScript's data structures. Let's put your knowledge to the test!" }
      ],
      exercises: [
        { type: 'fill', question: 'Create an empty object:', code: 'const person = ___BLANK___;', answer: '{}' },
        { type: 'fill', question: 'Add a property to object:', code: 'person.___BLANK___ = "Paris";', answer: 'city' },
        { type: 'mcq', question: 'Arrays are indexed starting from:', options: ['1','0','2','-1'], correct: 1 },
        { type: 'fill', question: 'Add item to end of array:', code: 'fruits.___BLANK___(\"grape\");', answer: 'push' },
        { type: 'mcq', question: 'Which method transforms each array element?', options: ['filter','map','reduce','forEach'], correct: 1 }
      ]
    },
    course5: {
      learn: [
        { bot: "Let's make websites truly interactive with events! Events are actions that happen in the browser - clicks, key presses, mouse movements, etc." },
        { bot: "Event listeners 'listen' for specific events and run code when they happen. This is how you respond to user interactions." },
        { bot: "The most common way to add event listeners:<div class='code-example'><code>const button = document.getElementById('myButton');<br>button.addEventListener('click', function() {<br>  console.log('Button clicked!');<br>});</code></div>" },
        { bot: "Using arrow functions makes event listeners cleaner:<div class='code-example'><code>button.addEventListener('click', () => {<br>  console.log('Button clicked!');<br>});</code></div>" },
        { bot: "Common events you'll use:<br><code>click</code> - mouse click<br><code>dblclick</code> - double click<br><code>mouseenter</code>, <code>mouseleave</code> - mouse hover<br><code>keydown</code>, <code>keyup</code> - keyboard<br><code>submit</code> - form submission<br><code>change</code> - input value changes" },
        { bot: "The event object contains information about what happened:<div class='code-example'><code>button.addEventListener('click', (event) => {<br>  console.log(event.target);  // Element that was clicked<br>  console.log(event.type);  // 'click'<br>  console.log(event.clientX);  // Mouse X position<br>});</code></div>" },
        { bot: "For form inputs, you can read values when they change:<div class='code-example'><code>const input = document.getElementById('username');<br>input.addEventListener('input', (e) => {<br>  console.log('Current value:', e.target.value);<br>});</code></div>" },
        { bot: "Prevent default browser behavior with <code>event.preventDefault()</code>:<div class='code-example'><code>form.addEventListener('submit', (e) => {<br>  e.preventDefault();  // Stop form from submitting<br>  // Handle form with JavaScript instead<br>});</code></div>" },
        { bot: "Keyboard events give you information about which key was pressed:<div class='code-example'><code>document.addEventListener('keydown', (e) => {<br>  console.log('Key pressed:', e.key);<br>  if (e.key === 'Enter') {<br>    console.log('Enter was pressed!');<br>  }<br>});</code></div>" },
        { bot: "Event delegation is a powerful technique. Instead of adding listeners to many elements, add one to a parent:<div class='code-example'><code>document.getElementById('list').addEventListener('click', (e) => {<br>  if (e.target.tagName === 'LI') {<br>    console.log('List item clicked:', e.target.textContent);<br>  }<br>});</code></div>" },
        { bot: "You can remove event listeners too:<div class='code-example'><code>function handleClick() {<br>  console.log('Clicked!');<br>}<br>button.addEventListener('click', handleClick);<br>button.removeEventListener('click', handleClick);</code></div>" },
        { bot: "Events can bubble up through parent elements. You can stop this with <code>event.stopPropagation()</code>:<div class='code-example'><code>child.addEventListener('click', (e) => {<br>  e.stopPropagation();  // Don't trigger parent's listener<br>  console.log('Child clicked');<br>});</code></div>" },
        { bot: "Building interactive features: toggle visibility, validate forms, create dropdowns, build games - it all starts with event listeners!" },
        { bot: "Pro tip: Remove event listeners when elements are removed from the DOM to prevent memory leaks. Modern frameworks handle this automatically." },
        { bot: "Combining DOM manipulation with event handling gives you complete control over user interactions. This is the foundation of modern web development!" },
        { bot: "Excellent work! You now have all the tools to create fully interactive websites. Let's test your event handling skills!" }
      ],
      exercises: [
        { type: 'fill', question: 'Add click event listener:', code: 'button.___BLANK___(\"click\", () => {})', answer: 'addEventListener' },
        { type: 'fill', question: 'Log a message to console:', code: '___BLANK___.log(\"Hello\")', answer: 'console' },
        { type: 'mcq', question: 'Which event fires when form is submitted?', options: ['click','submit','send','post'], correct: 1 },
        { type: 'fill', question: 'Prevent default action:', code: 'event.___BLANK___()', answer: 'preventDefault' },
        { type: 'mcq', question: 'Event object property for clicked element:', options: ['element','target','source','this'], correct: 1 }
      ]
    }
  },

  html: {
    course1: {
      learn: [
        { bot: "Welcome to HTML - HyperText Markup Language! HTML is the foundation of every website you've ever visited." },
        { bot: "Think of HTML as the skeleton of a website. It provides structure and content. CSS adds styling (we'll learn that later), and JavaScript adds interactivity." },
        { bot: "HTML uses 'tags' to mark up content. Tags are wrapped in angle brackets: <code>&lt;tagname&gt;</code>. Most tags come in pairs - an opening tag and a closing tag." },
        { bot: "Here's your first HTML:<div class='code-example'><code>&lt;h1&gt;Hello, World!&lt;/h1&gt;</code></div>The <code>&lt;h1&gt;</code> opens, the text is the content, and <code>&lt;/h1&gt;</code> closes the tag (notice the forward slash)." },
        { bot: "HTML has six heading levels, from <code>&lt;h1&gt;</code> (largest/most important) to <code>&lt;h6&gt;</code> (smallest). Use them to create hierarchy:<div class='code-example'><code>&lt;h1&gt;Main Title&lt;/h1&gt;<br>&lt;h2&gt;Section Title&lt;/h2&gt;<br>&lt;h3&gt;Subsection&lt;/h3&gt;</code></div>" },
        { bot: "Paragraphs use <code>&lt;p&gt;</code> tags:<div class='code-example'><code>&lt;p&gt;This is a paragraph. It can contain multiple sentences.&lt;/p&gt;</code></div>" },
        { bot: "Some tags are 'self-closing' - they don't need a closing tag. Line breaks are one example:<div class='code-example'><code>&lt;p&gt;First line&lt;br&gt;Second line&lt;/p&gt;</code></div>" },
        { bot: "Links (hyperlinks) use the <code>&lt;a&gt;</code> tag with an <code>href</code> attribute:<div class='code-example'><code>&lt;a href=\"https://google.com\"&gt;Click here&lt;/a&gt;</code></div>The text between tags is what users click on." },
        { bot: "Attributes provide extra information about elements. They go in the opening tag: <code>&lt;tag attribute=\"value\"&gt;</code>. Common attributes include <code>href</code>, <code>src</code>, <code>id</code>, <code>class</code>." },
        { bot: "Images use the <code>&lt;img&gt;</code> tag (self-closing). Two important attributes are <code>src</code> (image location) and <code>alt</code> (description):<div class='code-example'><code>&lt;img src=\"photo.jpg\" alt=\"A beautiful sunset\"&gt;</code></div>" },
        { bot: "The <code>alt</code> attribute is crucial for accessibility (screen readers) and SEO (search engines). Always describe your images!" },
        { bot: "Every HTML page has a basic structure:<div class='code-example'><code>&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>  &lt;title&gt;Page Title&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>  &lt;!-- Your content here --&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;</code></div>" },
        { bot: "<code>&lt;!DOCTYPE html&gt;</code> tells browsers this is HTML5. <code>&lt;head&gt;</code> contains metadata. <code>&lt;body&gt;</code> contains visible content. <code>&lt;!-- --&gt;</code> are comments." },
        { bot: "HTML is forgiving - browsers try to display broken HTML. But proper structure is important for consistency, accessibility, and SEO!" },
        { bot: "You're learning the language of the web! Every website starts with HTML. Let's test what you've learned!" }
      ],
      exercises: [
        { type: 'fill', question: 'Create a main heading:', code: '&lt;___BLANK___&gt;Hello&lt;/h1&gt;', answer: 'h1' },
        { type: 'fill', question: 'Create a paragraph:', code: '&lt;___BLANK___&gt;Text&lt;/p&gt;', answer: 'p' },
        { type: 'mcq', question: 'HTML stands for:', options: ['Hyperlinks and Text Markup','Hyper Text Markup Language','Home Tool Markup Language','Hypertext Modern Language'], correct: 1 },
        { type: 'fill', question: 'Create a link:', code: '&lt;a ___BLANK___=\"https://google.com\"&gt;Link&lt;/a&gt;', answer: 'href' },
        { type: 'mcq', question: 'Which tag displays an image?', options: ['img','image','src','picture'], correct: 0 }
      ]
    },
    course2: {
      learn: [
        { bot: "Let's organize content with lists! HTML has two main types of lists: ordered (numbered) and unordered (bulleted)." },
        { bot: "Unordered lists use <code>&lt;ul&gt;</code> (unordered list) and <code>&lt;li&gt;</code> (list item) tags:<div class='code-example'><code>&lt;ul&gt;<br>  &lt;li&gt;Apples&lt;/li&gt;<br>  &lt;li&gt;Bananas&lt;/li&gt;<br>  &lt;li&gt;Oranges&lt;/li&gt;<br>&lt;/ul&gt;</code></div>" },
        { bot: "This creates a bulleted list. Browsers add the bullets automatically - you just provide the structure!" },
        { bot: "Ordered lists use <code>&lt;ol&gt;</code> instead of <code>&lt;ul&gt;</code>. Everything else is the same:<div class='code-example'><code>&lt;ol&gt;<br>  &lt;li&gt;First step&lt;/li&gt;<br>  &lt;li&gt;Second step&lt;/li&gt;<br>  &lt;li&gt;Third step&lt;/li&gt;<br>&lt;/ol&gt;</code></div>" },
        { bot: "This creates a numbered list: 1, 2, 3, etc. Perfect for instructions, rankings, or any sequence!" },
        { bot: "You can nest lists inside other lists to create hierarchies:<div class='code-example'><code>&lt;ul&gt;<br>  &lt;li&gt;Fruits<br>    &lt;ul&gt;<br>      &lt;li&gt;Apples&lt;/li&gt;<br>      &lt;li&gt;Oranges&lt;/li&gt;<br>    &lt;/ul&gt;<br>  &lt;/li&gt;<br>  &lt;li&gt;Vegetables&lt;/li&gt;<br>&lt;/ul&gt;</code></div>" },
        { bot: "Notice the indentation? It's not required for HTML to work, but it makes your code much easier to read. Always indent nested elements!" },
        { bot: "You can mix ordered and unordered lists:<div class='code-example'><code>&lt;ol&gt;<br>  &lt;li&gt;Main topic<br>    &lt;ul&gt;<br>      &lt;li&gt;Subtopic A&lt;/li&gt;<br>      &lt;li&gt;Subtopic B&lt;/li&gt;<br>    &lt;/ul&gt;<br>  &lt;/li&gt;<br>&lt;/ol&gt;</code></div>" },
        { bot: "Lists are used everywhere on the web: navigation menus, tables of contents, shopping carts, step-by-step instructions, and more!" },
        { bot: "There's also a description list (<code>&lt;dl&gt;</code>) for term-definition pairs, but <code>&lt;ul&gt;</code> and <code>&lt;ol&gt;</code> are most common." },
        { bot: "Pro tip: Each <code>&lt;li&gt;</code> can contain any HTML - paragraphs, images, links, even other lists! The structure is very flexible." },
        { bot: "With CSS (which you'll learn later), you can customize list markers - change bullet shapes, use custom images, or remove markers entirely." },
        { bot: "Lists provide semantic meaning - they tell browsers and search engines \"this is a list of related items.\" This is important for accessibility!" },
        { bot: "Great work! Lists are a fundamental way to organize information on the web. Let's practice!" }
      ],
      exercises: [
        { type: 'fill', question: 'Start an unordered list:', code: '&lt;___BLANK___&gt;', answer: 'ul' },
        { type: 'fill', question: 'Create a list item:', code: '&lt;___BLANK___&gt;Item&lt;/li&gt;', answer: 'li' },
        { type: 'mcq', question: 'Which creates a numbered list?', options: ['ul','ol','li','dl'], correct: 1 },
        { type: 'fill', question: 'Close an unordered list:', code: '&lt;/___BLANK___&gt;', answer: 'ul' },
        { type: 'mcq', question: 'List items use which tag?', options: ['item','list','li','l'], correct: 2 }
      ]
    },
    course3: {
      learn: [
        { bot: "Images make websites visually appealing and help communicate ideas. Let's master the <code>&lt;img&gt;</code> tag!" },
        { bot: "The <code>&lt;img&gt;</code> tag is self-closing and requires two main attributes:<div class='code-example'><code>&lt;img src=\"image.jpg\" alt=\"Description of image\"&gt;</code></div>" },
        { bot: "<code>src</code> (source) tells the browser where to find the image. This can be a file path (<code>images/photo.jpg</code>) or a URL (<code>https://example.com/photo.jpg</code>)." },
        { bot: "<code>alt</code> (alternative text) describes the image. It's shown if the image fails to load, and it's read by screen readers for visually impaired users. Never skip alt text!" },
        { bot: "Good alt text describes the image's content and purpose:<div class='code-example'><code>&lt;!-- Bad --&gt;<br>&lt;img src=\"dog.jpg\" alt=\"image\"&gt;<br><br>&lt;!-- Good --&gt;<br>&lt;img src=\"dog.jpg\" alt=\"Golden retriever puppy playing in grass\"&gt;</code></div>" },
        { bot: "You can control image size with <code>width</code> and <code>height</code> attributes (in pixels):<div class='code-example'><code>&lt;img src=\"photo.jpg\" alt=\"Photo\" width=\"300\" height=\"200\"&gt;</code></div>" },
        { bot: "However, it's generally better to use CSS for sizing. HTML attributes can make images load faster by reserving space, but CSS gives more control." },
        { bot: "Image file types you'll use:<br><strong>JPEG/JPG</strong>: Photos, complex images<br><strong>PNG</strong>: Graphics, logos, transparency<br><strong>GIF</strong>: Simple animations<br><strong>SVG</strong>: Scalable vector graphics (icons, logos)<br><strong>WebP</strong>: Modern format, smaller files" },
        { bot: "File paths can be <strong>relative</strong> (to your current page) or <strong>absolute</strong> (full URL):<div class='code-example'><code>&lt;!-- Relative --&gt;<br>&lt;img src=\"images/photo.jpg\" alt=\"Photo\"&gt;<br><br>&lt;!-- Absolute --&gt;<br>&lt;img src=\"https://example.com/photo.jpg\" alt=\"Photo\"&gt;</code></div>" },
        { bot: "Relative paths: <code>photo.jpg</code> (same folder), <code>images/photo.jpg</code> (subfolder), <code>../photo.jpg</code> (parent folder)." },
        { bot: "You can wrap images in links to make them clickable:<div class='code-example'><code>&lt;a href=\"https://example.com\"&gt;<br>  &lt;img src=\"button.jpg\" alt=\"Click me\"&gt;<br>&lt;/a&gt;</code></div>" },
        { bot: "For responsive design (images that scale with screen size), avoid fixed dimensions. Use CSS <code>max-width: 100%;</code> instead." },
        { bot: "The <code>&lt;figure&gt;</code> and <code>&lt;figcaption&gt;</code> tags add semantic meaning to images with captions:<div class='code-example'><code>&lt;figure&gt;<br>  &lt;img src=\"sunset.jpg\" alt=\"Sunset over ocean\"&gt;<br>  &lt;figcaption&gt;Sunset at Malibu Beach&lt;/figcaption&gt;<br>&lt;/figure&gt;</code></div>" },
        { bot: "Image optimization is important: compress images before uploading, choose appropriate formats, and use lazy loading for better performance." },
        { bot: "Excellent work! Images are essential to web design. You now know how to add them properly and accessibly!" }
      ],
      exercises: [
        { type: 'fill', question: 'Add an image:', code: '&lt;___BLANK___ src=\"pic.jpg\" alt=\"Photo\"&gt;', answer: 'img' },
        { type: 'fill', question: 'Describe image (attribute):', code: '&lt;img src=\"pic.jpg\" ___BLANK___=\"Description\"&gt;', answer: 'alt' },
        { type: 'mcq', question: 'Which attribute specifies image location?', options: ['src','href','link','url'], correct: 0 },
        { type: 'fill', question: 'Set image width:', code: '&lt;img src=\"pic.jpg\" alt=\"Photo\" ___BLANK___=\"200\"&gt;', answer: 'width' },
        { type: 'mcq', question: 'Why is alt text important?', options: ['Decoration','Accessibility & SEO','Color','Animation'], correct: 1 }
      ]
    },
    course4: {
      learn: [
        { bot: "Forms are how websites collect information from users. Let's build interactive forms with HTML!" },
        { bot: "Forms are created with the <code>&lt;form&gt;</code> tag. All form inputs go inside:<div class='code-example'><code>&lt;form&gt;<br>  &lt;!-- Form inputs here --&gt;<br>&lt;/form&gt;</code></div>" },
        { bot: "The <code>&lt;input&gt;</code> tag is incredibly versatile. Its <code>type</code> attribute determines what kind of input:<div class='code-example'><code>&lt;input type=\"text\"&gt;  &lt;!-- Text input --&gt;<br>&lt;input type=\"email\"&gt;  &lt;!-- Email input --&gt;<br>&lt;input type=\"password\"&gt;  &lt;!-- Password input --&gt;</code></div>" },
        { bot: "Always use <code>&lt;label&gt;</code> tags for accessibility. They describe inputs for screen readers and make forms more usable:<div class='code-example'><code>&lt;label for=\"username\"&gt;Username:&lt;/label&gt;<br>&lt;input type=\"text\" id=\"username\" name=\"username\"&gt;</code></div>" },
        { bot: "The <code>for</code> attribute in labels should match the input's <code>id</code>. This connects them - clicking the label focuses the input!" },
        { bot: "The <code>name</code> attribute is crucial - it's how the server identifies each field when the form is submitted:<div class='code-example'><code>&lt;input type=\"text\" name=\"email\" id=\"email\"&gt;</code></div>" },
        { bot: "Common input types:<br><code>text</code> - Single line text<br><code>email</code> - Email (validates format)<br><code>password</code> - Hidden characters<br><code>number</code> - Numeric input<br><code>tel</code> - Phone number<br><code>date</code> - Date picker<br><code>checkbox</code> - On/off option<br><code>radio</code> - One choice from many" },
        { bot: "Checkboxes let users select multiple options:<div class='code-example'><code>&lt;input type=\"checkbox\" id=\"subscribe\" name=\"subscribe\"&gt;<br>&lt;label for=\"subscribe\"&gt;Subscribe to newsletter&lt;/label&gt;</code></div>" },
        { bot: "Radio buttons let users choose one option from a group. Use the same <code>name</code> for all options in the group:<div class='code-example'><code>&lt;input type=\"radio\" id=\"small\" name=\"size\" value=\"small\"&gt;<br>&lt;label for=\"small\"&gt;Small&lt;/label&gt;<br><br>&lt;input type=\"radio\" id=\"large\" name=\"size\" value=\"large\"&gt;<br>&lt;label for=\"large\"&gt;Large&lt;/label&gt;</code></div>" },
        { bot: "Textareas allow multi-line text input:<div class='code-example'><code>&lt;label for=\"message\"&gt;Message:&lt;/label&gt;<br>&lt;textarea id=\"message\" name=\"message\" rows=\"4\" cols=\"50\"&gt;&lt;/textarea&gt;</code></div>" },
        { bot: "Dropdowns use <code>&lt;select&gt;</code> and <code>&lt;option&gt;</code> tags:<div class='code-example'><code>&lt;label for=\"country\"&gt;Country:&lt;/label&gt;<br>&lt;select id=\"country\" name=\"country\"&gt;<br>  &lt;option value=\"usa\"&gt;USA&lt;/option&gt;<br>  &lt;option value=\"uk\"&gt;UK&lt;/option&gt;<br>  &lt;option value=\"canada\"&gt;Canada&lt;/option&gt;<br>&lt;/select&gt;</code></div>" },
        { bot: "Submit buttons send the form data:<div class='code-example'><code>&lt;button type=\"submit\"&gt;Submit&lt;/button&gt;<br>&lt;!-- or --&gt;<br>&lt;input type=\"submit\" value=\"Submit\"&gt;</code></div>" },
        { bot: "Form attributes: <code>placeholder</code> (hint text), <code>required</code> (must be filled), <code>disabled</code> (can't interact), <code>readonly</code> (can see but not edit):<div class='code-example'><code>&lt;input type=\"text\" placeholder=\"Enter name\" required&gt;</code></div>" },
        { bot: "Modern HTML5 validation: browsers check email format, number ranges, required fields, etc. automatically before submitting!" },
        { bot: "Forms are the gateway to user interaction. With JavaScript (which you'll learn), you can do amazing things with form data!" },
        { bot: "Fantastic progress! You can now create interactive forms. Let's practice!" }
      ],
      exercises: [
        { type: 'fill', question: 'Create a form:', code: '&lt;___BLANK___&gt;&lt;/form&gt;', answer: 'form' },
        { type: 'fill', question: 'Create text input:', code: '&lt;input ___BLANK___=\"text\"&gt;', answer: 'type' },
        { type: 'mcq', question: 'Which button submits a form?', options: ['type="submit"','type="send"','type="post"','type="go"'], correct: 0 },
        { type: 'fill', question: 'Label for input (connects to id):', code: '&lt;label ___BLANK___=\"username\"&gt;Name&lt;/label&gt;', answer: 'for' },
        { type: 'mcq', question: 'Which creates a dropdown?', options: ['dropdown','select','option','list'], correct: 1 }
      ]
    },
    course5: {
      learn: [
        { bot: "Links are what make the web a 'web' - they connect pages together. Let's master navigation with HTML!" },
        { bot: "The anchor tag <code>&lt;a&gt;</code> creates hyperlinks. The <code>href</code> attribute specifies the destination:<div class='code-example'><code>&lt;a href=\"https://google.com\"&gt;Go to Google&lt;/a&gt;</code></div>" },
        { bot: "The text between the tags is what users see and click. Make it descriptive - 'click here' is bad, 'Read our privacy policy' is good!" },
        { bot: "Links can point to external websites (full URLs) or internal pages (relative paths):<div class='code-example'><code>&lt;!-- External --&gt;<br>&lt;a href=\"https://example.com\"&gt;External Link&lt;/a&gt;<br><br>&lt;!-- Internal --&gt;<br>&lt;a href=\"about.html\"&gt;About Us&lt;/a&gt;<br>&lt;a href=\"contact.html\"&gt;Contact&lt;/a&gt;</code></div>" },
        { bot: "The <code>target</code> attribute controls where the link opens. <code>target=\"_blank\"</code> opens in a new tab:<div class='code-example'><code>&lt;a href=\"https://example.com\" target=\"_blank\"&gt;Open in new tab&lt;/a&gt;</code></div>" },
        { bot: "When using <code>target=\"_blank\"</code>, add <code>rel=\"noopener noreferrer\"</code> for security:<div class='code-example'><code>&lt;a href=\"https://example.com\" target=\"_blank\" rel=\"noopener noreferrer\"&gt;Safe link&lt;/a&gt;</code></div>" },
        { bot: "Links can point to specific sections of a page using IDs (called anchor links):<div class='code-example'><code>&lt;!-- Link to section --&gt;<br>&lt;a href=\"#about\"&gt;Jump to About&lt;/a&gt;<br><br>&lt;!-- The section --&gt;<br>&lt;h2 id=\"about\"&gt;About Us&lt;/h2&gt;</code></div>" },
        { bot: "Email links use <code>mailto:</code>:<div class='code-example'><code>&lt;a href=\"mailto:hello@example.com\"&gt;Email us&lt;/a&gt;</code></div>Clicking opens the user's email client." },
        { bot: "Phone links use <code>tel:</code>:<div class='code-example'><code>&lt;a href=\"tel:+1234567890\"&gt;Call us&lt;/a&gt;</code></div>On mobile, this initiates a phone call." },
        { bot: "Download links use the <code>download</code> attribute:<div class='code-example'><code>&lt;a href=\"document.pdf\" download&gt;Download PDF&lt;/a&gt;</code></div>" },
        { bot: "Navigation menus are usually lists of links:<div class='code-example'><code>&lt;nav&gt;<br>  &lt;ul&gt;<br>    &lt;li&gt;&lt;a href=\"index.html\"&gt;Home&lt;/a&gt;&lt;/li&gt;<br>    &lt;li&gt;&lt;a href=\"about.html\"&gt;About&lt;/a&gt;&lt;/li&gt;<br>    &lt;li&gt;&lt;a href=\"contact.html\"&gt;Contact&lt;/a&gt;&lt;/li&gt;<br>  &lt;/ul&gt;<br>&lt;/nav&gt;</code></div>" },
        { bot: "The <code>&lt;nav&gt;</code> tag is semantic HTML - it tells browsers and screen readers 'this is navigation.' This improves accessibility!" },
        { bot: "Breadcrumb navigation shows where users are in your site hierarchy:<div class='code-example'><code>&lt;nav&gt;<br>  &lt;a href=\"/\"&gt;Home&lt;/a&gt; &gt;<br>  &lt;a href=\"/products\"&gt;Products&lt;/a&gt; &gt;<br>  &lt;span&gt;Current Page&lt;/span&gt;<br>&lt;/nav&gt;</code></div>" },
        { bot: "Links can be styled with CSS to look like buttons, menu items, or anything else. The HTML just provides the functionality!" },
        { bot: "Good navigation is crucial for user experience. Users should always know where they are and how to get where they want to go." },
        { bot: "Excellent work! You've mastered HTML fundamentals. You can now create structured, linked, interactive web pages!" }
      ],
      exercises: [
        { type: 'fill', question: 'Create a link:', code: '&lt;___BLANK___ href=\"page.html\"&gt;Link&lt;/a&gt;', answer: 'a' },
        { type: 'fill', question: 'Email link:', code: '&lt;a href=\"___BLANK___:test@example.com\"&gt;Email&lt;/a&gt;', answer: 'mailto' },
        { type: 'mcq', question: 'Which attribute opens link in new tab?', options: ['newtab','window','target','blank'], correct: 2 },
        { type: 'fill', question: 'Open in new tab:', code: '&lt;a href=\"link.html\" ___BLANK___=\"_blank\"&gt;Link&lt;/a&gt;', answer: 'target' },
        { type: 'mcq', question: 'Semantic tag for navigation?', options: ['menu','links','nav','navbar'], correct: 2 }
      ]
    }
  },

  css: {
    course1: {
      learn: [
        { bot: "Welcome to CSS - Cascading Style Sheets! While HTML provides structure, CSS makes websites beautiful." },
        { bot: "Think of HTML as the bones, and CSS as the skin, hair, and clothing. CSS controls colors, fonts, layouts, spacing, and all visual aspects." },
        { bot: "CSS uses selectors to target HTML elements, then applies styles:<div class='code-example'><code>h1 {<br>  color: blue;<br>  font-size: 32px;<br>}</code></div>" },
        { bot: "This selects all <code>&lt;h1&gt;</code> elements and makes them blue with 32-pixel font size. The syntax is <code>selector { property: value; }</code>." },
        { bot: "There are three ways to add CSS:<br><strong>Inline</strong>: <code>&lt;h1 style=\"color: blue;\"&gt;</code><br><strong>Internal</strong>: <code>&lt;style&gt;</code> tag in <code>&lt;head&gt;</code><br><strong>External</strong>: Separate .css file (best practice!)" },
        { bot: "External CSS keeps your HTML clean:<div class='code-example'><code>&lt;!-- In HTML --&gt;<br>&lt;link rel=\"stylesheet\" href=\"styles.css\"&gt;</code></div>" },
        { bot: "Basic selectors:<br><strong>Element</strong>: <code>p { }</code> (all paragraphs)<br><strong>Class</strong>: <code>.classname { }</code> (elements with that class)<br><strong>ID</strong>: <code>#idname { }</code> (single unique element)" },
        { bot: "Classes are reusable, IDs are unique:<div class='code-example'><code>&lt;!-- HTML --&gt;<br>&lt;p class=\"highlight\"&gt;Text&lt;/p&gt;<br>&lt;p class=\"highlight\"&gt;More text&lt;/p&gt;<br><br>/* CSS */<br>.highlight {<br>  background-color: yellow;<br>}</code></div>" },
        { bot: "Color properties:<br><code>color</code>: text color<br><code>background-color</code>: background color<br>Values can be names (<code>red</code>), hex (<code>#ff0000</code>), RGB (<code>rgb(255,0,0)</code>), or HSL." },
        { bot: "Font properties:<br><code>font-family</code>: font name<br><code>font-size</code>: text size<br><code>font-weight</code>: bold, normal, or numbers<br><code>font-style</code>: italic, normal<br><code>text-align</code>: left, center, right, justify" },
        { bot: "Common units:<br><strong>px</strong>: pixels (fixed size)<br><strong>%</strong>: percent of parent<br><strong>em</strong>: relative to parent font<br><strong>rem</strong>: relative to root font<br><strong>vh/vw</strong>: viewport height/width" },
        { bot: "The 'cascade' in CSS means styles flow down. Later rules override earlier ones:<div class='code-example'><code>p { color: blue; }<br>p { color: red; }  /* This wins! */</code></div>" },
        { bot: "Specificity determines which style wins: inline > ID > class > element. More specific selectors override less specific ones." },
        { bot: "Comments in CSS use <code>/* comment */</code>. Use them to organize your styles and explain complex code!" },
        { bot: "CSS is incredibly powerful. You're just scratching the surface, but you already have the tools to style websites beautifully!" },
        { bot: "Great start! You now understand CSS fundamentals. Let's practice styling!" }
      ],
      exercises: [
        { type: 'fill', question: 'Select all paragraphs:', code: '___BLANK___ { color: blue; }', answer: 'p' },
        { type: 'fill', question: 'Set background color:', code: 'body { ___BLANK___: yellow; }', answer: 'background-color' },
        { type: 'mcq', question: 'CSS stands for:', options: ['Computer Style Sheets','Cascading Style Sheets','Creative Style Syntax','Coded Style System'], correct: 1 },
        { type: 'fill', question: 'Set font size:', code: 'p { ___BLANK___: 16px; }', answer: 'font-size' },
        { type: 'mcq', question: 'Which CSS type is best practice?', options: ['Inline','Internal','External','All equal'], correct: 2 }
      ]
    },
    course2: {
      learn: [
        { bot: "The Box Model is fundamental to CSS layout. Every element is a box with four parts: content, padding, border, and margin." },
        { bot: "Imagine a framed picture:<br><strong>Content</strong>: the picture itself<br><strong>Padding</strong>: space between picture and frame<br><strong>Border</strong>: the frame<br><strong>Margin</strong>: space between frame and wall" },
        { bot: "Here's how it looks in CSS:<div class='code-example'><code>div {<br>  width: 200px;  /* content width */<br>  padding: 20px;  /* space inside */<br>  border: 2px solid black;  /* frame */<br>  margin: 10px;  /* space outside */<br>}</code></div>" },
        { bot: "Total width = content (200px) + padding (20px each side = 40px) + border (2px each side = 4px) = 244px. This surprises many beginners!" },
        { bot: "Use <code>box-sizing: border-box;</code> to make width include padding and border:<div class='code-example'><code>* {<br>  box-sizing: border-box;<br>}<br>/* Now width: 200px; means total width is 200px! */</code></div>" },
        { bot: "Padding creates space inside the element. Four ways to set it:<div class='code-example'><code>padding: 20px;  /* all sides */<br>padding: 10px 20px;  /* top/bottom, left/right */<br>padding: 10px 15px 20px 25px;  /* top, right, bottom, left */<br>padding-top: 10px;  /* single side */</code></div>" },
        { bot: "Margin creates space outside the element. Same syntax as padding:<div class='code-example'><code>margin: 20px;  /* all sides */<br>margin: 10px 20px;  /* vertical, horizontal */<br>margin-left: auto;  /* auto margins center elements */<br>margin-right: auto;</code></div>" },
        { bot: "Centering a block element horizontally:<div class='code-example'><code>.container {<br>  width: 800px;<br>  margin-left: auto;<br>  margin-right: auto;<br>  /* or shorthand: margin: 0 auto; */<br>}</code></div>" },
        { bot: "Borders have three properties: width, style, and color:<div class='code-example'><code>border: 2px solid red;  /* shorthand */<br>/* or */<br>border-width: 2px;<br>border-style: solid;  /* solid, dashed, dotted, etc. */<br>border-color: red;</code></div>" },
        { bot: "You can style individual sides:<div class='code-example'><code>border-top: 2px solid red;<br>border-right: 1px dashed blue;<br>border-bottom: 3px dotted green;<br>border-left: 2px solid black;</code></div>" },
        { bot: "Border radius creates rounded corners:<div class='code-example'><code>border-radius: 10px;  /* all corners */<br>border-radius: 50%;  /* perfect circle/oval */<br>border-radius: 10px 20px 30px 40px;  /* each corner */</code></div>" },
        { bot: "Display property changes how elements behave:<br><code>block</code>: full width, new line<br><code>inline</code>: flows with text<br><code>inline-block</code>: flows but accepts width/height<br><code>none</code>: completely hidden" },
        { bot: "Width and height:<div class='code-example'><code>width: 300px;<br>height: 200px;<br>max-width: 100%;  /* responsive! */<br>min-height: 400px;  /* minimum height */</code></div>" },
        { bot: "The box model is the foundation of CSS layouts. Master it and you can create any design!" },
        { bot: "Excellent work! Understanding the box model is a major milestone. Let's practice!" }
      ],
      exercises: [
        { type: 'fill', question: 'Set padding:', code: 'div { ___BLANK___: 10px; }', answer: 'padding' },
        { type: 'fill', question: 'Set margin:', code: 'div { ___BLANK___: 5px; }', answer: 'margin' },
        { type: 'mcq', question: 'Box model parts (inside to out):', options: ['margin, border, padding, content','content, padding, border, margin','border, padding, content, margin','padding, margin, border, content'], correct: 1 },
        { type: 'fill', question: 'Create rounded corners:', code: 'div { ___BLANK___: 10px; }', answer: 'border-radius' },
        { type: 'mcq', question: 'Which display makes element disappear?', options: ['hidden','invisible','none','remove'], correct: 2 }
      ]
    },
    course3: {
      learn: [
        { bot: "Let's explore colors, fonts, and text styling - the tools to make your designs beautiful and readable!" },
        { bot: "CSS offers multiple ways to specify colors:<br><strong>Names</strong>: <code>red</code>, <code>blue</code> (140 named colors)<br><strong>Hex</strong>: <code>#ff0000</code> (red)<br><strong>RGB</strong>: <code>rgb(255, 0, 0)</code><br><strong>RGBA</strong>: <code>rgba(255, 0, 0, 0.5)</code> (with opacity)<br><strong>HSL</strong>: <code>hsl(0, 100%, 50%)</code>" },
        { bot: "Hex colors use 6 characters: first 2 are red, middle 2 are green, last 2 are blue. <code>#ff0000</code> is maximum red, no green or blue." },
        { bot: "RGBA and HSLA add an alpha channel for transparency (0 = invisible, 1 = opaque):<div class='code-example'><code>.overlay {<br>  background-color: rgba(0, 0, 0, 0.5);  /* semi-transparent black */<br>}</code></div>" },
        { bot: "Font properties control typography:<div class='code-example'><code>p {<br>  font-family: Arial, sans-serif;  /* fallback fonts */<br>  font-size: 16px;<br>  font-weight: bold;  /* or 100-900 */<br>  font-style: italic;<br>  line-height: 1.5;  /* spacing between lines */<br>}</code></div>" },
        { bot: "<code>font-family</code> lists multiple fonts as fallbacks. If the first isn't available, use the second, etc. Always end with a generic family (serif, sans-serif, monospace)." },
        { bot: "Web safe fonts work on all systems: Arial, Helvetica, Times New Roman, Courier, Verdana, Georgia. Or use Google Fonts for thousands of options!" },
        { bot: "Text properties:<div class='code-example'><code>text-align: center;  /* left, right, center, justify */<br>text-decoration: underline;  /* line through text */<br>text-transform: uppercase;  /* UPPERCASE, lowercase, capitalize */<br>letter-spacing: 2px;  /* space between letters */<br>word-spacing: 5px;  /* space between words */</code></div>" },
        { bot: "Text shadows add depth:<div class='code-example'><code>h1 {<br>  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);<br>  /* x-offset y-offset blur color */<br>}</code></div>" },
        { bot: "Box shadows work similarly:<div class='code-example'><code>.card {<br>  box-shadow: 0 4px 6px rgba(0,0,0,0.1);<br>  /* x y blur spread color */<br>}</code></div>" },
        { bot: "Multiple shadows can be combined:<div class='code-example'><code>.fancy {<br>  box-shadow: <br>    0 2px 4px rgba(0,0,0,0.1),<br>    0 4px 8px rgba(0,0,0,0.1),<br>    0 8px 16px rgba(0,0,0,0.1);<br>}</code></div>" },
        { bot: "Opacity affects the entire element (including children):<div class='code-example'><code>.faded {<br>  opacity: 0.5;  /* 0 to 1 */<br>}</code></div>" },
        { bot: "CSS units for font sizes:<br><code>px</code>: fixed pixels<br><code>em</code>: relative to parent font size<br><code>rem</code>: relative to root (html) font size<br><code>%</code>: percentage of parent<br><code>vw</code>: viewport width (1vw = 1% of screen width)" },
        { bot: "Using <code>rem</code> for font sizes makes your site accessible - users can adjust their browser's font size and your site scales beautifully!" },
        { bot: "Color theory basics: use complementary colors for contrast, analogous colors for harmony. Check color contrast for accessibility (WCAG guidelines)." },
        { bot: "Great job! You now have the skills to create visually appealing, readable websites. Let's practice!" }
      ],
      exercises: [
        { type: 'fill', question: 'Set text color:', code: 'h2 { ___BLANK___: blue; }', answer: 'color' },
        { type: 'fill', question: 'Set font family:', code: 'p { ___BLANK___: Arial; }', answer: 'font-family' },
        { type: 'mcq', question: 'Which unit is viewport-relative?', options: ['px','em','vh','pt'], correct: 2 },
        { type: 'fill', question: 'Center-align text:', code: 'p { ___BLANK___: center; }', answer: 'text-align' },
        { type: 'mcq', question: 'RGBA alpha value range:', options: ['0-100','0-255','0-1','1-10'], correct: 2 }
      ]
    },
    course4: {
      learn: [
        { bot: "Flexbox and Grid are modern layout systems that make creating complex layouts incredibly easy!" },
        { bot: "Before Flexbox and Grid, layouts required floats, tables, or positioning hacks. Those days are over!" },
        { bot: "<strong>Flexbox</strong> is for one-dimensional layouts (rows or columns). Enable it on a container:<div class='code-example'><code>.container {<br>  display: flex;<br>}</code></div>" },
        { bot: "Flex direction controls the main axis:<div class='code-example'><code>.container {<br>  display: flex;<br>  flex-direction: row;  /* default: left to right */<br>  /* or column, row-reverse, column-reverse */<br>}</code></div>" },
        { bot: "Justify content aligns items on the main axis:<div class='code-example'><code>.container {<br>  display: flex;<br>  justify-content: center;  /* center items */<br>  /* or flex-start, flex-end, space-between, space-around, space-evenly */<br>}</code></div>" },
        { bot: "Align items controls cross-axis alignment:<div class='code-example'><code>.container {<br>  display: flex;<br>  align-items: center;  /* vertical center if row */<br>  /* or flex-start, flex-end, stretch, baseline */<br>}</code></div>" },
        { bot: "Flex items can grow, shrink, and have a basis size:<div class='code-example'><code>.item {<br>  flex-grow: 1;  /* take available space */<br>  flex-shrink: 1;  /* shrink if needed */<br>  flex-basis: 200px;  /* starting size */<br>  /* shorthand: flex: 1 1 200px; */<br>}</code></div>" },
        { bot: "Common flexbox pattern - three equal columns:<div class='code-example'><code>.container {<br>  display: flex;<br>}<br>.item {<br>  flex: 1;  /* each takes equal space */<br>}</code></div>" },
        { bot: "<strong>CSS Grid</strong> is for two-dimensional layouts (rows AND columns). It's incredibly powerful:<div class='code-example'><code>.container {<br>  display: grid;<br>  grid-template-columns: 200px 200px 200px;  /* 3 columns */<br>  grid-template-rows: 100px 100px;  /* 2 rows */<br>  gap: 20px;  /* space between items */<br>}</code></div>" },
        { bot: "Use <code>fr</code> units for flexible tracks:<div class='code-example'><code>.container {<br>  display: grid;<br>  grid-template-columns: 1fr 2fr 1fr;  /* middle column is 2x bigger */<br>}</code></div>" },
        { bot: "Repeat function makes grids easier:<div class='code-example'><code>.container {<br>  display: grid;<br>  grid-template-columns: repeat(3, 1fr);  /* 3 equal columns */<br>  /* same as: 1fr 1fr 1fr */<br>}</code></div>" },
        { bot: "Auto-fit and minmax create responsive grids without media queries:<div class='code-example'><code>.container {<br>  display: grid;<br>  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));<br>  /* columns adjust to screen size! */<br>}</code></div>" },
        { bot: "Grid items can span multiple rows/columns:<div class='code-example'><code>.item {<br>  grid-column: span 2;  /* takes 2 columns */<br>  grid-row: span 3;  /* takes 3 rows */<br>}</code></div>" },
        { bot: "Grid template areas give visual structure:<div class='code-example'><code>.container {<br>  display: grid;<br>  grid-template-areas:<br>    'header header header'<br>    'sidebar main main'<br>    'footer footer footer';<br>}<br>.header { grid-area: header; }</code></div>" },
        { bot: "When to use what:<br><strong>Flexbox</strong>: navigation bars, card layouts, centering<br><strong>Grid</strong>: page layouts, complex grids, magazine-style designs<br><strong>Both</strong>: can be combined!" },
        { bot: "Modern CSS makes layouts that were once impossible now trivial. These tools are game-changers!" },
        { bot: "Outstanding work! You now have professional-level layout skills. Let's practice!" }
      ],
      exercises: [
        { type: 'fill', question: 'Enable flexbox:', code: 'div { display: ___BLANK___; }', answer: 'flex' },
        { type: 'fill', question: 'Center items on main axis:', code: 'div { ___BLANK___: center; }', answer: 'justify-content' },
        { type: 'mcq', question: 'Flexbox is for:', options: ['2D layouts','1D layouts','no layouts','tables'], correct: 1 },
        { type: 'fill', question: 'Enable grid:', code: 'div { display: ___BLANK___; }', answer: 'grid' },
        { type: 'mcq', question: 'Which creates flexible grid columns?', options: ['px','%','fr','em'], correct: 2 }
      ]
    },
    course5: {
      learn: [
        { bot: "Responsive design makes websites look great on all devices - phones, tablets, and desktops. Let's master it!" },
        { bot: "The key tool is <strong>media queries</strong> - CSS that only applies at certain screen sizes:<div class='code-example'><code>/* Default styles for all screens */<br>body { font-size: 16px; }<br><br>/* Only on screens 600px or smaller */<br>@media (max-width: 600px) {<br>  body { font-size: 14px; }<br>}</code></div>" },
        { bot: "Common breakpoints (but adjust to your content!):<br>Mobile: up to 600px<br>Tablet: 601px to 768px<br>Desktop: 769px and up<br>Large desktop: 1200px and up" },
        { bot: "Mobile-first approach: write mobile styles first, then add media queries for larger screens:<div class='code-example'><code>/* Mobile styles (default) */<br>.container { width: 100%; }<br><br>/* Tablet and up */<br>@media (min-width: 768px) {<br>  .container { width: 750px; }<br>}</code></div>" },
        { bot: "This is better because smaller screens load less CSS by default." },
        { bot: "The viewport meta tag is essential in your HTML <code>&lt;head&gt;</code>:<div class='code-example'><code>&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;</code></div>Without this, mobile browsers zoom out to show the full desktop site!" },
        { bot: "Flexible units make designs fluid:<br><code>%</code>: percentage of parent<br><code>vw/vh</code>: viewport width/height<br><code>rem</code>: scales with root font size<br>Avoid fixed <code>px</code> for layouts!" },
        { bot: "Images should be responsive too:<div class='code-example'><code>img {<br>  max-width: 100%;  /* never overflow container */<br>  height: auto;  /* maintain aspect ratio */<br>}</code></div>" },
        { bot: "Hide/show elements at different sizes:<div class='code-example'><code>.mobile-only { display: block; }<br>.desktop-only { display: none; }<br><br>@media (min-width: 768px) {<br>  .mobile-only { display: none; }<br>  .desktop-only { display: block; }<br>}</code></div>" },
        { bot: "Responsive typography using <code>clamp()</code>:<div class='code-example'><code>h1 {<br>  font-size: clamp(1.5rem, 5vw, 3rem);<br>  /* min: 1.5rem, preferred: 5vw, max: 3rem */<br>}</code></div>" },
        { bot: "Test on real devices when possible, but browser DevTools have excellent mobile simulators. Test early and often!" },
        { bot: "Common responsive patterns:<br><strong>Mostly Fluid</strong>: content reflows at breakpoints<br><strong>Column Drop</strong>: columns stack on mobile<br><strong>Layout Shifter</strong>: major layout changes<br><strong>Off Canvas</strong>: hidden navigation drawer" },
        { bot: "Flexbox and Grid are naturally responsive - they adapt to container size. Combine them with media queries for powerful responsive designs!" },
        { bot: "Remember: responsive isn't just about screen size. Consider touch vs mouse, slow connections, and different capabilities." },
        { bot: "Print stylesheets are responsive design too:<div class='code-example'><code>@media print {<br>  /* Styles for printing */<br>  nav, footer { display: none; }<br>  body { color: black; }<br>}</code></div>" },
        { bot: "Performance matters on mobile: optimize images, minimize CSS, reduce animations. Slow sites lose users!" },
        { bot: "Fantastic work! You now know how to create websites that work beautifully everywhere. This is essential modern web development!" }
      ],
      exercises: [
        { type: 'fill', question: 'Media query for max-width:', code: '@media (___BLANK___: 600px) {}', answer: 'max-width' },
        { type: 'fill', question: 'Responsive image:', code: 'img { ___BLANK___: 100%; }', answer: 'max-width' },
        { type: 'mcq', question: 'Mobile-first means:', options: ['Design for mobile only','Mobile styles first, then larger','Desktop first','No desktop support'], correct: 1 },
        { type: 'fill', question: 'Hide element on mobile:', code: '.item { ___BLANK___: none; }', answer: 'display' },
        { type: 'mcq', question: 'Which unit is viewport-relative?', options: ['px','em','vw','pt'], correct: 2 }
      ]
    }
  },

  react: {
    course1: {
      learn: [
        { bot: "Welcome to React! It's a JavaScript library for building user interfaces, created by Facebook and used by millions of developers." },
        { bot: "React changed how we build web apps. Instead of manipulating the DOM directly, you describe what the UI should look like, and React handles the updates efficiently." },
        { bot: "Everything in React is a <strong>component</strong>. Think of components as custom HTML elements you create:<div class='code-example'><code>function Welcome() {<br>  return &lt;h1&gt;Hello, React!&lt;/h1&gt;;<br>}</code></div>" },
        { bot: "This looks like HTML inside JavaScript - it's called <strong>JSX</strong> (JavaScript XML). JSX makes React code readable and intuitive." },
        { bot: "JSX rules:<br>1. Use <code>className</code> instead of <code>class</code><br>2. Close all tags, even self-closing ones: <code>&lt;img /&gt;</code><br>3. Return one parent element<br>4. JavaScript expressions go in <code>{curly braces}</code>" },
        { bot: "Example of JavaScript in JSX:<div class='code-example'><code>function Greeting() {<br>  const name = 'Alice';<br>  const age = 25;<br>  return (<br>    &lt;div&gt;<br>      &lt;h1&gt;Hello, {name}!&lt;/h1&gt;<br>      &lt;p&gt;You are {age} years old&lt;/p&gt;<br>    &lt;/div&gt;<br>  );<br>}</code></div>" },
        { bot: "Components can be <strong>functional</strong> (modern, recommended) or <strong>class-based</strong> (older style). We'll focus on functional components." },
        { bot: "Components can use other components:<div class='code-example'><code>function App() {<br>  return (<br>    &lt;div&gt;<br>      &lt;Header /&gt;<br>      &lt;MainContent /&gt;<br>      &lt;Footer /&gt;<br>    &lt;/div&gt;<br>  );<br>}</code></div>" },
        { bot: "This is called <strong>composition</strong> - building complex UIs from simple, reusable pieces. It's React's superpower!" },
        { bot: "React uses a <strong>Virtual DOM</strong> - a lightweight copy of the real DOM. When things change, React:<br>1. Updates the Virtual DOM<br>2. Compares it to the previous version<br>3. Only updates what changed in the real DOM<br>This makes React incredibly fast!" },
        { bot: "Creating a React app traditionally uses Create React App:<div class='code-example'><code>npx create-react-app my-app<br>cd my-app<br>npm start</code></div>But modern tools like Vite are faster!" },
        { bot: "Every React app has a root element where React renders:<div class='code-example'><code>// index.js<br>import ReactDOM from 'react-dom/client';<br>import App from './App';<br><br>const root = ReactDOM.createRoot(document.getElementById('root'));<br>root.render(&lt;App /&gt;);</code></div>" },
        { bot: "Component naming: always start with a capital letter! <code>&lt;myComponent /&gt;</code> won't work, but <code>&lt;MyComponent /&gt;</code> will." },
        { bot: "React's philosophy: break your UI into components, make them reusable, and compose them together. Think Lego blocks!" },
        { bot: "You're starting an exciting journey! React is used by Facebook, Instagram, Netflix, Airbnb, and countless others. Let's practice!" }
      ],
      exercises: [
        { type: 'fill', question: 'Define a functional component:', code: '___BLANK___ App() { return &lt;h1&gt;Hi&lt;/h1&gt;; }', answer: 'function' },
        { type: 'fill', question: 'Return JSX:', code: 'function Comp() { ___BLANK___ &lt;div&gt;&lt;/div&gt;; }', answer: 'return' },
        { type: 'mcq', question: 'React uses:', options: ['Real DOM','Virtual DOM','Shadow DOM','No DOM'], correct: 1 },
        { type: 'fill', question: 'In JSX, use className instead of:', code: '___BLANK___', answer: 'class' },
        { type: 'mcq', question: 'JSX is:', options: ['HTML','JavaScript','JavaScript with HTML-like syntax','CSS'], correct: 2 }
      ]
    },
    course2: {
      learn: [
        { bot: "Props (properties) let you pass data from parent to child components. They make components flexible and reusable!" },
        { bot: "Think of props like function arguments - you pass values in when you use the component:<div class='code-example'><code>function Greeting(props) {<br>  return &lt;h1&gt;Hello, {props.name}!&lt;/h1&gt;;<br>}<br><br>// Usage:<br>&lt;Greeting name=\"Alice\" /&gt;</code></div>" },
        { bot: "You can pass any JavaScript value as props: strings, numbers, booleans, arrays, objects, even functions!" },
        { bot: "Multiple props:<div class='code-example'><code>function UserCard(props) {<br>  return (<br>    &lt;div&gt;<br>      &lt;h2&gt;{props.name}&lt;/h2&gt;<br>      &lt;p&gt;Age: {props.age}&lt;/p&gt;<br>      &lt;p&gt;City: {props.city}&lt;/p&gt;<br>    &lt;/div&gt;<br>  );<br>}<br><br>&lt;UserCard name=\"Alice\" age={25} city=\"Paris\" /&gt;</code></div>" },
        { bot: "Notice: strings use quotes, but numbers and other values use <code>{curly braces}</code>. The braces mean \"this is JavaScript\"." },
        { bot: "Destructuring makes props cleaner:<div class='code-example'><code>// Instead of props.name, props.age...<br>function UserCard({ name, age, city }) {<br>  return (<br>    &lt;div&gt;<br>      &lt;h2&gt;{name}&lt;/h2&gt;<br>      &lt;p&gt;Age: {age}&lt;/p&gt;<br>      &lt;p&gt;City: {city}&lt;/p&gt;<br>    &lt;/div&gt;<br>  );<br>}</code></div>" },
        { bot: "Props are <strong>read-only</strong>! You can't change them inside the component. This is a fundamental React rule:<div class='code-example'><code>function Component(props) {<br>  //  NEVER do this:<br>  // props.name = 'Bob';<br>  <br>  //  Just use them:<br>  return &lt;div&gt;{props.name}&lt;/div&gt;;<br>}</code></div>" },
        { bot: "Default props give fallback values:<div class='code-example'><code>function Greeting({ name = 'friend' }) {<br>  return &lt;h1&gt;Hello, {name}!&lt;/h1&gt;;<br>}<br><br>&lt;Greeting /&gt;  // Hello, friend!<br>&lt;Greeting name=\"Alice\" /&gt;  // Hello, Alice!</code></div>" },
        { bot: "You can pass functions as props (very common for event handlers):<div class='code-example'><code>function Button({ onClick, label }) {<br>  return &lt;button onClick={onClick}&gt;{label}&lt;/button&gt;;<br>}<br><br>// Usage:<br>&lt;Button onClick={() => alert('Clicked!')} label=\"Click me\" /&gt;</code></div>" },
        { bot: "Props can be components too!<div class='code-example'><code>function Card({ header, content }) {<br>  return (<br>    &lt;div className=\"card\"&gt;<br>      {header}<br>      {content}<br>    &lt;/div&gt;<br>  );<br>}<br><br>&lt;Card <br>  header={&lt;h2&gt;Title&lt;/h2&gt;}<br>  content={&lt;p&gt;Description&lt;/p&gt;}<br>/&gt;</code></div>" },
        { bot: "The special <code>children</code> prop contains everything between component tags:<div class='code-example'><code>function Container({ children }) {<br>  return &lt;div className=\"container\"&gt;{children}&lt;/div&gt;;<br>}<br><br>&lt;Container&gt;<br>  &lt;h1&gt;Title&lt;/h1&gt;<br>  &lt;p&gt;Content&lt;/p&gt;<br>&lt;/Container&gt;</code></div>" },
        { bot: "Props flow down (parent to child), never up. This is called <strong>one-way data flow</strong>, and it makes apps predictable and debuggable." },
        { bot: "To send data up, pass a function down and call it from the child:<div class='code-example'><code>function Parent() {<br>  const handleClick = (data) => console.log(data);<br>  return &lt;Child onSave={handleClick} /&gt;;<br>}<br><br>function Child({ onSave }) {<br>  return &lt;button onClick={() => onSave('data')}&gt;Save&lt;/button&gt;;<br>}</code></div>" },
        { bot: "Props make components reusable. Write once, use everywhere with different data. This is the foundation of component-based architecture!" },
        { bot: "Excellent progress! Props are how React components communicate. Master them and you can build anything!" }
      ],
      exercises: [
        { type: 'fill', question: 'Pass prop to component:', code: '&lt;Child ___BLANK___=\"Alice\" /&gt;', answer: 'name' },
        { type: 'fill', question: 'Access prop in component:', code: 'function Child(props) { return &lt;h1&gt;{___BLANK___}&lt;/h1&gt;; }', answer: 'props.name' },
        { type: 'mcq', question: 'Props are:', options: ['mutable','read-only','global','undefined'], correct: 1 },
        { type: 'fill', question: 'Destructure props:', code: 'function Card({ ___BLANK___ }) { return &lt;h1&gt;{title}&lt;/h1&gt;; }', answer: 'title' },
        { type: 'mcq', question: 'Data flows:', options: ['up','down','both','randomly'], correct: 1 }
      ]
    },
    course3: {
      learn: [
        { bot: "State is data that changes over time in your component. Unlike props, you can modify state, and React re-renders when it changes!" },
        { bot: "The <code>useState</code> hook adds state to functional components:<div class='code-example'><code>import { useState } from 'react';<br><br>function Counter() {<br>  const [count, setCount] = useState(0);<br>  return &lt;div&gt;{count}&lt;/div&gt;;<br>}</code></div>" },
        { bot: "Let's break down <code>useState(0)</code>:<br>- Returns an array with two items<br>- First item: current state value<br>- Second item: function to update it<br>- Argument: initial state value (0)" },
        { bot: "We use array destructuring to name them:<div class='code-example'><code>const [count, setCount] = useState(0);<br>// count: the value (starts at 0)<br>// setCount: function to change it</code></div>" },
        { bot: "Updating state triggers a re-render:<div class='code-example'><code>function Counter() {<br>  const [count, setCount] = useState(0);<br>  <br>  return (<br>    &lt;div&gt;<br>      &lt;p&gt;Count: {count}&lt;/p&gt;<br>      &lt;button onClick={() => setCount(count + 1)}&gt;<br>        Increment<br>      &lt;/button&gt;<br>    &lt;/div&gt;<br>  );<br>}</code></div>" },
        { bot: "Important: <strong>Never modify state directly!</strong> Always use the setter function:<div class='code-example'><code>//  WRONG:<br>count = count + 1;<br>count++;<br><br>//  CORRECT:<br>setCount(count + 1);</code></div>" },
        { bot: "State can be any type: numbers, strings, booleans, arrays, objects:<div class='code-example'><code>const [name, setName] = useState('Alice');<br>const [isLoggedIn, setIsLoggedIn] = useState(false);<br>const [items, setItems] = useState([]);<br>const [user, setUser] = useState({ name: '', age: 0 });</code></div>" },
        { bot: "Multiple state variables in one component:<div class='code-example'><code>function Form() {<br>  const [name, setName] = useState('');<br>  const [email, setEmail] = useState('');<br>  const [age, setAge] = useState(0);<br>  // ... use them<br>}</code></div>" },
        { bot: "Updating arrays - create a new array:<div class='code-example'><code>const [items, setItems] = useState(['apple']);<br><br>// Add item:<br>setItems([...items, 'banana']);<br><br>// Remove item:<br>setItems(items.filter(item => item !== 'apple'));</code></div>" },
        { bot: "Updating objects - create a new object:<div class='code-example'><code>const [user, setUser] = useState({ name: 'Alice', age: 25 });<br><br>// Update one property:<br>setUser({ ...user, age: 26 });<br>// The ...user spreads existing properties</code></div>" },
        { bot: "State updates are asynchronous! The new value isn't immediately available:<div class='code-example'><code>setCount(count + 1);<br>console.log(count);  // Still shows old value!<br>// Use useEffect to respond to state changes</code></div>" },
        { bot: "Functional updates for complex logic:<div class='code-example'><code>setCount(prevCount => prevCount + 1);<br>// prevCount is guaranteed to be the latest value</code></div>" },
        { bot: "State is local to each component instance. If you render the same component twice, each has independent state!" },
        { bot: "When state changes, React re-renders the component and all its children. This is React's reactivity - the UI automatically stays in sync with data!" },
        { bot: "State vs Props:<br><strong>Props</strong>: passed from parent, read-only<br><strong>State</strong>: owned by component, can change<br>Both trigger re-renders when changed!" },
        { bot: "Fantastic work! State is what makes React apps interactive and dynamic. You're now building real applications!" }
      ],
      exercises: [
        { type: 'fill', question: 'Import useState:', code: 'import { ___BLANK___ } from \"react\";', answer: 'useState' },
        { type: 'fill', question: 'Declare state:', code: 'const [count, ___BLANK___] = useState(0);', answer: 'setCount' },
        { type: 'mcq', question: 'State updates cause:', options: ['nothing','re-render','error','page reload'], correct: 1 },
        { type: 'fill', question: 'Initial state value:', code: 'useState(___BLANK___);', answer: '0' },
        { type: 'mcq', question: 'useState returns:', options: ['a value','a function','an array','an object'], correct: 2 }
      ]
    },
    course4: {
      learn: [
        { bot: "Events in React are similar to DOM events, but with some differences. React uses synthetic events that work consistently across browsers." },
        { bot: "Event handlers in React use camelCase names: <code>onClick</code>, <code>onChange</code>, <code>onSubmit</code>, etc.:<div class='code-example'><code>function Button() {<br>  const handleClick = () => {<br>    alert('Clicked!');<br>  };<br>  <br>  return &lt;button onClick={handleClick}&gt;Click&lt;/button&gt;;<br>}</code></div>" },
        { bot: "You can use inline arrow functions, but extracting handlers is often cleaner:<div class='code-example'><code>// Inline (OK for simple cases):<br>&lt;button onClick={() => alert('Hi')}&gt;Click&lt;/button&gt;<br><br>// Named function (better for complex logic):<br>&lt;button onClick={handleClick}&gt;Click&lt;/button&gt;</code></div>" },
        { bot: "Event handlers receive an event object with information about what happened:<div class='code-example'><code>function handleClick(event) {<br>  console.log(event.target);  // Element clicked<br>  console.log(event.type);    // 'click'<br>  event.preventDefault();     // Prevent default behavior<br>}</code></div>" },
        { bot: "Common events:<br><code>onClick</code> - button/element clicks<br><code>onChange</code> - input value changes<br><code>onSubmit</code> - form submission<br><code>onMouseEnter/onMouseLeave</code> - hover<br><code>onKeyDown/onKeyUp</code> - keyboard<br><code>onFocus/onBlur</code> - focus changes" },
        { bot: "Handling input changes with state:<div class='code-example'><code>function Input() {<br>  const [value, setValue] = useState('');<br>  <br>  return (<br>    &lt;input <br>      value={value}<br>      onChange={(e) => setValue(e.target.value)}<br>    /&gt;<br>  );<br>}</code></div>" },
        { bot: "This pattern is called a <strong>controlled component</strong> - React controls the input value through state. The input displays what's in state." },
        { bot: "Forms in React:<div class='code-example'><code>function LoginForm() {<br>  const [email, setEmail] = useState('');<br>  const [password, setPassword] = useState('');<br>  <br>  const handleSubmit = (e) => {<br>    e.preventDefault();  // Don't reload page!<br>    console.log({ email, password });<br>  };<br>  <br>  return (<br>    &lt;form onSubmit={handleSubmit}&gt;<br>      &lt;input <br>        value={email}<br>        onChange={(e) => setEmail(e.target.value)}<br>      /&gt;<br>      &lt;button type=\"submit\"&gt;Login&lt;/button&gt;<br>    &lt;/form&gt;<br>  );<br>}</code></div>" },
        { bot: "Passing arguments to event handlers:<div class='code-example'><code>function TodoList() {<br>  const handleDelete = (id) => {<br>    console.log('Deleting', id);<br>  };<br>  <br>  return (<br>    &lt;button onClick={() => handleDelete(5)}&gt;<br>      Delete<br>    &lt;/button&gt;<br>  );<br>}</code></div>" },
        { bot: "The arrow function <code>() => handleDelete(5)</code> is important! Without it, the function would run immediately when rendering, not when clicked." },
        { bot: "Conditional rendering based on state:<div class='code-example'><code>function Toggle() {<br>  const [isOn, setIsOn] = useState(false);<br>  <br>  return (<br>    &lt;div&gt;<br>      &lt;button onClick={() => setIsOn(!isOn)}&gt;<br>        {isOn ? 'ON' : 'OFF'}<br>      &lt;/button&gt;<br>    &lt;/div&gt;<br>  );<br>}</code></div>" },
        { bot: "Event propagation: events bubble up from child to parent. Stop it with <code>stopPropagation()</code>:<div class='code-example'><code>function handleClick(e) {<br>  e.stopPropagation();<br>  // Parent's handler won't trigger<br>}</code></div>" },
        { bot: "Common pattern: updating state based on current state in event handlers:<div class='code-example'><code>const handleIncrement = () => {<br>  setCount(prevCount => prevCount + 1);<br>};</code></div>" },
        { bot: "Event handlers + state = interactivity! This combination powers all user interactions in React apps." },
        { bot: "You're building dynamic, interactive applications! Events and state work together to create responsive UIs that feel alive!" }
      ],
      exercises: [
        { type: 'fill', question: 'Add click handler:', code: '&lt;button ___BLANK___={handleClick}&gt;Click&lt;/button&gt;', answer: 'onClick' },
        { type: 'fill', question: 'Update state in handler:', code: 'const handleClick = () => { ___BLANK___(count + 1); }', answer: 'setCount' },
        { type: 'mcq', question: 'React events use:', options: ['lowercase','camelCase','UPPERCASE','snake_case'], correct: 1 },
        { type: 'fill', question: 'Get input value:', code: 'onChange={(e) => setValue(e.___BLANK___.value)}', answer: 'target' },
        { type: 'mcq', question: 'Prevent form submission:', options: ['stopSubmit()','preventDefault()','cancel()','halt()'], correct: 1 }
      ]
    },
    course5: {
      learn: [
        { bot: "Conditional rendering shows different UI based on conditions - like if statements for your components!" },
        { bot: "The simplest way uses regular JavaScript if/else:<div class='code-example'><code>function Greeting({ isLoggedIn }) {<br>  if (isLoggedIn) {<br>    return &lt;h1&gt;Welcome back!&lt;/h1&gt;;<br>  } else {<br>    return &lt;h1&gt;Please log in&lt;/h1&gt;;<br>  }<br>}</code></div>" },
        { bot: "Ternary operator for inline conditions:<div class='code-example'><code>function Status({ isActive }) {<br>  return (<br>    &lt;div&gt;<br>      Status: {isActive ? 'Active' : 'Inactive'}<br>    &lt;/div&gt;<br>  );<br>}</code></div>" },
        { bot: "Ternary operators can render entire components:<div class='code-example'><code>function App({ user }) {<br>  return (<br>    &lt;div&gt;<br>      {user ? &lt;Dashboard /&gt; : &lt;LoginPage /&gt;}<br>    &lt;/div&gt;<br>  );<br>}</code></div>" },
        { bot: "Logical AND (<code>&&</code>) operator for simple conditions:<div class='code-example'><code>function Notifications({ count }) {<br>  return (<br>    &lt;div&gt;<br>      {count > 0 && &lt;Badge&gt;{count}&lt;/Badge&gt;}<br>    &lt;/div&gt;<br>  );<br>}</code></div>" },
        { bot: "How <code>&&</code> works: if the left side is true, render the right side. If false, render nothing. Perfect for optional UI!" },
        { bot: "Multiple conditions:<div class='code-example'><code>function UserStatus({ user }) {<br>  if (!user) return &lt;Login /&gt;;<br>  if (!user.verified) return &lt;VerifyEmail /&gt;;<br>  if (user.banned) return &lt;BannedMessage /&gt;;<br>  return &lt;Dashboard /&gt;;<br>}</code></div>" },
        { bot: "Switch statements for many conditions:<div class='code-example'><code>function StatusIcon({ status }) {<br>  switch(status) {<br>    case 'success': return &lt;CheckIcon /&gt;;<br>    case 'error': return &lt;ErrorIcon /&gt;;<br>    case 'loading': return &lt;Spinner /&gt;;<br>    default: return null;<br>  }<br>}</code></div>" },
        { bot: "Rendering lists with <code>map()</code>:<div class='code-example'><code>function TodoList({ todos }) {<br>  return (<br>    &lt;ul&gt;<br>      {todos.map(todo => (<br>        &lt;li key={todo.id}&gt;{todo.text}&lt;/li&gt;<br>      ))}<br>    &lt;/ul&gt;<br>  );<br>}</code></div>" },
        { bot: "The <code>key</code> prop is crucial for lists! It helps React identify which items changed. Use unique IDs, never array indexes for dynamic lists!" },
        { bot: "Filtering before rendering:<div class='code-example'><code>function ActiveTodos({ todos }) {<br>  const activeTodos = todos.filter(t => !t.completed);<br>  <br>  return (<br>    &lt;ul&gt;<br>      {activeTodos.map(todo => (<br>        &lt;li key={todo.id}&gt;{todo.text}&lt;/li&gt;<br>      ))}<br>    &lt;/ul&gt;<br>  );<br>}</code></div>" },
        { bot: "Conditional CSS classes:<div class='code-example'><code>function Button({ isPrimary }) {<br>  return (<br>    &lt;button className={isPrimary ? 'btn-primary' : 'btn-secondary'}&gt;<br>      Click<br>    &lt;/button&gt;<br>  );<br>}</code></div>" },
        { bot: "Multiple conditional classes:<div class='code-example'><code>function Card({ isActive, isHovered }) {<br>  const classes = `card ${isActive ? 'active' : ''} ${isHovered ? 'hovered' : ''}`;<br>  return &lt;div className={classes}&gt;...&lt;/div&gt;;<br>}</code></div>" },
        { bot: "Early returns keep code clean:<div class='code-example'><code>function UserProfile({ user }) {<br>  if (!user) return &lt;p&gt;Loading...&lt;/p&gt;;<br>  if (user.error) return &lt;p&gt;Error!&lt;/p&gt;;<br>  <br>  // Main content when everything is OK<br>  return &lt;div&gt;...profile...&lt;/div&gt;;<br>}</code></div>" },
        { bot: "React re-renders when state/props change. Conditional rendering means different UI for different states - this makes apps feel dynamic and responsive!" },
        { bot: "Outstanding! You now have complete control over what renders when. You can build complex, dynamic user interfaces!" }
      ],
      exercises: [
        { type: 'fill', question: 'Conditional render with ternary:', code: '{isLoggedIn ___BLANK___ &lt;Dashboard /&gt; : &lt;Login /&gt;}', answer: '?' },
        { type: 'fill', question: 'Render only if condition is true:', code: '{showMessage ___BLANK___ &lt;Message /&gt;}', answer: '&&' },
        { type: 'mcq', question: 'List items need a:', options: ['id','key','index','name'], correct: 1 },
        { type: 'fill', question: 'Map over array:', code: '{items.___BLANK___(item => &lt;div&gt;{item}&lt;/div&gt;)}', answer: 'map' },
        { type: 'mcq', question: 'Conditional rendering helps create:', options: ['static UI','dynamic UI','errors','slow apps'], correct: 1 }
      ]
    }
  }
};




        let currentLesson = null;
        let learnMessageIndex = 0;
        let learnCompleted = false;
        let selectedMCQ = {};
        let correctAnswers = 0;
        let isRetryMode = false;

        function switchAuthTab(tab) {
    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
    
    if (tab === 'login') {
        document.querySelectorAll('.auth-tab')[0].classList.add('active');
    } else {
        document.querySelectorAll('.auth-tab')[1].classList.add('active');
    }
    
    document.getElementById(tab + 'Form').classList.add('active');
    
    document.getElementById('loginMessage').innerHTML = '';
    document.getElementById('signupMessage').innerHTML = '';
}

        function handleSignup(e) {
    e.preventDefault();
    
    const name = document.getElementById('signupName').value.trim();
    const email = document.getElementById('signupEmail').value.trim().toLowerCase();
    const password = document.getElementById('signupPassword').value;
    const btn = document.getElementById('signupBtn');
    
    const existingUser = localStorage.getItem('user_' + email);
    if (existingUser) {
        showAuthMessage('signupMessage', 'Account already exists! Please login.', 'error');
        return;
    }
    
    btn.disabled = true;
    btn.textContent = 'Signing up...';
    
    setTimeout(() => {
        const userData = {
            name: name,
            email: email,
            password: password,
            createdAt: new Date().toISOString()
        };
        
        localStorage.setItem('user_' + email, JSON.stringify(userData));
        
        showAuthMessage('signupMessage', 'Account created successfully! Logging you in...', 'success');
        btn.disabled = false;
        btn.textContent = 'Create Account';
        
        document.getElementById('signupForm').reset();
        
        setTimeout(() => {
            document.getElementById('loginEmail').value = email;
            switchAuthTab('login');
        }, 1500);
    }, 1000);
}

        function handleLogin(e) {
    e.preventDefault();
    
    const email = document.getElementById('loginEmail').value.trim().toLowerCase();
    const password = document.getElementById('loginPassword').value;
    const btn = document.getElementById('loginBtn');
    
    const userDataStr = localStorage.getItem('user_' + email);
    
    if (!userDataStr) {
        showAuthMessage('loginMessage', 'Account doesn\'t exist. Please sign up!', 'error');
        return;
    }
    
    const userData = JSON.parse(userDataStr);
    
    if (userData.password !== password) {
        showAuthMessage('loginMessage', 'Incorrect password. Try again!', 'error');
        return;
    }
    
    btn.disabled = true;
    btn.textContent = 'Logging in...';
    
    setTimeout(() => {
        localStorage.setItem('currentUser', email);
        currentUser = email;
        initializeApp();
    }, 1000);
}

        function showAuthMessage(elementId, message, type) {
            const msgEl = document.getElementById(elementId);
            msgEl.innerHTML = `<div class="auth-message ${type}">${message}</div>`;
        }

        function initializeApp() {
    document.getElementById('authScreen').style.display = 'none';
    
    const savedProgress = localStorage.getItem('progress_' + currentUser);
    if (savedProgress) {
        const loadedProgress = JSON.parse(savedProgress);
        
        Object.keys(userProgress).forEach(lang => {
            Object.keys(userProgress[lang]).forEach(courseId => {
                if (loadedProgress[lang] && loadedProgress[lang][courseId]) {
                    userProgress[lang][courseId] = loadedProgress[lang][courseId];
                }
            });
        });
        
        localStorage.setItem('progress_' + currentUser, JSON.stringify(userProgress));
    }
    
    const savedTime = localStorage.getItem('studyTime_' + currentUser);
    if (savedTime) {
        totalStudyTime = parseInt(savedTime);
    }
    
    const userData = JSON.parse(localStorage.getItem('user_' + currentUser));
    if (userData) {
        const firstName = userData.name.split(' ')[0];
        document.getElementById('userName').textContent = firstName;
        document.getElementById('userEmail').textContent = userData.email;
        document.getElementById('userAvatar').textContent = firstName.charAt(0).toUpperCase();
    }
    
    renderCourses();
    updateDashboard();
    
    // Check for updates - will show splash for new users after 0.3s
    checkForUpdates();
}

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('currentUser');
                location.reload();
            }
        }

        function checkAuth() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = savedUser;
                initializeApp();
            } else {
                document.getElementById('authScreen').style.display = 'flex';
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            checkAuth();
        });

        document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        const searchContainer = document.getElementById('searchContainer');
        if (searchContainer.classList.contains('active')) {
            toggleSearch();
        }
        if (document.getElementById('mobileSearchContainer').classList.contains('active')) {
            closeMobileSearch();
        }
        if (document.getElementById('updateSplash').classList.contains('active')) {
            closeUpdateSplash();
        }
    }
});

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const toggle = document.getElementById('themeToggle');
            toggle.classList.toggle('active');
        }

        function toggleSearch() {
            const container = document.getElementById('navContainer');
            const tabs = document.getElementById('navTabs');
            const searchContainer = document.getElementById('searchContainer');
            const searchInput = document.getElementById('searchInput');
            
            if (container.classList.contains('search-active')) {
                container.classList.remove('search-active');
                setTimeout(() => {
                    tabs.style.display = 'flex';
                    searchContainer.classList.remove('active');
                }, 200);
                document.getElementById('searchResults').classList.remove('active');
                searchInput.value = '';
            } else {
                container.classList.add('search-active');
                tabs.style.display = 'none';
                setTimeout(() => {
                    searchContainer.classList.add('active');
                    searchInput.focus();
                }, 100);
            }
        }

        function toggleMobileSearch() {
            document.getElementById('mobileSearchOverlay').classList.add('active');
            document.getElementById('mobileSearchContainer').classList.add('active');
            setTimeout(() => {
                document.getElementById('mobileSearchInput').focus();
            }, 400);
        }

        function closeMobileSearch() {
            document.getElementById('mobileSearchOverlay').classList.remove('active');
            document.getElementById('mobileSearchContainer').classList.remove('active');
            document.getElementById('mobileSearchInput').value = '';
            document.getElementById('mobileSearchResults').innerHTML = '';
        }

        function handleSearch() {
    const query = document.getElementById('searchInput').value.toLowerCase();
    const results = document.getElementById('searchResults');
    
    if (!query) {
        results.classList.remove('active');
        return;
    }
    
    const matches = [];
    Object.keys(courses).forEach(lang => {
        courses[lang].forEach((course, index) => {
            if (course.title.toLowerCase().includes(query) || 
                course.desc.toLowerCase().includes(query) ||
                lang.includes(query)) {
                
                const isLocked = index > 0 && !userProgress[lang]['course' + index]?.completed;
                const isCompleted = userProgress[lang][course.id]?.completed;
                
                matches.push({
                    lang,
                    course,
                    langName: lang.charAt(0).toUpperCase() + lang.slice(1),
                    isLocked,
                    isCompleted,
                    index
                });
            }
        });
    });
    
    if (matches.length > 0) {
        results.innerHTML = matches.map(m => {
            let statusBadge = '';
            let clickable = !m.isLocked;
            
            if (m.isCompleted) {
                statusBadge = '<span style="color: #00ff00; margin-left: 8px;"> Completed</span>';
            } else if (m.isLocked) {
                statusBadge = '<span style="color: #ff6b6b; margin-left: 8px;"> Locked</span>';
            } else {
                statusBadge = '<span style="color: #64ffda; margin-left: 8px;"> Available</span>';
            }
            
            const onClick = clickable 
                ? `onclick="openCourseFromSearch('${m.lang}', '${m.course.id}', '${m.course.title}')"` 
                : `style="opacity: 0.5; cursor: not-allowed;"`;
            
            return `
                <div class="search-result-item" ${onClick}>
                    <div class="search-result-title">${m.course.icon} ${m.course.title}${statusBadge}</div>
                    <div class="search-result-desc">${m.langName}  ${m.course.desc}</div>
                </div>
            `;
        }).join('');
        results.classList.add('active');
    } else {
        results.innerHTML = '<div class="search-result-item">No courses found</div>';
        results.classList.add('active');
    }
}

        function handleMobileSearch() {
    const query = document.getElementById('mobileSearchInput').value.toLowerCase();
    const results = document.getElementById('mobileSearchResults');
    
    if (!query) {
        results.innerHTML = '';
        return;
    }
    
    const matches = [];
    Object.keys(courses).forEach(lang => {
        courses[lang].forEach((course, index) => {
            if (course.title.toLowerCase().includes(query) || 
                course.desc.toLowerCase().includes(query) ||
                lang.includes(query)) {
                
                const isLocked = index > 0 && !userProgress[lang]['course' + index]?.completed;
                const isCompleted = userProgress[lang][course.id]?.completed;
                
                matches.push({
                    lang,
                    course,
                    langName: lang.charAt(0).toUpperCase() + lang.slice(1),
                    isLocked,
                    isCompleted,
                    index
                });
            }
        });
    });
    
    if (matches.length > 0) {
        results.innerHTML = matches.map(m => {
            let statusBadge = '';
            let clickable = !m.isLocked;
            
            if (m.isCompleted) {
                statusBadge = '<span style="color: #00ff00; margin-left: 8px;"> Completed</span>';
            } else if (m.isLocked) {
                statusBadge = '<span style="color: #ff6b6b; margin-left: 8px;"> Locked</span>';
            } else {
                statusBadge = '<span style="color: #64ffda; margin-left: 8px;"> Available</span>';
            }
            
            const onClick = clickable 
                ? `onclick="openCourseFromSearch('${m.lang}', '${m.course.id}', '${m.course.title}'); closeMobileSearch();"` 
                : `style="opacity: 0.5; cursor: not-allowed;"`;
            
            return `
                <div class="search-result-item" ${onClick}>
                    <div class="search-result-title">${m.course.icon} ${m.course.title}${statusBadge}</div>
                    <div class="search-result-desc">${m.langName}  ${m.course.desc}</div>
                </div>
            `;
        }).join('');
    } else {
        results.innerHTML = '<div class="search-result-item">No courses found</div>';
    }
}

        function openCourseFromSearch(lang, courseId, courseName) {
    // Find the course index
    const courseIndex = courses[lang].findIndex(c => c.id === courseId);
    
    // Check if locked
    const isLocked = courseIndex > 0 && !userProgress[lang]['course' + courseIndex]?.completed;
    
    if (isLocked) {
        alert(' This course is locked! Complete the previous course to unlock it.');
        return;
    }
    
    toggleSearch();
    showSection('learn');
    switchLanguage(lang);
    
    const isCompleted = userProgress[lang][courseId]?.completed;
    
    if (isCompleted) {
        showRetryModal(lang, courseId, courseName);
    } else {
        openLesson(lang, courseId, courseName);
    }
}

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            
            const activeTab = Array.from(document.querySelectorAll('.nav-tab')).find(
                tab => tab.textContent.toLowerCase().includes(sectionId === 'home' ? 'overview' : sectionId)
            );
            if (activeTab) activeTab.classList.add('active');
            
            if (sectionId === 'home') {
                updateDashboard();
            }
        }

        function showSectionMobile(sectionId, element) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.mobile-nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            element.classList.add('active');
            
            if (sectionId === 'home') {
                updateDashboard();
            }
        }

        function switchLanguage(lang) {
            document.querySelectorAll('.language-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.language-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(lang + '-content').classList.add('active');
        }

        function switchChart(type) {
            document.querySelectorAll('.chart-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.chart-container').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(type + 'Chart').classList.add('active');
            updateCharts();
        }

        function renderCourses() {
            Object.keys(courses).forEach(lang => {
                const container = document.getElementById(lang + '-courses');
                container.innerHTML = '';
                
                courses[lang].forEach((course, index) => {
                    const isLocked = index > 0 && !userProgress[lang]['course' + index]?.completed;
                    const isCompleted = userProgress[lang][course.id]?.completed;
                    const progress = userProgress[lang][course.id]?.progress || 0;
                    
                    const card = document.createElement('div');
                    card.className = 'course-card' + (isLocked ? ' locked' : '');
                    card.innerHTML = `
                        ${isLocked ? '<div class="lock-overlay"> Complete previous</div>' : ''}
                        ${isCompleted ? '<div class="completed-badge"> Completed</div>' : ''}
                        <div class="course-header">
                            <div style="font-size: 2.5em; margin-bottom: 10px;">${course.icon}</div>
                            <div class="course-title">${course.title}</div>
                            <div class="course-desc">${course.desc}</div>
                        </div>
                        <div class="course-progress-bar">
                            <div class="course-progress-header">
                                <span class="course-progress-name">Progress</span>
                                <span class="course-progress-percent">${progress}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                        </div>
                    `;
                    
                    if (!isLocked) {
                        card.onclick = () => {
                            if (isCompleted) {
                                showRetryModal(lang, course.id, course.title);
                            } else {
                                openLesson(lang, course.id, course.title);
                            }
                        };
                    }
                    
                    container.appendChild(card);
                });
            });
        }

        function showRetryModal(language, courseId, courseName) {
            pendingLesson = { language, courseId, courseName };
            document.getElementById('retryModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('retryModal').classList.remove('active');
            pendingLesson = null;
        }

        function retryLesson() {
    if (!pendingLesson) return;
    isRetryMode = true;
    const { language, courseId, courseName } = pendingLesson;
    closeModal();
    
    // Small delay to ensure modal closes before opening lesson
    setTimeout(() => {
        openLesson(language, courseId, courseName);
    }, 300);
}
        function openLesson(language, courseId, courseName) {
            currentLesson = { language, courseId, courseName };
            learnCompleted = false;
            learnMessageIndex = 0;
            correctAnswers = 0;
            selectedMCQ = {};
            
            studyStartTime = Date.now();
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
            
            document.getElementById('lessonTitle').textContent = courseName;
            document.getElementById('lessonView').classList.add('active');
            document.getElementById('learnMessages').innerHTML = '';
            document.getElementById('questionMessages').innerHTML = '';
            
            document.getElementById('questionsTabBtn').disabled = true;
            document.getElementById('questionsTabBtn').innerHTML = 'Questions ';
            
            switchPanel('learn');
            updateLessonProgress();
            displayNextLearnMessage();
        }

        function closeLesson() {
            if (studyStartTime && currentLesson && !isRetryMode) {
                const sessionTime = Math.floor((Date.now() - studyStartTime) / 1000);
                userProgress[currentLesson.language][currentLesson.courseId].time += sessionTime;
                totalStudyTime += sessionTime;
                
                localStorage.setItem('progress_' + currentUser, JSON.stringify(userProgress));
                localStorage.setItem('studyTime_' + currentUser, totalStudyTime.toString());
            }
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            studyStartTime = null;
            isRetryMode = false;
            
            document.getElementById('lessonView').classList.remove('active');
            currentLesson = null;
            renderCourses();
            updateDashboard();
        }

        function updateTimer() {
            if (!studyStartTime) return;
            const elapsed = Math.floor((Date.now() - studyStartTime) / 1000) + totalStudyTime;
            const hours = Math.floor(elapsed / 3600);
            const minutes = Math.floor((elapsed % 3600) / 60);
            document.getElementById('totalTime').textContent = `${hours}h ${minutes}m`;
        }

        function switchPanel(panel) {
            if (panel === 'questions' && !learnCompleted) return;
            
            document.querySelectorAll('.tab-switch-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.content-panel').forEach(p => p.classList.remove('active'));
            
            if (panel === 'learn') {
                document.getElementById('learnTabBtn').classList.add('active');
                document.getElementById('learnPanel').classList.add('active');
            } else {
                document.getElementById('questionsTabBtn').classList.add('active');
                document.getElementById('questionsPanel').classList.add('active');
                if (document.getElementById('questionMessages').children.length === 0) {
                    displayQuestions();
                }
            }
        }

        function displayNextLearnMessage() {
    // Safety checks
    if (!currentLesson || !currentLesson.language || !currentLesson.courseId) {
        console.warn('currentLesson is not properly set:', currentLesson);
        return;
    }

    const content = lessonContent[currentLesson.language]?.[currentLesson.courseId];
    if (!content) {
        console.warn('Lesson content not found for:', currentLesson);
        return;
    }

    const learnMessages = document.getElementById('learnMessages');
    if (!learnMessages) {
        console.warn('Element with id "learnMessages" not found in the DOM.');
        return;
    }

    // Check if there are still messages to display
    if (learnMessageIndex >= content.learn.length) {
        learnCompleted = true;
        const questionsBtn = document.getElementById('questionsTabBtn');
        if (questionsBtn) {
            questionsBtn.disabled = false;
            questionsBtn.innerHTML = 'Questions ';
        }

        const unlockMsg = document.createElement('div');
        unlockMsg.className = 'message';
        unlockMsg.innerHTML = `
            <div class="message-avatar"></div>
            <div class="message-bubble">
                 Learning complete! Switch to <strong>Questions</strong> tab to test yourself!
            </div>
        `;
        learnMessages.appendChild(unlockMsg);
        learnMessages.scrollTop = learnMessages.scrollHeight;
        return;
    }

    // Show typing indicator
    const typingDiv = document.createElement('div');
    typingDiv.className = 'message';
    typingDiv.innerHTML = `
        <div class="message-avatar"></div>
        <div class="message-bubble">
            <div class="typing-indicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
        </div>
    `;
    learnMessages.appendChild(typingDiv);
    learnMessages.scrollTop = learnMessages.scrollHeight;

    setTimeout(() => {
        typingDiv.remove();

        const msg = content.learn[learnMessageIndex];
        if (!msg || !msg.bot) {
            console.warn('Message content missing at index', learnMessageIndex);
            learnMessageIndex++;
            return;
        }

        const messageDiv = document.createElement('div');
        messageDiv.className = 'message';
        messageDiv.innerHTML = `
            <div class="message-avatar"></div>
            <div class="message-bubble">${msg.bot}</div>
        `;
        learnMessages.appendChild(messageDiv);
        learnMessages.scrollTop = learnMessages.scrollHeight;

        learnMessageIndex++;
        updateLessonProgress();

        // Display next message after delay
        if (learnMessageIndex < content.learn.length) {
            setTimeout(displayNextLearnMessage, 900);
        } else {
            learnCompleted = true;
            const questionsBtn = document.getElementById('questionsTabBtn');
            if (questionsBtn) {
                questionsBtn.disabled = false;
                questionsBtn.innerHTML = 'Questions ';
            }

            const unlockMsg = document.createElement('div');
            unlockMsg.className = 'message';
            unlockMsg.innerHTML = `
                <div class="message-avatar"></div>
                <div class="message-bubble">
                     Learning complete! Switch to <strong>Questions</strong> tab to test yourself!
                </div>
            `;
            learnMessages.appendChild(unlockMsg);
            learnMessages.scrollTop = learnMessages.scrollHeight;
        }
    }, 600);
}


        function updateLessonProgress() {
            const content = lessonContent[currentLesson.language]?.[currentLesson.courseId];
            if (!content) return;
            
            const totalSteps = content.learn.length + content.exercises.length;
            const completedSteps = learnMessageIndex + correctAnswers;
            const progress = Math.round((completedSteps / totalSteps) * 100);
            
            document.getElementById('lessonProgressText').textContent = `${progress}% Complete`;
            
            if (!isRetryMode) {
                userProgress[currentLesson.language][currentLesson.courseId].progress = progress;
                localStorage.setItem('progress_' + currentUser, JSON.stringify(userProgress));
            }
        }

        function displayQuestions() {
            const content = lessonContent[currentLesson.language]?.[currentLesson.courseId];
            if (!content) return;
            
            const questionMessages = document.getElementById('questionMessages');
            
            const welcomeDiv = document.createElement('div');
            welcomeDiv.className = 'message';
            welcomeDiv.innerHTML = `
                <div class="message-avatar"></div>
                <div class="message-bubble"> Test your knowledge!</div>
            `;
            questionMessages.appendChild(welcomeDiv);
            
            content.exercises.forEach((exercise, index) => {
                const exerciseDiv = document.createElement('div');
                exerciseDiv.className = 'message';
                
                if (exercise.type === 'fill') {
                    const codeWithBlanks = exercise.code.replace(/___BLANK___/g, 
                        `<span class="code-blank-wrapper"><input type="text" class="code-blank" data-index="${index}" placeholder="____"></span>`);
                    
                    exerciseDiv.innerHTML = `
                        <div class="message-avatar"></div>
                        <div class="message-bubble">
                            <div class="exercise-box">
                                <div class="exercise-title"> ${exercise.question}</div>
                                <div class="code-fill">${codeWithBlanks}</div>
                                <button class="submit-button" onclick="checkFillAnswer(${index}, '${exercise.answer}')">Check</button>
                                <div id="feedback-${index}"></div>
                            </div>
                        </div>
                    `;
                } else if (exercise.type === 'mcq') {
                    let optionsHTML = exercise.options.map((opt, i) => 
                        `<div class="mcq-option" onclick="selectOption(this, ${index}, ${i})">${opt}</div>`
                    ).join('');
                    
                    exerciseDiv.innerHTML = `
                        <div class="message-avatar"></div>
                        <div class="message-bubble">
                            <div class="exercise-box">
                                <div class="exercise-title"> ${exercise.question}</div>
                                <div class="mcq-options" data-correct="${exercise.correct}" data-exercise="${index}">
                                    ${optionsHTML}
                                </div>
                                <button class="submit-button" onclick="checkMCQAnswer(${index})">Check</button>
                                <div id="feedback-${index}"></div>
                            </div>
                        </div>
                    `;
                }
                
                questionMessages.appendChild(exerciseDiv);
            });
        }

        function selectOption(element, exerciseIndex, optionIndex) {
            element.parentElement.querySelectorAll('.mcq-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            selectedMCQ[exerciseIndex] = optionIndex;
        }

        function checkMCQAnswer(exerciseIndex) {
    const content = lessonContent[currentLesson.language][currentLesson.courseId];
    const exercise = content.exercises[exerciseIndex];
    const selected = selectedMCQ[exerciseIndex];
    const feedbackDiv = document.getElementById('feedback-' + exerciseIndex);
    const optionsContainer = document.querySelector(`.mcq-options[data-exercise="${exerciseIndex}"]`);
    const options = optionsContainer.querySelectorAll('.mcq-option');
    const submitBtn = optionsContainer.closest('.exercise-box').querySelector('.submit-button');
    
    if (selected === undefined) {
        feedbackDiv.innerHTML = '<div class="feedback incorrect">Select an answer!</div>';
        return;
    }
    
    if (selected === exercise.correct) {
        options[selected].classList.add('correct');
        // Disable all options
        options.forEach(opt => {
            opt.style.pointerEvents = 'none';
            opt.style.cursor = 'not-allowed';
            opt.style.opacity = '0.7';
        });
        submitBtn.disabled = true;
        submitBtn.style.opacity = '0.5';
        submitBtn.style.cursor = 'not-allowed';
        feedbackDiv.innerHTML = '<div class="feedback correct"> Correct!</div>';
        correctAnswers++;
        updateLessonProgress();
        checkCompletion();
    } else {
        options[selected].classList.add('incorrect');
        options[exercise.correct].classList.add('correct');
        feedbackDiv.innerHTML = '<div class="feedback incorrect"> Try again!</div>';
        // Allow retry - clear after delay
        setTimeout(() => {
            options[selected].classList.remove('incorrect', 'selected');
            options[exercise.correct].classList.remove('correct');
            selectedMCQ[exerciseIndex] = undefined;
        }, 1500);
    }
}

        function checkFillAnswer(exerciseIndex, correctAnswer) {
    const blank = document.querySelector(`.code-blank[data-index="${exerciseIndex}"]`);
    const wrapper = blank.parentElement;
    const userAnswer = blank.value.trim();
    const feedbackDiv = document.getElementById('feedback-' + exerciseIndex);
    const submitBtn = wrapper.closest('.exercise-box').querySelector('.submit-button');
    
    if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
        wrapper.classList.remove('incorrect');
        wrapper.classList.add('correct');
        blank.disabled = true; // Lock the input
        blank.style.cursor = 'not-allowed';
        submitBtn.disabled = true;
        submitBtn.style.opacity = '0.5';
        submitBtn.style.cursor = 'not-allowed';
        feedbackDiv.innerHTML = '<div class="feedback correct"> Correct!</div>';
        correctAnswers++;
        updateLessonProgress();
        checkCompletion();
    } else {
        wrapper.classList.remove('correct');
        wrapper.classList.add('incorrect');
        feedbackDiv.innerHTML = '<div class="feedback incorrect"> Wrong! Answer: ' + correctAnswer + '</div>';
        setTimeout(() => {
            wrapper.classList.remove('incorrect');
            blank.value = ''; // Clear for retry
        }, 500);
    }
}

        function checkCompletion() {
            const content = lessonContent[currentLesson.language][currentLesson.courseId];
            if (correctAnswers >= content.exercises.length) {
                const questionMessages = document.getElementById('questionMessages');
                
                const completeMsg = document.createElement('div');
                completeMsg.className = 'message';
                completeMsg.innerHTML = `
                    <div class="message-avatar"></div>
                    <div class="message-bubble">
                         Excellent work! You've mastered this lesson!
                        <button class="next-button" onclick="completeLesson()">Finish Lesson</button>
                    </div>
                `;
                questionMessages.appendChild(completeMsg);
                questionMessages.scrollTop = questionMessages.scrollHeight;
            }
        }

        function completeLesson() {
    if (!isRetryMode) {
        userProgress[currentLesson.language][currentLesson.courseId].completed = true;
        userProgress[currentLesson.language][currentLesson.courseId].progress = 100;
        
        localStorage.setItem('progress_' + currentUser, JSON.stringify(userProgress));
        
        // Update last activity
        const today = new Date().toDateString();
        localStorage.setItem('lastActivity_' + currentUser, today);
        
        // Close lesson view first
        document.getElementById('lessonView').classList.remove('active');
        currentLesson = null;
        
        // Navigate to overview
        showSection('home');
        
        // Wait for section to appear, then show streak animation
        setTimeout(() => {
            showStreakCelebration(currentStreak);
        }, 300);
    } else {
        closeLesson();
    }
}

function showStreakCelebration(streakNumber) {
    const celebration = document.getElementById('streakCelebration');
    const card = celebration.querySelector('.streak-card-animated');
    const numberContainer = card.querySelector('.streak-number-container');
    
    // Get the position of the streak stat card
    const statCards = document.querySelectorAll('.stat-card');
    let streakCard = null;
    statCards.forEach(c => {
        if (c.textContent.includes('Day Streak')) {
            streakCard = c;
        }
    });
    
    if (!streakCard) return;
    
    // Hide the original card
    streakCard.classList.add('animating');
    
    const rect = streakCard.getBoundingClientRect();
    const oldStreak = streakNumber - 1;
    
    // Match exact dimensions
    const cardWidth = rect.width;
    const cardHeight = rect.height;
    card.style.width = cardWidth + 'px';
    card.style.height = cardHeight + 'px';
    
    // Set up number container
    numberContainer.innerHTML = `
        <div class="streak-number-big" style="transform: translateY(0); opacity: 1;">${oldStreak}</div>
    `;
    
    // Position card exactly at widget location
    card.style.left = (rect.left + rect.width / 2) + 'px';
    card.style.top = (rect.top + rect.height / 2) + 'px';
    card.style.transform = 'translate(-50%, -50%) scale(1)';
    card.style.opacity = '1';
    
    // Show celebration
    celebration.style.display = 'flex';
    celebration.classList.add('active');
    
    setTimeout(() => {
        celebration.classList.add('show-bg');
        
        // Fly to center with slight scale
        const centerX = window.innerWidth / 2;
        const centerY = window.innerHeight / 2;
        
        card.style.left = centerX + 'px';
        card.style.top = centerY + 'px';
        card.style.transform = 'translate(-50%, -50%) scale(1.15)';
        
        // Slide number after reaching center
        setTimeout(() => {
            numberContainer.innerHTML = `
                <div class="streak-number-big" style="transform: translateY(0); opacity: 0;">${oldStreak}</div>
                <div class="streak-number-big" style="transform: translateY(60px); opacity: 1;">${streakNumber}</div>
            `;
            
            setTimeout(() => {
                const numbers = numberContainer.querySelectorAll('.streak-number-big');
                numbers[0].style.transform = 'translateY(-60px)';
                numbers[0].style.opacity = '0';
                numbers[1].style.transform = 'translateY(0)';
                numbers[1].style.opacity = '1';
            }, 50);
        }, 800);
        
        // Return to widget position
        setTimeout(() => {
            card.style.left = (rect.left + rect.width / 2) + 'px';
            card.style.top = (rect.top + rect.height / 2) + 'px';
            card.style.transform = 'translate(-50%, -50%) scale(1)';
            celebration.classList.remove('show-bg');
            
            setTimeout(() => {
                card.style.opacity = '0';
                
                setTimeout(() => {
                    celebration.classList.remove('active');
                    celebration.style.display = 'none';
                    
                    // Show original card again
                    streakCard.classList.remove('animating');
                    
                    // Reset
                    card.style.left = '';
                    card.style.top = '';
                    card.style.transform = '';
                    card.style.opacity = '';
                    card.style.width = '';
                    card.style.height = '';
                    
                    updateDashboard();
                    renderCourses();
                }, 500);
            }, 800);
        }, 2500);
        
    }, 500);
}

        function updateDashboard() {
            let totalStarted = 0;
            let totalCompleted = 0;
            
            Object.keys(userProgress).forEach(lang => {
                Object.keys(userProgress[lang]).forEach(course => {
                    if (userProgress[lang][course].progress > 0) totalStarted++;
                    if (userProgress[lang][course].completed) totalCompleted++;
                });
            });
            
            document.getElementById('totalCourses').textContent = totalStarted;
            document.getElementById('completedLessons').textContent = totalCompleted;
            const currentStreak = parseInt(localStorage.getItem('streak_' + currentUser) || '0');
document.getElementById('streakDays').textContent = currentStreak;
            
            const hours = Math.floor(totalStudyTime / 3600);
            const minutes = Math.floor((totalStudyTime % 3600) / 60);
            document.getElementById('totalTime').textContent = `${hours}h ${minutes}m`;
            
            updateCharts();
        }

        function updateStreak() {
    // FOR PRODUCTION: This checks daily activity
    // FOR TESTING: We increment in completeLesson() instead
    const today = new Date().toDateString();
    const lastActivity = localStorage.getItem('lastActivity_' + currentUser);
    const currentStreak = parseInt(localStorage.getItem('streak_' + currentUser) || '0');
    
    if (lastActivity) {
        const lastDate = new Date(lastActivity);
        const todayDate = new Date(today);
        const diffTime = todayDate - lastDate;
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        
        if (diffDays === 0) {
            // Same day, keep streak
            return currentStreak;
        } else if (diffDays === 1) {
            // Next day, increment streak
            const newStreak = currentStreak + 1;
            localStorage.setItem('streak_' + currentUser, newStreak.toString());
            localStorage.setItem('lastActivity_' + currentUser, today);
            return newStreak;
        } else {
            // Missed days, show broken message and reset
            if (currentStreak > 0) {
                alert(' Streak Broken! You were on a ' + currentStreak + ' day streak. Start fresh!');
            }
            localStorage.setItem('streak_' + currentUser, '1');
            localStorage.setItem('lastActivity_' + currentUser, today);
            return 1;
        }
    } else {
        // First time
        localStorage.setItem('streak_' + currentUser, '1');
        localStorage.setItem('lastActivity_' + currentUser, today);
        return 1;
    }
}

        function updateCharts() {
    const allChart = document.getElementById('allBarChart');
    allChart.innerHTML = `
        <div class="chart-y-labels">
            <span>100%</span>
            <span>80%</span>
            <span>60%</span>
            <span>40%</span>
            <span>20%</span>
            <span>0%</span>
        </div>
    `;
    
    Object.keys(userProgress).forEach(lang => {
        const avgProgress = calculateAvgProgress(lang);
        const bar = createBarItem(lang.toUpperCase(), avgProgress);
        allChart.appendChild(bar);
    });
    
    Object.keys(userProgress).forEach(lang => {
        const chart = document.getElementById(lang + 'BarChart');
        chart.innerHTML = `
            <div class="chart-y-labels">
                <span>100%</span>
                <span>80%</span>
                <span>60%</span>
                <span>40%</span>
                <span>20%</span>
                <span>0%</span>
            </div>
        `;
        
        courses[lang].forEach(course => {
            const progress = userProgress[lang][course.id]?.progress || 0;
            const bar = createBarItem(course.title, progress);
            chart.appendChild(bar);
        });
    });
}

        function calculateAvgProgress(language) {
    const coursesList = Object.keys(userProgress[language]);
    const total = coursesList.reduce((sum, course) => {
        const progress = userProgress[language][course]?.progress || 0;
        return sum + progress;
    }, 0);
    return Math.round(total / coursesList.length);
}


        function createBarItem(label, progress) {
    const div = document.createElement('div');
    div.className = 'bar-item';
    
    // Height should be exact percentage of available space
    const heightPercent = Math.min(progress, 100);
    
    div.innerHTML = `
        <div class="bar" style="height: 0%" data-target="${heightPercent}">
            <div class="bar-value" data-target="${progress}">0%</div>
        </div>
        <div class="bar-label">${label}</div>
    `;
    
    // Animate after adding to DOM
    setTimeout(() => {
        const bar = div.querySelector('.bar');
        const valueEl = div.querySelector('.bar-value');
        bar.style.height = heightPercent + '%';
        
        // Animate number counting
        let current = 0;
        const increment = Math.max(1, Math.ceil(progress / 30));
        const interval = setInterval(() => {
            current += increment;
            if (current >= progress) {
                current = progress;
                clearInterval(interval);
            }
            valueEl.textContent = current + '%';
        }, 30);
    }, 100);
    
    return div;
}

        function runCode() {
            const code = document.getElementById('codeEditor').value;
            const outputFrame = document.getElementById('outputFrame');
            const consoleOutput = document.getElementById('consoleOutput');
            
            consoleOutput.style.display = 'none';
            consoleOutput.textContent = '';
            
            const html = `
                <!DOCTYPE html>
                <html>
                <head>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                    </style>
                </head>
                <body>
                    <script>
                        console.log = function(...args) {
                            parent.postMessage({ type: 'log', data: args.join(' ') }, '*');
                        };
                        console.error = function(...args) {
                            parent.postMessage({ type: 'error', data: args.join(' ') }, '*');
                        };
                        
                        try {
                            ${code}
                        } catch(e) {
                            parent.postMessage({ type: 'error', data: e.message }, '*');
                        }
                    <\/script>
                </body>
                </html>
            `;
            
            outputFrame.srcdoc = html;
        }

        window.addEventListener('message', (e) => {
            if (e.data.type === 'log' || e.data.type === 'error') {
                const consoleOutput = document.getElementById('consoleOutput');
                consoleOutput.style.display = 'block';
                consoleOutput.textContent += (e.data.type === 'error' ? ' ' : ' ') + e.data.data + '\n';
            }
        });

        function toggleSetting(element) {
            element.classList.toggle('active');
        }

        function resetProgress() {
            if (confirm('Are you sure? This will delete all your progress!')) {
                Object.keys(userProgress).forEach(lang => {
                    Object.keys(userProgress[lang]).forEach(course => {
                        userProgress[lang][course] = { completed: false, progress: 0, time: 0 };
                    });
                });
                totalStudyTime = 0;
                
                localStorage.setItem('progress_' + currentUser, JSON.stringify(userProgress));
                localStorage.setItem('studyTime_' + currentUser, '0');
                
                renderCourses();
                updateDashboard();
                alert(' Progress reset successfully!');
            }
        }

        // Clear cache function
function clearCache() {
    if (confirm('Clear temporary cache data?')) {
        alert(' Cache cleared successfully!');
    }
}

function checkForUpdates() {
    const currentVersion = '3.1';
    const lastSeenVersion = localStorage.getItem('lastSeenVersion_' + currentUser);
    const isNewUser = !localStorage.getItem('isReturningUser_' + currentUser);
    
    if (isNewUser) {
        localStorage.setItem('isReturningUser_' + currentUser, 'true');
        setTimeout(() => {
            document.getElementById('splashTitle').textContent = 'Recently Released';
            document.getElementById('updateSplash').classList.add('active');
            document.body.classList.add('splash-open');
        }, 300);
    } else if (lastSeenVersion !== currentVersion) {
        setTimeout(() => {
            document.getElementById('splashTitle').textContent = 'New Version';
            document.getElementById('updateSplash').classList.add('active');
            document.body.classList.add('splash-open');
        }, 1000);
    }
}

function closeUpdateSplash() {
    const currentVersion = '3.1';
    localStorage.setItem('lastSeenVersion_' + currentUser, currentVersion);
    document.getElementById('updateSplash').classList.remove('active');
    document.body.classList.remove('splash-open');
}

function showPreviewExplanation() {
    const preview = document.getElementById('previewExplanation');
    preview.classList.add('show');
    
    setTimeout(() => {
        preview.classList.remove('show');
    }, 2500);
}

function highlightKeywords(text) {
    const keywords = [
        'print()', 'variable', 'function', 'loop', 'if', 'else', 'array', 'object',
        'const', 'let', 'var', 'return', 'import', 'export', 'class', 'component',
        'props', 'state', 'useState', 'useEffect', 'JSX', 'HTML', 'CSS', 'JavaScript',
        'Python', 'React', 'DOM', 'API', 'string', 'number', 'boolean', 'null',
        'undefined', 'addEventListener', 'querySelector', 'flex', 'grid', 'margin',
        'padding', 'border', 'def', 'for', 'while', 'list', 'dictionary', 'tuple',
        'append', 'modules', 'scope'
    ];
    
    let highlightedText = text;
    
    keywords.forEach(keyword => {
        // Don't replace if it's already inside a tag or code block
        const parts = highlightedText.split(/(<[^>]+>)/);
        highlightedText = parts.map((part, index) => {
            if (index % 2 === 0) {
                const regex = new RegExp(`\\b(${keyword.replace(/[()]/g, '\\$&')})\\b`, 'gi');
                return part.replace(regex, match => {
                    return `<span class="keyword-highlight" onclick="showAIExplanation('${match}')">${match}</span>`;
                });
            }
            return part;
        }).join('');
    });
    
    return highlightedText;
}

async function showAIExplanation(keyword) {
    const modal = document.getElementById('aiExplanationModal');
    const keywordDisplay = document.getElementById('aiKeyword');
    const loading = document.getElementById('aiLoading');
    const explanationText = document.getElementById('aiExplanationText');
    
    keywordDisplay.textContent = keyword;
    loading.style.display = 'block';
    explanationText.style.display = 'none';
    explanationText.innerHTML = '';
    
    modal.classList.add('active');
    
    try {
        // Replace with your actual Mistral API key
        const API_KEY = 'wjdxdMsOGxCoogO8sAqsl4xipG6NKvo2';
        
        const response = await fetch('https://api.mistral.ai/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${API_KEY}`
            },
            body: JSON.stringify({
                model: 'mistral-tiny',
                messages: [
                    {
                        role: 'system',
                        content: 'You are a helpful programming tutor. Explain concepts clearly and concisely in 2-3 sentences for beginners.'
                    },
                    {
                        role: 'user',
                        content: `Explain the programming concept "${keyword}" in simple terms for a beginner learning to code.`
                    }
                ],
                max_tokens: 150,
                temperature: 0.7
            })
        });
        
        if (!response.ok) {
            throw new Error('API request failed');
        }
        
        const data = await response.json();
        const explanation = data.choices[0].message.content;
        
        loading.style.display = 'none';
        explanationText.style.display = 'block';
        explanationText.innerHTML = `<p>${explanation}</p>`;
        
    } catch (error) {
        console.error('Error fetching AI explanation:', error);
        
        // Fallback to local explanations if API fails
        const explanations = {
            'print()': 'The <code>print()</code> function displays output to the console or terminal. It\'s one of the most basic and essential functions for seeing what your code is doing.',
            'variable': 'A variable is a named container that stores data. Think of it as a labeled box where you can put information and retrieve it later using its name.',
            'function': 'A function is a reusable block of code that performs a specific task. Functions help organize code, avoid repetition, and make programs easier to understand and maintain.',
            'loop': 'A loop repeats a block of code multiple times. Common types include <code>for</code> loops (repeat a specific number of times) and <code>while</code> loops (repeat while a condition is true).',
            'array': 'An array is an ordered collection of items stored in a single variable. You can access items by their position (index), starting from 0.',
            'object': 'An object stores data as key-value pairs, like a dictionary. Each piece of data has a name (key) and a value associated with it.',
            'const': 'The <code>const</code> keyword declares a constant variable that cannot be reassigned. Once you set its value, it stays the same throughout your program.',
            'let': 'The <code>let</code> keyword declares a variable that can be changed (reassigned) later in your code. Use it for values that need to update.',
            'state': 'State is data that changes over time in your application. When state updates, the UI automatically re-renders to reflect the new data.',
            'props': 'Props (properties) are how you pass data from a parent component to a child component in React. They work like function parameters.',
            'JSX': 'JSX is a syntax extension that lets you write HTML-like code in JavaScript. React transforms JSX into JavaScript function calls.',
            'DOM': 'The DOM (Document Object Model) is a programming interface for web documents. It represents the page structure as a tree of objects that JavaScript can manipulate.'
        };
        
        const explanation = explanations[keyword.toLowerCase()] || 
            `<strong>${keyword}</strong> is an important programming concept. Understanding it will help you write better code.`;
        
        loading.style.display = 'none';
        explanationText.style.display = 'block';
        explanationText.innerHTML = `<p>${explanation}</p><p style="color: #8b949e; font-size: 0.9em; margin-top: 15px;"> AI explanation unavailable - showing fallback content</p>`;
    }
}

function closeAIExplanation(event) {
    if (event && event.target !== event.currentTarget) return;
    document.getElementById('aiExplanationModal').classList.remove('active');
}
    </script>
</body>
</html>