:root {
            /* Default theme colors (Green) */
            --theme-primary: #64ffda;
            --theme-primary-rgb: 100, 255, 218;
            --theme-secondary: rgba(100, 255, 218, 0.1);
            --theme-border: rgba(100, 255, 218, 0.3);
            --theme-shadow: rgba(100, 255, 218, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        button, a, .nav-tab, .card, .setting-card, .lesson-card,
.stat-card, .course-card, .roadmap-node, .theme-option {
    -webkit-font-smoothing: antialiased;
}

button, a, .nav-tab, .card, .lesson-card, .course-card,
.setting-card, .roadmap-node, .theme-option {
    transition: transform 0.2s ease;
}

        body {
    font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
    background: #000000;
    color: #e0e0e0;
    min-height: 100vh;
    overflow-x: hidden;
    transition: color 0.3s ease;
    padding-bottom: 80px;
    position: relative;
    /* Improve touch scrolling performance */
    -webkit-overflow-scrolling: touch;
    touch-action: manipulation;
}

body.light-mode {
    background: #f5f5f5;
    color: #1a1a1a;
}

/* FIX: Ensure html element also has proper background */
html {
    background: #000000;
    overflow-x: hidden;
}

html.light-mode {
    background: #f5f5f5;
}

/* Network Canvas - Hidden but kept for compatibility */
#networkCanvas {
    display: none;
}

/* AUTH SCREEN STYLES - FIXED */
.auth-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: #0a0a0a; /* Solid background instead of gradient on mobile */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.5s ease;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

body.light-mode .auth-screen {
    background: #f5f5f5;
}

        .auth-container {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 25px;
            padding: 50px;
            width: 450px;
            max-width: 90%;
            animation: slideUp 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        body.light-mode .auth-container {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(10, 122, 94, 0.3);
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 40px;
        }

        .auth-logo-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .auth-logo-text {
            font-size: 2.2em;
            color: #64ffda;
            font-weight: 700;
            text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .auth-logo-text {
            color: #0a7a5e;
        }

        .auth-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .auth-tab {
            flex: 1;
            padding: 12px;
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            color: #8b949e;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
        }

        .auth-tab.active {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            color: #64ffda;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #e0e0e0;
            font-weight: 600;
            font-size: 0.95em;
        }

        body.light-mode .form-label {
            color: #1a1a1a;
        }

        .form-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 15px;
            color: #e0e0e0;
            font-size: 1em;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
        }

        body.light-mode .form-input {
            background: rgba(10, 122, 94, 0.05);
            color: #1a1a1a;
        }

        .form-input:focus {
            border-color: #64ffda;
            background: rgba(100, 255, 218, 0.1);
        }

        .form-button {
            width: 100%;
            padding: 15px;
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .form-button:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .form-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .auth-message {
            margin-top: 15px;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            font-weight: 600;
            animation: fadeIn 0.3s ease;
        }

        .auth-message.error {
            background: rgba(255, 100, 100, 0.1);
            border: 1px solid rgba(255, 100, 100, 0.3);
            color: #ff6b6b;
        }

        .auth-message.success {
            background: rgba(100, 255, 100, 0.1);
            border: 1px solid rgba(100, 255, 100, 0.3);
            color: #00ff00;
        }

        /* NAVIGATION - DESKTOP */
        .nav-container {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            animation: slideDown 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            width: auto;
        }

        .nav-container.search-active {
            width: 500px;
        }

        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-50px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

            .nav-tabs {
    background: rgba(30, 30, 30, 0.95); /* Increase opacity instead */
    border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 8px;
            border-radius: 50px;
            display: flex;
            gap: 8px;
            box-shadow: 0 8px 32px rgba(100, 255, 218, 0.1);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        body.light-mode .nav-tabs {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(0, 0, 0, 0.1);
        }

        .nav-tab {
            padding: 12px 28px;
            border: none;
            background: transparent;
            color: #8b949e;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: color 0.15s ease, background 0.15s ease; /* was 0.3s */
}

        body.light-mode .nav-tab {
            color: #666;
        }

        .nav-tab:hover {
            color: var(--theme-primary);
            background: var(--theme-secondary);
        }

        .nav-tab.active {
            background: var(--theme-border);
            color: var(--theme-primary);
            box-shadow: 0 0 20px var(--theme-shadow);
        }

        /* TAB ICONS SCALE ANIMATION */
.nav-tab {
    animation: scaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) backwards;
}

.nav-tab:nth-child(1) { animation-delay: 0s; }
.nav-tab:nth-child(2) { animation-delay: 0.1s; }
.nav-tab:nth-child(3) { animation-delay: 0.15s; }
.nav-tab:nth-child(4) { animation-delay: 0.2s; }
.nav-tab:nth-child(5) { animation-delay: 0.25s; }

@keyframes scaleIn {
    0% {
        opacity: 0;
        transform: scale(0.3);
    }
    50% {
        transform: scale(1.1);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Apply animation when tabs reappear */
.nav-tabs.show-tabs .nav-tab {
    animation: scaleIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) backwards;
}

        .search-icon {
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: #8b949e;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-icon:hover {
            color: #64ffda;
            background: rgba(100, 255, 218, 0.05);
        }

        .search-icon svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        .search-input-container {
    display: none;
    position: relative;
    width: 100%;
    padding: 8px 20px;
    opacity: 0;
    transform: scale(0.95);
    transition: all 0.25s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    background: rgba(30, 30, 30, 0.98);
    backdrop-filter: blur(20px);
    border-radius: 50px;
}

body.light-mode .search-input-container {
    background: rgba(255, 255, 255, 0.98);
}

.search-input-container.active {
    display: block;
    opacity: 1;
    transform: scale(1);
}

        .search-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-input {
            width: 100%;
            background: rgba(100, 255, 218, 0.05);
            border: 2px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            font-size: 1em;
            font-weight: 600;
            outline: none;
            padding: 10px 40px 10px 15px;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        body.light-mode .search-input {
            color: #0a7a5e;
            background: rgba(10, 122, 94, 0.05);
            border-color: rgba(10, 122, 94, 0.3);
        }

        .search-input:focus {
            border-color: #64ffda;
            background: rgba(100, 255, 218, 0.1);
        }

        .search-input::placeholder {
            color: #8b949e;
        }

        .search-close-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(100, 255, 218, 0.1);
            border: none;
            color: #64ffda;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 1.2em;
            font-weight: 600;
        }

        .search-close-btn:hover {
            background: rgba(100, 255, 218, 0.2);
            transform: translateY(-50%) scale(1.1);
        }

        .search-results {
            position: absolute;
            top: calc(100% + 10px);
            left: 0;
            right: 0;
            background: rgba(30, 30, 30, 0.95);
            border: 2px solid rgba(100, 255, 218, 0.3);
            border-radius: 20px;
            backdrop-filter: blur(20px);
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transform: translateY(-10px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 10001;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1), max-height 0.4s ease-out;
        }

        body.light-mode .search-results {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(10, 122, 94, 0.3);
        }

        .search-results.active {
            max-height: 500px;
            opacity: 1;
            transform: translateY(0);
            overflow-y: auto;
        }

        .search-language-group {
            margin-bottom: 10px;
        }

        .search-language-header {
            padding: 12px 20px;
            background: rgba(100, 255, 218, 0.15);
            color: #64ffda;
            font-weight: 700;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid rgba(100, 255, 218, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        body.light-mode .search-language-header {
            background: rgba(10, 122, 94, 0.15);
            color: #0a7a5e;
            border-bottom-color: rgba(10, 122, 94, 0.3);
        }

        .search-ai-section {
            padding: 18px 28px;
            margin: 15px;
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.25), rgba(75, 0, 130, 0.25));
            border: 2px solid rgba(138, 43, 226, 0.4);
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(138, 43, 226, 0.2);
        }

        .search-ai-section:hover {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.35), rgba(75, 0, 130, 0.35));
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(138, 43, 226, 0.3);
        }

        .search-ai-section.selected {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.45), rgba(75, 0, 130, 0.45));
            box-shadow: 0 6px 25px rgba(138, 43, 226, 0.4), inset 0 0 20px rgba(138, 43, 226, 0.3);
            transform: scale(1.02);
        }

        .search-ai-icon {
            font-size: 1.3em;
        }

        .search-ai-text {
            flex: 1;
        }

        .search-ai-title {
            color: #da70d6;
            font-weight: 700;
            font-size: 0.95em;
            margin-bottom: 3px;
        }

        .search-ai-desc {
            color: #b19cd9;
            font-size: 0.8em;
        }

        .search-result-item {
            padding: 16px 24px;
            margin: 10px 15px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid rgba(100, 255, 218, 0.2);
            border-radius: 30px;
            opacity: 0;
            transform: translateX(-10px);
            animation: slideInSearch 0.3s ease forwards;
            background: rgba(100, 255, 218, 0.05);
        }

        @keyframes slideInSearch {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .search-result-item:hover {
            background: rgba(100, 255, 218, 0.15);
            transform: translateX(5px) scale(1.01);
            border-color: rgba(100, 255, 218, 0.4);
            box-shadow: 0 4px 15px rgba(100, 255, 218, 0.2);
        }

        .search-result-item.selected {
            background: rgba(100, 255, 218, 0.25);
            border: 2px solid #64ffda;
            box-shadow: 0 4px 20px rgba(100, 255, 218, 0.3);
            transform: scale(1.02);
        }

        body.light-mode .search-result-item.selected {
            background: rgba(10, 122, 94, 0.2);
            border-left-color: #0a7a5e;
        }

        .search-result-title {
            color: #64ffda;
            font-weight: 600;
            margin-bottom: 5px;
        }

        body.light-mode .search-result-title {
            color: #0a7a5e;
        }

        .search-result-desc {
            color: #8b949e;
            font-size: 0.85em;
        }

        /* MOBILE NAV - ALWAYS FIXED AT BOTTOM */
.mobile-nav {
    display: none;
    position: fixed;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100% - 30px);
    max-width: 420px;
    background: rgba(30, 30, 30, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(100, 255, 218, 0.2);
    padding: 10px 5px;
    z-index: 10000; /* Increased z-index */
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 
                0 0 0 1px rgba(100, 255, 218, 0.1);
    border-radius: 30px;
    transition: none; /* Remove transition to prevent movement */
}

body.light-mode .mobile-nav {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(10, 122, 94, 0.3);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15),
                0 0 0 1px rgba(10, 122, 94, 0.1);
}

@media (max-width: 768px) {
    .mobile-nav {
        display: block;
    }
    
    body {
        padding-bottom: 100px;
    }
}

.mobile-nav-items {
    display: flex;
    justify-content: space-around;
    align-items: center;
    gap: 5px;
}

.mobile-nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 10px 8px;
    color: #8b949e;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    border-radius: 18px;
    min-width: 60px;
    position: relative;
}

.mobile-nav-item::before {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(100, 255, 218, 0.1);
    border-radius: 18px;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.mobile-nav-item.active::before {
    opacity: 1;
    transform: scale(1);
}

.mobile-nav-item.active {
    color: #64ffda;
    transform: translateY(-3px);
}

body.light-mode .mobile-nav-item.active {
    color: #0a7a5e;
}

.mobile-nav-icon {
    font-size: 1.5em;
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    z-index: 1;
}

.mobile-nav-item.active .mobile-nav-icon {
    transform: scale(1.15);
}

.mobile-nav-label {
    font-size: 0.7em;
    font-weight: 600;
    position: relative;
    z-index: 1;
}

/* Ripple effect on tap */
.mobile-nav-item:active {
    transform: scale(0.95) translateY(-3px);
}
        .mobile-search-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 9999; /* Lower than mobile nav */
    animation: fadeIn 0.3s ease;
}

        .mobile-search-overlay.active {
            display: block;
        }

        .mobile-search-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(30, 30, 30, 0.98);
    backdrop-filter: blur(20px);
    padding: 20px;
    transform: translateY(-100%);
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 9999; /* Lower than mobile nav */
    border-bottom: 2px solid rgba(100, 255, 218, 0.2);
}

body.light-mode .mobile-search-container {
    background: rgba(255, 255, 255, 0.98);
}

.mobile-search-container.active {
    transform: translateY(0);
}

        .mobile-search-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .mobile-search-back {
            background: rgba(100, 255, 218, 0.1);
            border: none;
            color: #64ffda;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2em;
        }

        .mobile-search-input {
            flex: 1;
            background: rgba(100, 255, 218, 0.05);
            border: 2px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 1em;
            outline: none;
        }

        .mobile-search-results {
            max-height: calc(100vh - 140px);
            overflow-y: auto;
        }

        .main-content {
            padding-top: 100px;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* Settings section positioning fixed */
        #settings.section.active {
            margin-top: 0;
        }

        .section {
            display: none;
            animation: fadeIn 0.2s ease-out;
            position: relative;
            z-index: 1;
            transition: opacity 0.2s ease; /* ✅ ADD THIS LINE */
            will-change: opacity, transform;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(8px) translateZ(0);
            }
            to {
                opacity: 1;
                transform: translateY(0) translateZ(0);
            }
        }

        @keyframes iPhoneUnlock {
            0% {
                opacity: 0;
                transform: scale(0.98) translateY(12px) translateZ(0);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0) translateZ(0);
            }
        }

        .page-load-animate {
            animation: iPhoneUnlock 0.25s ease-out forwards;
            will-change: opacity, transform;
        }

        .page-load-animate > * {
            animation: iPhoneUnlock 0.2s ease-out forwards;
            will-change: opacity, transform;
        }

        .page-load-animate > *:nth-child(1) { animation-delay: 0.01s; }
        .page-load-animate > *:nth-child(2) { animation-delay: 0.02s; }
        .page-load-animate > *:nth-child(3) { animation-delay: 0.03s; }
        .page-load-animate > *:nth-child(4) { animation-delay: 0.04s; }
        .page-load-animate > *:nth-child(5) { animation-delay: 0.05s; }
        .page-load-animate > *:nth-child(6) { animation-delay: 0.06s; }
        .page-load-animate > *:nth-child(7) { animation-delay: 0.07s; }
        .page-load-animate > *:nth-child(8) { animation-delay: 0.08s; }

        .dashboard {
            max-width: 1600px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .dashboard-title {
            font-size: 3.5em;
            color: #64ffda;
            margin-bottom: 15px;
            text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .dashboard-title {
            color: #0a7a5e;
            text-shadow: 0 0 20px rgba(10, 122, 94, 0.2);
        }

        .dashboard-subtitle {
            font-size: 1.2em;
            color: #8b949e;
        }

        .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 25px;  /* Increase from 20px to 25px */
    margin-bottom: 0 !important;
}

        .stat-card {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            contain: layout style paint;
            opacity: 0;
            transform: translateY(30px) scale(0.9);
        }

        .stat-card.animate-in {
            animation: waveIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes waveIn {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        body.light-mode .stat-card {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .stat-card:hover {
            border-color: rgba(100, 255, 218, 0.3);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(100, 255, 218, 0.1);
        }

        .stat-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .stat-value {
            font-size: 2.5em;
            color: #64ffda;
            font-weight: 700;
            margin-bottom: 10px;
        }

        body.light-mode .stat-value {
            color: #0a7a5e;
        }

        .stat-label {
            color: #8b949e;
            font-size: 0.95em;
        }

        .progress-section {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            margin-top: 30px; 
        }

        body.light-mode .progress-section {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .progress-section h2 {
            color: #64ffda;
            margin-bottom: 30px;
            font-size: 1.8em;
        }

        body.light-mode .progress-section h2 {
            color: #0a7a5e;
        }

        .chart-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .chart-tab {
            padding: 10px 24px;
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            color: #8b949e;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9em;
        }

        .chart-tab:hover {
            background: rgba(100, 255, 218, 0.1);
            color: #64ffda;
        }

        .chart-tab.active {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            color: #64ffda;
        }

        .chart-container {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        .chart-container.active {
            display: block;
        }

        /* IMPROVED BAR CHART ALIGNMENT */
.bar-chart {
    display: flex;
    align-items: flex-end;
    gap: 20px;
    height: 320px;
    padding: 20px 0;
    justify-content: center;
}

.bar-item {
    flex: 0 1 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    position: relative;
}

.bar {
    width: 100%;
    background: linear-gradient(180deg, #64ffda, #00d4ff);
    border-radius: 15px 15px 0 0;
    transition: height 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    box-shadow: 0 -5px 30px rgba(100, 255, 218, 0.3);
    min-height: 20px;
}

.bar-value {
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    color: #64ffda;
    font-weight: 700;
    font-size: 0.95em;
    white-space: nowrap;
}

body.light-mode .bar-value {
    color: #0a7a5e;
}

.bar-label {
    color: #8b949e;
    font-size: 0.85em;
    text-align: center;
    word-break: break-word;
    max-width: 100%;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1.3;
}

/* IMPROVED LIGHT THEME */
body.light-mode .form-button {
    background: rgba(10, 122, 94, 0.2);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

body.light-mode .form-button:hover {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .run-button {
    background: rgba(10, 122, 94, 0.2);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

body.light-mode .run-button:hover {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .submit-button,
body.light-mode .next-button {
    background: rgba(10, 122, 94, 0.2);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

body.light-mode .submit-button:hover,
body.light-mode .next-button:hover {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .modal-button.retry {
    background: rgba(10, 122, 94, 0.2);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

body.light-mode .modal-button.retry:hover {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .back-button {
    background: rgba(10, 122, 94, 0.15);
    border: 2px solid #0a7a5e;
    color: #0a7a5e;
}

/* PROGRESS TAB SWITCHES */
.progress-tab-switches {
    display: flex;
    gap: 12px;
    margin-bottom: 25px;
}

.progress-tab-switch {
    padding: 10px 24px;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    color: #8b949e;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
}

.progress-tab-switch.active {
    background: rgba(100, 255, 218, 0.2);
    border-color: #64ffda;
    color: #64ffda;
}

.progress-content-panel {
    display: none;
    animation: fadeIn 0.4s ease;
}

.progress-content-panel.active {
    display: block;
}

.goal-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.goal-stat-card {
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    padding: 25px;
    border-radius: 15px;
    text-align: center;
}

.goal-stat-value {
    font-size: 2.5em;
    color: #64ffda;
    font-weight: 700;
    margin-bottom: 10px;
}

body.light-mode .goal-stat-value {
    color: #0a7a5e;
}

.goal-stat-label {
    color: #8b949e;
    font-size: 0.9em;
}

.motivational-message {
    background: rgba(100, 255, 218, 0.1);
    border: 1px solid rgba(100, 255, 218, 0.3);
    padding: 20px;
    border-radius: 15px;
    text-align: center;
    color: #64ffda;
    font-size: 1.1em;
    font-weight: 600;
    margin-top: 20px;
}

body.light-mode .motivational-message {
    color: #0a7a5e;
}

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 10, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            animation: fadeIn 0.3s ease-out;
        }

        .loading-overlay.active {
            display: flex;
        }

        .loading-content {
            text-align: center;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(100, 255, 218, 0.2);
            border-top-color: #64ffda;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: #64ffda;
            font-size: 1.2em;
            font-weight: 600;
        }

        .learn-section {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        .learn-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .learn-header h1 {
            font-size: 3em;
            color: #64ffda;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .learn-header h1 {
            color: #0a7a5e;
        }

        .language-tabs {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .language-tab {
            padding: 12px 30px;
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            color: #8b949e;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        body.light-mode .language-tab {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .language-tab:hover {
            border-color: rgba(100, 255, 218, 0.3);
            color: #64ffda;
        }

        .language-tab.active {
            background: rgba(100, 255, 218, 0.15);
            border-color: #64ffda;
            color: #64ffda;
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
        }

        .language-content {
            display: none;
        }

        .language-content.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }

        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .course-card {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            opacity: 0;
            animation: slideInFade 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        /* Staggered animation delays for course cards */
        .course-card:nth-child(1) { animation-delay: 0.1s; }
        .course-card:nth-child(2) { animation-delay: 0.15s; }
        .course-card:nth-child(3) { animation-delay: 0.2s; }
        .course-card:nth-child(4) { animation-delay: 0.25s; }
        .course-card:nth-child(5) { animation-delay: 0.3s; }
        .course-card:nth-child(6) { animation-delay: 0.35s; }
        .course-card:nth-child(7) { animation-delay: 0.4s; }
        .course-card:nth-child(8) { animation-delay: 0.45s; }
        .course-card:nth-child(9) { animation-delay: 0.5s; }
        .course-card:nth-child(10) { animation-delay: 0.55s; }
        .course-card:nth-child(n+11) { animation-delay: 0.6s; }

        @keyframes slideInFade {
            from {
                opacity: 0;
                transform: translateX(-30px) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0) translateY(0);
            }
        }

        body.light-mode .course-card {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .course-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .course-card:not(.locked):hover {
            border-color: rgba(100, 255, 218, 0.3);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(100, 255, 218, 0.15);
        }

        .lock-overlay {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 100, 100, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            color: #ff6b6b;
            border: 1px solid rgba(255, 100, 100, 0.3);
        }

        .completed-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(100, 255, 100, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            color: #00ff00;
            border: 1px solid rgba(100, 255, 100, 0.3);
        }

        .course-header {
            padding: 30px;
            background: linear-gradient(135deg, rgba(100, 255, 218, 0.1), rgba(0, 212, 255, 0.1));
        }

        .course-title {
            font-size: 1.8em;
            color: #64ffda;
            margin-bottom: 10px;
        }

        body.light-mode .course-title {
            color: #0a7a5e;
        }

        .course-desc {
            color: #8b949e;
            font-size: 0.95em;
        }

        .course-progress-bar {
            margin: 20px 30px;
        }

        .course-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .course-progress-name {
            font-weight: 600;
            color: #e0e0e0;
        }

        body.light-mode .course-progress-name {
            color: #1a1a1a;
        }

        .progress-bar {
            height: 8px;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .progress-bar:hover {
            height: 10px;
            box-shadow: 0 0 15px rgba(100, 255, 218, 0.3);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #64ffda, #00d4ff);
            border-radius: 10px;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
            position: relative;
        }

        .progress-bar.expanded {
            height: 40px;
            background: linear-gradient(135deg, rgba(100, 255, 218, 0.15), rgba(0, 212, 255, 0.15));
            border: 2px solid rgba(100, 255, 218, 0.3);
        }

        .progress-bar.expanded .progress-fill {
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1em;
            color: #0a0a0a;
        }

        .course-progress-percent {
            color: #64ffda;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        body.light-mode .course-progress-percent {
            color: #0a7a5e;
        }

        .course-progress-percent.hidden {
            opacity: 0;
            transform: scale(0.8);
        }

        @media (max-width: 768px) {
            .progress-bar.expanded {
                height: 35px;
            }
            .progress-bar.expanded .progress-fill {
                font-size: 1em;
            }
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2500;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            animation: modalSlide 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        body.light-mode .modal-content {
            background: rgba(255, 255, 255, 0.95);
        }

        @keyframes modalSlide {
            from { opacity: 0; transform: scale(0.8) translateY(30px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 1.8em;
            color: #64ffda;
            margin-bottom: 10px;
        }

        body.light-mode .modal-title {
            color: #0a7a5e;
        }

        .modal-text {
            color: #8b949e;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 50px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-button.retry {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
        }

        .modal-button.retry:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .modal-button.continue {
            background: rgba(100, 100, 100, 0.2);
            border: 1px solid rgba(100, 100, 100, 0.3);
            color: #8b949e;
        }

        .modal-button.continue:hover {
            background: rgba(100, 100, 100, 0.3);
        }

        .practice-container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        .practice-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .practice-header h1 {
            font-size: 3em;
            color: var(--theme-primary);
            margin-bottom: 10px;
            text-shadow: 0 0 30px var(--theme-shadow);
        }

        body.light-mode .practice-header h1 {
            color: #0a7a5e;
        }

        /* New Playground Container */
        .playground-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            height: calc(100vh - 250px);
            position: relative;
        }

        .playground-container.with-ai {
            grid-template-columns: 1fr 450px;
            gap: 0; /* Remove gap to attach AI sidebar to right */
        }

        .editor-main {
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-width: 0;
        }

        .playground-controls {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 15px;
            padding: 15px 20px;
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        body.light-mode .playground-controls {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .center-tabs {
            display: flex;
            gap: 10px;
            padding: 0 5px;
            justify-content: center;
        }

        .center-tab {
            flex: 1;
            max-width: 200px;
            padding: 12px 24px;
            background: rgba(30, 30, 30, 0.4);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 12px;
            color: #8b949e;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .center-tab:hover {
            background: rgba(100, 255, 218, 0.1);
            border-color: rgba(100, 255, 218, 0.3);
            color: #64ffda;
        }

        .center-tab.active {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            color: #64ffda;
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.3);
        }

        body.light-mode .center-tab {
            background: rgba(255, 255, 255, 0.6);
            border-color: rgba(10, 122, 94, 0.2);
            color: #495057;
        }

        body.light-mode .center-tab:hover {
            background: rgba(10, 122, 94, 0.1);
            border-color: rgba(10, 122, 94, 0.4);
            color: #0a7a5e;
        }

        body.light-mode .center-tab.active {
            background: rgba(10, 122, 94, 0.2);
            border-color: #0a7a5e;
            color: #0a7a5e;
        }

        .code-panel {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            flex: 1;
            min-height: 0;
        }

        body.light-mode .code-panel {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        /* Console Panel */
        .console-panel {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 200px;
        }

        body.light-mode .console-panel {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .console-header {
            background: rgba(20, 20, 20, 0.8);
            padding: 10px 20px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        body.light-mode .console-header {
            background: rgba(240, 240, 240, 0.9);
        }

        .console-title {
            color: #64ffda;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95em;
        }

        body.light-mode .console-title {
            color: #0a7a5e;
        }

        .console-clear-btn {
            background: transparent;
            border: 1px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 5px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }

        .console-clear-btn:hover {
            background: rgba(100, 255, 218, 0.1);
            border-color: #64ffda;
        }

        .console-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #e0e0e0;
        }

        body.light-mode .console-content {
            color: #2c3e50;
        }

        .console-message {
            margin: 5px 0;
            padding: 8px 12px;
            border-radius: 6px;
            border-left: 3px solid;
            animation: slideInConsole 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes slideInConsole {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .console-message.log {
            background: rgba(100, 255, 218, 0.1);
            border-left-color: #64ffda;
            color: #64ffda;
        }

        .console-message.error {
            background: rgba(255, 100, 100, 0.1);
            border-left-color: #ff6464;
            color: #ff6464;
        }

        .console-message.warn {
            background: rgba(255, 193, 7, 0.1);
            border-left-color: #ffc107;
            color: #ffc107;
        }

        .console-message.info {
            background: rgba(100, 150, 255, 0.1);
            border-left-color: #6496ff;
            color: #6496ff;
        }

        .error-message-text {
            flex: 1;
        }

        /* Right Panel (Preview/AI) */
        .right-panel {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            overflow: hidden;
            display: none;
            flex-direction: column;
            animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .right-panel.active {
            display: flex;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        body.light-mode .right-panel {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .right-panel-tabs {
            background: rgba(20, 20, 20, 0.8);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        body.light-mode .right-panel-tabs {
            background: rgba(240, 240, 240, 0.9);
        }

        .panel-tab {
            background: transparent;
            border: 1px solid rgba(100, 255, 218, 0.2);
            color: #8b949e;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .panel-tab:hover {
            background: rgba(100, 255, 218, 0.05);
            border-color: rgba(100, 255, 218, 0.4);
            color: #64ffda;
        }

        .panel-tab.active {
            background: rgba(100, 255, 218, 0.1);
            border-color: #64ffda;
            color: #64ffda;
        }

        body.light-mode .panel-tab.active {
            color: #0a7a5e;
            border-color: #0a7a5e;
            background: rgba(10, 122, 94, 0.1);
        }

        .panel-close-btn {
            background: transparent;
            border: 1px solid rgba(255, 100, 100, 0.3);
            color: #ff6464;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5em;
            line-height: 1;
            transition: all 0.3s ease;
            margin-left: auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .panel-close-btn:hover {
            background: rgba(255, 100, 100, 0.1);
            border-color: #ff6464;
            transform: rotate(90deg);
        }

        .tab-content {
            display: none;
            flex: 1;
            overflow: hidden;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        .preview-content {
            flex: 1;
            overflow: hidden;
        }

        /* AI Panel Styles */
        .ai-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .ai-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .ai-message {
            display: flex;
            gap: 15px;
            animation: fadeInMessage 0.4s ease;
        }

        @keyframes fadeInMessage {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .ai-message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            flex-shrink: 0;
        }

        .ai-message.user .message-avatar {
            background: linear-gradient(135deg, #64ffda 0%, #0a7a5e 100%);
        }

        .message-content {
            flex: 1;
            background: rgba(40, 40, 40, 0.6);
            padding: 15px 20px;
            border-radius: 15px;
            border: 1px solid rgba(100, 255, 218, 0.1);
            color: #e0e0e0;
            line-height: 1.6;
            word-wrap: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
        }

        body.light-mode .message-content {
            background: rgba(245, 245, 245, 0.8);
            color: #2c3e50;
        }

        .ai-message.user .message-content {
            background: rgba(100, 255, 218, 0.1);
            border-color: #64ffda;
        }

        .message-content p {
            margin: 0 0 10px 0;
        }

        .message-content p:last-child {
            margin-bottom: 0;
        }

        .message-content ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .message-content li {
            margin: 5px 0;
        }

        .message-content code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #64ffda;
        }

        body.light-mode .message-content code {
            background: rgba(0, 0, 0, 0.1);
            color: #0a7a5e;
        }

        .message-content pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 10px 0;
            position: relative;
            max-width: 100%;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        body.light-mode .message-content pre {
            background: rgba(0, 0, 0, 0.05);
        }

        /* Code block wrapper with copy button */
        .code-block-wrapper {
            position: relative;
            margin: 10px 0;
        }

        .code-copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid rgba(100, 255, 218, 0.4);
            color: #64ffda;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.75em;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .code-block-wrapper:hover .code-copy-btn {
            opacity: 1;
        }

        .code-copy-btn:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: scale(1.05);
        }

        .code-copy-btn.copied {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
            color: #4caf50;
        }

        body.light-mode .code-copy-btn {
            background: rgba(10, 122, 94, 0.2);
            border-color: rgba(10, 122, 94, 0.4);
            color: #0a7a5e;
        }

        body.light-mode .code-copy-btn:hover {
            background: rgba(10, 122, 94, 0.3);
        }

        body.light-mode .code-copy-btn.copied {
            background: rgba(76, 175, 80, 0.2);
            border-color: rgba(76, 175, 80, 0.4);
            color: #2e7d32;
        }

        .ai-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .suggestion-btn {
            background: transparent;
            border: 2px solid rgba(100, 255, 218, 0.5);
            color: #64ffda;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: none;
        }

        .suggestion-btn:hover {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            transform: translateY(-2px);
            box-shadow: none;
        }

        body.light-mode .suggestion-btn {
            color: #0a7a5e;
            border-color: rgba(10, 122, 94, 0.5);
            background: transparent;
            box-shadow: none;
        }

        body.light-mode .suggestion-btn:hover {
            background: rgba(10, 122, 94, 0.2);
            border-color: #0a7a5e;
            box-shadow: none;
        }

        /* Agent Mode Toggle */
        .ai-mode-toggle {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
            background: rgba(20, 20, 20, 0.6);
            z-index: 1;
            position: relative;
        }

        body.light-mode .ai-mode-toggle {
            background: rgba(240, 240, 240, 0.9);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .agent-mode-label {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            user-select: none;
        }

        .agent-mode-label input[type="checkbox"] {
            width: 44px;
            height: 24px;
            appearance: none;
            background: rgba(100, 100, 100, 0.3);
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 20px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .agent-mode-label input[type="checkbox"]:before {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            background: #666;
            transition: all 0.3s ease;
        }

        .agent-mode-label input[type="checkbox"]:checked {
            background: rgba(100, 255, 218, 0.3);
            border-color: #64ffda;
        }

        .agent-mode-label input[type="checkbox"]:checked:before {
            left: 22px;
            background: #64ffda;
            box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
        }

        .agent-mode-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .agent-mode-icon {
            font-size: 1.1em;
        }

        .agent-mode-text {
            color: #e0e0e0;
            font-weight: 600;
            font-size: 0.95em;
        }

        .agent-mode-desc {
            color: #8b949e;
            font-size: 0.75em;
            font-weight: 400;
        }

        body.light-mode .agent-mode-text {
            color: #1a1a1a;
        }

        body.light-mode .agent-mode-label input[type="checkbox"]:checked {
            background: rgba(10, 122, 94, 0.3);
            border-color: #0a7a5e;
        }

        body.light-mode .agent-mode-label input[type="checkbox"]:checked:before {
            background: #0a7a5e;
            box-shadow: 0 0 10px rgba(10, 122, 94, 0.5);
        }

        /* AI Input Container */
        .ai-input-container {
            padding: 20px;
            border-top: 1px solid rgba(100, 255, 218, 0.1);
            background: rgba(20, 20, 20, 0.6);
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        body.light-mode .ai-input-container {
            background: rgba(240, 240, 240, 0.9);
        }

        #aiInput {
            flex: 1;
            background: rgba(40, 40, 40, 0.8);
            border: 1px solid rgba(100, 255, 218, 0.2);
            border-radius: 25px;
            padding: 12px 20px;
            color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 0.95em;
            resize: none;
            max-height: 120px;
            transition: all 0.3s ease;
        }

        #aiInput:focus {
            outline: none;
            border-color: #64ffda;
            background: rgba(40, 40, 40, 1);
        }

        body.light-mode #aiInput {
            background: rgba(255, 255, 255, 0.9);
            color: #2c3e50;
            border-color: rgba(10, 122, 94, 0.3);
        }

        body.light-mode #aiInput:focus {
            border-color: #0a7a5e;
        }

        .ai-send-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .ai-send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .ai-send-btn:active {
            transform: scale(0.95);
        }

        /* AI Toggle Button */
        .ai-toggle-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ai-toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        /* Code Highlight Animation */
        @keyframes codeHighlight {
            0%, 100% {
                background: transparent;
            }
            50% {
                background: rgba(100, 255, 218, 0.3);
            }
        }

        .code-highlight {
            animation: codeHighlight 1.5s ease-in-out;
            border-radius: 4px;
            padding: 2px;
        }

        /* New Preview Panel Styles */
        .preview-panel {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            overflow: hidden;
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        body.light-mode .preview-panel {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        /* New AI Sidebar Styles with Gradient and Neural Nodes */
        .ai-sidebar {
            display: none;
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px 0 0 20px; /* Round left corners only */
            overflow: hidden;
            flex-direction: column;
            position: fixed; /* Make it fixed to viewport */
            right: 0;
            top: 0;
            height: 100vh; /* Full viewport height */
            width: 450px;
            z-index: 1000;
            animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .ai-sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg,
                rgba(102, 126, 234, 0.2) 0%,
                rgba(118, 75, 162, 0.2) 25%,
                rgba(100, 255, 218, 0.1) 50%,
                rgba(102, 126, 234, 0.2) 75%,
                rgba(118, 75, 162, 0.2) 100%);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .ai-sidebar.active {
            display: flex;
            box-shadow: 0 0 30px rgba(100, 255, 218, 0.3),
                        0 0 60px rgba(100, 255, 218, 0.15),
                        0 0 90px rgba(100, 255, 218, 0.1);
            animation: aiGlow 2s ease-in-out infinite alternate;
        }

        @keyframes aiGlow {
            0% {
                box-shadow: 0 0 30px rgba(100, 255, 218, 0.3),
                            0 0 60px rgba(100, 255, 218, 0.15),
                            0 0 90px rgba(100, 255, 218, 0.1);
            }
            100% {
                box-shadow: 0 0 40px rgba(100, 255, 218, 0.4),
                            0 0 70px rgba(100, 255, 218, 0.2),
                            0 0 100px rgba(100, 255, 218, 0.15);
            }
        }

        body.light-mode .ai-sidebar {
            background: rgba(255, 255, 255, 0.85);
            border-color: rgba(10, 122, 94, 0.2);
        }

        body.light-mode .ai-sidebar.active {
            box-shadow: 0 0 30px rgba(10, 122, 94, 0.25),
                        0 0 60px rgba(10, 122, 94, 0.12),
                        0 0 90px rgba(10, 122, 94, 0.08);
        }

        .ai-sidebar-header {
            background: rgba(20, 20, 20, 0.9);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1;
            position: relative;
        }

        body.light-mode .ai-sidebar-header {
            background: rgba(240, 240, 240, 0.95);
        }

        .ai-sidebar-title {
            color: #64ffda;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1em;
        }

        body.light-mode .ai-sidebar-title {
            color: #0a7a5e;
        }

        .ai-icon-animated {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        .ai-close-btn {
            background: transparent;
            border: 1px solid rgba(255, 100, 100, 0.3);
            color: #ff6464;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5em;
            line-height: 1;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-close-btn:hover {
            background: rgba(255, 100, 100, 0.1);
            border-color: #ff6464;
            transform: rotate(90deg);
        }

        .ai-sidebar .ai-content {
            position: relative;
            z-index: 1;
        }

        .ai-suggestions {
            padding: 15px;
            border-top: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
            background: rgba(20, 20, 20, 0.4);
            z-index: 1;
            position: relative;
        }

        body.light-mode .ai-suggestions {
            background: rgba(240, 240, 240, 0.6);
        }

        .ai-suggestions .suggestion-btn {
            background: transparent;
            border: 2px solid rgba(100, 255, 218, 0.5);
            color: #64ffda;
            padding: 12px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: none;
        }

        .ai-suggestions .suggestion-btn:hover {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(100, 255, 218, 0.2);
        }

        body.light-mode .ai-suggestions .suggestion-btn {
            background: transparent;
            border-color: rgba(10, 122, 94, 0.5);
            color: #0a7a5e;
            box-shadow: none;
        }

        body.light-mode .ai-suggestions .suggestion-btn:hover {
            background: rgba(10, 122, 94, 0.2);
            border-color: #0a7a5e;
            box-shadow: none;
        }

        /* Neural Network Animation */
        .neural-nodes {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .neural-node {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(100, 255, 218, 0.6);
            border-radius: 50%;
            animation: float 8s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-20px) translateX(10px); }
        }

        .panel-header {
            background: rgba(20, 20, 20, 0.8);
            padding: 15px 25px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        body.light-mode .panel-header {
            background: rgba(240, 240, 240, 0.9);
        }

        .panel-title {
            color: #64ffda;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        body.light-mode .panel-title {
            color: #0a7a5e;
        }

        .run-button {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
            padding: 8px 24px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .run-button:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: scale(1.05);
        }

        .code-editor-area {
            flex: 1;
            padding: 0;
            overflow: hidden;
            position: relative;
        }

        .code-editor-area textarea {
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            color: #e0e0e0;
            border: none;
            padding: 25px;
            font-family: 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.7;
            resize: none;
            outline: none;
        }

        body.light-mode .code-editor-area textarea {
            background: #fff;
            color: #1a1a1a;
        }

        /* Thinking Overlay Animation */
        .thinking-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 10, 10, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            animation: fadeIn 0.3s ease;
        }

        body.light-mode .thinking-overlay {
            background: rgba(255, 255, 255, 0.95);
        }

        .thinking-content {
            text-align: center;
            color: #64ffda;
        }

        body.light-mode .thinking-content {
            color: #0a7a5e;
        }

        .thinking-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(100, 255, 218, 0.2);
            border-top-color: #64ffda;
            border-radius: 50%;
            margin: 0 auto 15px;
            animation: spin 1s linear infinite;
        }

        body.light-mode .thinking-spinner {
            border-color: rgba(10, 122, 94, 0.2);
            border-top-color: #0a7a5e;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .thinking-text {
            font-size: 1.1em;
            font-weight: 600;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .output-content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: #0a0a0a;
        }

        body.light-mode .output-content {
            background: #fff;
        }

        .output-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }

        .console-output {
            color: #64ffda;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            line-height: 1.8;
        }

        body.light-mode .console-output {
            color: #0a7a5e;
        }

        .settings-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            padding-top: 0;
        }

        .settings-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .settings-header h1 {
            font-size: 3em;
            color: var(--theme-primary);
            margin-bottom: 10px;
            text-shadow: 0 0 30px var(--theme-shadow);
        }

        body.light-mode .settings-header h1 {
            color: #0a7a5e;
        }

        .settings-section {
            background: rgba(30, 30, 30, 0.6);
            border: 1px solid var(--theme-secondary);
            padding: 35px;
            border-radius: 20px;
            margin-bottom: 25px;
        }

        body.light-mode .settings-section {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(10, 122, 94, 0.2);
        }

        .settings-section h2 {
            color: var(--theme-primary);
            margin-bottom: 25px;
            font-size: 1.5em;
        }

        body.light-mode .settings-section h2 {
            color: #0a7a5e;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-info h3 {
            color: #e0e0e0;
            margin-bottom: 5px;
        }

        body.light-mode .setting-info h3 {
            color: #1a1a1a;
        }

        .setting-info p {
            color: #8b949e;
            font-size: 0.9em;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--theme-secondary);
            border: 1px solid var(--theme-border);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: var(--theme-border);
            border-color: var(--theme-primary);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 22px;
            height: 22px;
            background: var(--theme-primary);
            border-radius: 50%;
            transition: left 0.25s ease, transform 0.25s ease;
            box-shadow: 0 2px 8px var(--theme-shadow);
            will-change: left, transform;
        }

        .toggle-switch.active::after {
            left: 33px;
        }

        @keyframes checkPop {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .lesson-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #0a0a0a;
            z-index: 2000;
        }

        body.light-mode .lesson-view {
            background: #f5f5f5;
        }

        .lesson-view.active {
            display: flex;
            flex-direction: column;
            animation: iOSSlideIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes iOSSlideIn {
            from { opacity: 0; transform: scale(0.9) translateY(50px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .lesson-header-bar {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(20px);
            padding: 20px 30px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        body.light-mode .lesson-header-bar {
            background: rgba(255, 255, 255, 0.95);
        }

        .lesson-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .back-button {
            background: rgba(100, 255, 218, 0.1);
            border: 1px solid rgba(100, 255, 218, 0.3);
            color: #64ffda;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .back-button:hover {
            background: rgba(100, 255, 218, 0.2);
            transform: translateX(-3px);
        }

        .lesson-title {
            font-size: 1.4em;
            color: #e0e0e0;
        }

        body.light-mode .lesson-title {
            color: #1a1a1a;
        }

        .lesson-progress-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .progress-indicator {
            background: rgba(100, 255, 218, 0.1);
            padding: 8px 20px;
            border-radius: 20px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            font-weight: 600;
            color: #64ffda;
        }

        body.light-mode .progress-indicator {
            color: #0a7a5e;
        }

        .tab-switcher {
            background: rgba(30, 30, 30, 0.6);
            padding: 5px;
            border-radius: 50px;
            display: flex;
            gap: 5px;
        }

        body.light-mode .tab-switcher {
            background: rgba(255, 255, 255, 0.8);
        }

        .tab-switch-btn {
            padding: 8px 24px;
            border: none;
            background: transparent;
            color: #8b949e;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            border-radius: 50px;
            transition: all 0.3s ease;
        }

        .tab-switch-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .tab-switch-btn.active {
            background: rgba(100, 255, 218, 0.2);
            color: #64ffda;
        }

        body.light-mode .tab-switch-btn.active {
            color: #0a7a5e;
        }

        .lesson-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .content-panel {
            display: none;
            max-width: 1000px;
            margin: 0 auto;
        }

        .content-panel.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }

        .chat-container {
            background: rgba(30, 30, 30, 0.4);
            border: 1px solid rgba(100, 255, 218, 0.1);
            border-radius: 20px;
            padding: 35px;
        }

        body.light-mode .chat-container {
            background: rgba(255, 255, 255, 0.6);
            border-color: rgba(10, 122, 94, 0.2);
        }

        /* Fix chat messages - prevent movement */
.chat-messages {
    display: flex;
    flex-direction: column;
    gap: 25px;
    overflow-x: hidden;
    width: 100%;
    max-width: 100%;
}

.message {
    display: flex;
    gap: 15px;
    animation: messageSlide 0.4s ease-out;
    min-height: fit-content;
    width: 100%;
}

.message-avatar {
    width: 45px;
    height: 45px;
    min-width: 45px;
    min-height: 45px;
    border-radius: 50%;
    background: rgba(100, 255, 218, 0.2);
    border: 2px solid rgba(100, 255, 218, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    flex-shrink: 0;
}

.message-bubble {
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 18px 22px;
    border-radius: 15px;
    line-height: 1.7;
    font-size: 1.05em;
    color: #e0e0e0;
    flex: 1;
    min-width: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
    /* CRITICAL: This prevents content from affecting layout */
    contain: layout;
}

body.light-mode .message-bubble {
    background: rgba(10, 122, 94, 0.05);
    color: #1a1a1a;
}

/* Ensure code blocks don't cause reflow */
.code-example {
    background: #1a1a1a;
    border: 1px solid rgba(100, 255, 218, 0.2);
    padding: 20px;
    border-radius: 12px;
    margin: 15px 0;
    font-family: 'Courier New', monospace;
    overflow-x: auto;
    max-width: 100%;
}

body.light-mode .code-example {
    background: #f0f0f0;
    border-color: rgba(10, 122, 94, 0.2);
}

.code-example code {
    color: #64ffda;
    line-height: 1.8;
    display: block;
}

body.light-mode .code-example code {
    color: #0a7a5e;
}

        .typing-indicator {
            display: flex;
            gap: 6px;
            padding: 15px 20px;
        }

        .typing-dot {
            width: 10px;
            height: 10px;
            background: #64ffda;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
            30% { transform: translateY(-10px); opacity: 1; }
        }

        .exercise-box {
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .exercise-title {
            color: #64ffda;
            font-weight: 700;
            margin-bottom: 18px;
            font-size: 1.15em;
        }

        body.light-mode .exercise-title {
            color: #0a7a5e;
        }

        .code-fill {
            background: #1a1a1a;
            border: 1px solid rgba(100, 255, 218, 0.2);
            padding: 20px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            line-height: 2;
            margin: 15px 0;
            color: #e0e0e0;
        }

        body.light-mode .code-fill {
            background: #f0f0f0;
            color: #1a1a1a;
        }

        .code-blank-wrapper {
            display: inline-block;
            background: rgba(100, 255, 218, 0.2);
            border: 2px solid transparent;
            border-radius: 6px;
            padding: 2px 4px;
            transition: all 0.3s ease;
        }

        .code-blank-wrapper.correct {
            background: rgba(100, 255, 100, 0.2);
            border-color: #00ff00;
            animation: correctPulse 0.5s ease;
        }

        .code-blank-wrapper.incorrect {
            background: rgba(255, 100, 100, 0.2);
            border-color: #ff6b6b;
            animation: shake 0.5s ease;
        }

        .code-blank {
            background: transparent;
            border: none;
            color: #64ffda;
            font-family: 'Courier New', monospace;
            min-width: 80px;
            text-align: center;
            outline: none;
            font-weight: 600;
            font-size: 1em;
            padding: 2px 8px;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .mcq-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 15px 0;
        }

        .mcq-option {
            background: rgba(100, 255, 218, 0.05);
            border: 1px solid rgba(100, 255, 218, 0.2);
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #e0e0e0;
        }

        body.light-mode .mcq-option {
            color: #1a1a1a;
        }

        .mcq-option:hover {
            background: rgba(100, 255, 218, 0.1);
            border-color: rgba(100, 255, 218, 0.4);
            transform: translateX(5px);
        }

        .mcq-option.selected {
            background: rgba(100, 255, 218, 0.15);
            border-color: #64ffda;
        }

        .mcq-option.correct {
            background: rgba(100, 255, 100, 0.15);
            border-color: #00ff00;
            animation: correctPulse 0.5s ease;
        }

        .mcq-option.incorrect {
            background: rgba(255, 100, 100, 0.15);
            border-color: #ff6b6b;
            animation: shake 0.5s ease;
        }

        .submit-button {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
            padding: 12px 35px;
            border-radius: 50px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .submit-button:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .next-button {
            background: rgba(100, 255, 218, 0.2);
            border: 1px solid #64ffda;
            color: #64ffda;
            padding: 12px 35px;
            border-radius: 50px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .next-button:hover {
            background: rgba(100, 255, 218, 0.3);
            transform: translateY(-2px);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px 20px;
            border-radius: 12px;
            font-weight: 600;
            animation: feedbackSlide 0.4s ease-out;
        }

        @keyframes feedbackSlide {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .feedback.correct {
            background: rgba(100, 255, 100, 0.1);
            border: 1px solid rgba(100, 255, 100, 0.3);
            color: #00ff00;
        }

        .feedback.incorrect {
            background: rgba(255, 100, 100, 0.1);
            border: 1px solid rgba(255, 100, 100, 0.3);
            color: #ff6b6b;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            body {
                padding-bottom: 70px;
            }

            .nav-container {
                display: none !important;
            }

            .mobile-nav {
                display: block;
            }

            .main-content {
                padding-top: 20px;
            }

            .dashboard-title {
                font-size: 2.5em;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .playground-container {
                grid-template-columns: 1fr !important;
                height: auto;
            }

            .playground-container.with-panel {
                grid-template-columns: 1fr !important;
            }

            .right-panel {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                z-index: 1000;
                border-radius: 0;
            }

            .editor-main {
                gap: 10px;
            }

            .code-panel {
                min-height: 400px;
            }

            .preview-panel {
                min-height: 400px;
            }

            .console-panel {
                height: 150px;
            }

            /* Make AI sidebar full screen on mobile */
            .ai-sidebar {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                width: 100% !important;
                height: 100vh !important;
                border-radius: 0 !important;
                z-index: 100000 !important; /* Higher than nav and hamburger */
                background: rgba(30, 30, 30, 0.98) !important; /* Nearly opaque for better readability on mobile */
            }

            body.light-mode .ai-sidebar {
                background: rgba(255, 255, 255, 0.98) !important; /* Nearly opaque for light mode on mobile */
            }

            .ai-sidebar.active {
                display: flex !important;
            }

            .ai-toggle-btn {
                padding: 8px 12px;
                font-size: 0.8em;
            }

            .right-panel-tabs {
                padding: 10px 15px;
            }

            .panel-tab {
                padding: 8px 15px;
                font-size: 0.85em;
            }

            .bar-chart {
                height: 200px;
            }

            .course-grid {
                grid-template-columns: 1fr;
            }

            .auth-container {
                padding: 30px 20px;
            }

            .lesson-header-bar {
                flex-wrap: wrap;
                gap: 15px;
            }

            .lesson-progress-info {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 480px) {
            .dashboard-title {
                font-size: 2em;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 30px 20px;
            }

            .modal-buttons {
                flex-direction: column;
            }
        }

        /* IMPROVED SETTINGS */
.account-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 30px 35px;
    border-radius: 20px;
    margin-bottom: 25px;
}

body.light-mode .account-header {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(10, 122, 94, 0.2);
}

.account-info {
    display: flex;
    align-items: center;
    gap: 20px;
}

.account-avatar {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: linear-gradient(135deg, #64ffda, #00d4ff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    font-weight: 700;
    color: #0a0a0a;
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.3);
}

.account-details h2 {
    color: #64ffda;
    margin-bottom: 5px;
    font-size: 1.5em;
}

body.light-mode .account-details h2 {
    color: #0a7a5e;
}

.account-details p {
    color: #8b949e;
    font-size: 0.9em;
}

.logout-btn {
    background: rgba(255, 100, 100, 0.2);
    border: 1px solid rgba(255, 100, 100, 0.3);
    color: #ff6b6b;
    padding: 12px 30px;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.logout-btn:hover {
    background: rgba(255, 100, 100, 0.3);
    transform: translateY(-2px);
}

.settings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
}

.setting-card {
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 25px;
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    transition: transform 0.2s ease, border-color 0.2s ease;
    contain: layout style paint;
}

body.light-mode .setting-card {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(10, 122, 94, 0.2);
}

.setting-card:hover {
    border-color: rgba(100, 255, 218, 0.3);
    transform: translateY(-3px);
}

.setting-card h3 {
    color: #64ffda;
    font-size: 1.1em;
    margin-bottom: 5px;
}

body.light-mode .setting-card h3 {
    color: #0a7a5e;
}

.setting-card p {
    color: #8b949e;
    font-size: 0.9em;
    flex: 1;
}

/* MOBILE SETTINGS OPTIMIZATION */
@media (max-width: 768px) {
    .settings-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .setting-card {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        padding: 20px;
        gap: 15px;
    }
    
    .setting-card h3 {
        font-size: 1em;
        margin-bottom: 0;
    }
    
    .setting-card p {
        font-size: 0.85em;
        margin: 0;
    }
    
    .setting-card > div:first-child {
        flex: 1;
    }
    
    .toggle-switch {
        flex-shrink: 0;
    }
    
    .submit-button {
        flex-shrink: 0;
        padding: 10px 20px;
        font-size: 0.9em;
    }
}

/* SMOOTH ANIMATIONS */
.nav-tabs {
    opacity: 1;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.nav-tabs.hiding {
    opacity: 0;
    transform: scale(0.95);
}

.chat-messages {
    transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* UPDATE SPLASH SCREEN */
.update-splash {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.4s ease;
}

.update-splash.active {
    display: flex;
}

.update-content {
    background: linear-gradient(135deg, 
        rgba(30, 30, 30, 0.98), 
        rgba(20, 25, 35, 0.98));
    border: 2px solid rgba(100, 255, 218, 0.4);
    box-shadow: 0 20px 80px rgba(100, 255, 218, 0.3);
}

body.light-mode .update-content {
    background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.98), 
        rgba(250, 252, 255, 0.98));
    border-color: rgba(10, 122, 94, 0.4);
    box-shadow: 0 20px 80px rgba(10, 122, 94, 0.2);
}

.close-splash-btn {
    font-size: 1.1em;
    padding: 15px 45px;
    background: linear-gradient(135deg, 
        rgba(100, 255, 218, 0.3), 
        rgba(0, 212, 255, 0.3));
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.4);
}

.close-splash-btn:hover {
    background: linear-gradient(135deg, 
        rgba(100, 255, 218, 0.4), 
        rgba(0, 212, 255, 0.4));
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(100, 255, 218, 0.5);
}

@keyframes splashSlide {
    from { opacity: 0; transform: scale(0.8) translateY(50px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}

.update-icon {
    font-size: 5em;
    margin-bottom: 20px;
}

.update-title {
    font-size: 2.5em;
    color: #64ffda;
    margin-bottom: 15px;
    text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
}

body.light-mode .update-title {
    color: #0a7a5e;
}

.update-version {
    color: #8b949e;
    margin-bottom: 30px;
    font-size: 1.1em;
}

.changelog {
    text-align: left;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    padding: 25px;
    margin-bottom: 30px;
}

.changelog h3 {
    color: #64ffda;
    margin-bottom: 15px;
    font-size: 1.2em;
}

body.light-mode .changelog h3 {
    color: #0a7a5e;
}

.changelog ul {
    list-style: none;
    padding: 0;
}

.changelog li {
    color: #e0e0e0;
    padding: 10px 0;
    padding-left: 30px;
    position: relative;
}

body.light-mode .changelog li {
    color: #1a1a1a;
}

.changelog li::before {
    content: "✓";
    position: absolute;
    left: 0;
    color: #64ffda;
    font-weight: 700;
}

.close-splash-btn {
    background: rgba(100, 255, 218, 0.2);
    border: 1px solid #64ffda;
    color: #64ffda;
    padding: 15px 40px;
    border-radius: 50px;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.close-splash-btn:hover {
    background: rgba(100, 255, 218, 0.3);
    transform: translateY(-2px);
}

.bar-chart {
    display: flex;
    align-items: flex-end;
    gap: 30px;
    height: 350px;
    padding: 20px 20px 60px 80px;
    justify-content: center;
    position: relative;
    background: 
        linear-gradient(90deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px),
        linear-gradient(0deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px);
    background-size: 50px 35px;
}

/* Y-axis (left vertical line) */
.bar-chart::before {
    content: '';
    position: absolute;
    left: 70px;
    bottom: 50px;
    width: 3px;
    height: calc(100% - 70px);
    background: linear-gradient(180deg, rgba(100, 255, 218, 0.5), rgba(100, 255, 218, 0.2));
    border-radius: 2px;
}

/* X-axis (bottom horizontal line) */
.bar-chart::after {
    content: '';
    position: absolute;
    left: 70px;
    bottom: 50px;
    width: calc(100% - 90px);
    height: 3px;
    background: linear-gradient(90deg, rgba(100, 255, 218, 0.5), rgba(100, 255, 218, 0.2));
    border-radius: 2px;
}

.chart-y-labels {
    position: absolute;
    left: 10px;
    top: 20px;
    bottom: 60px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    color: #64ffda;
    font-size: 0.85em;
    font-weight: 600;
    z-index: 10;
}

body.light-mode .chart-y-labels {
    color: #0a7a5e;
}

.chart-y-labels span {
    background: rgba(10, 10, 10, 0.8);
    padding: 4px 8px;
    border-radius: 6px;
    border: 1px solid rgba(100, 255, 218, 0.3);
}

body.light-mode .chart-y-labels span {
    background: rgba(245, 245, 245, 0.9);
    border-color: rgba(10, 122, 94, 0.3);
}

.bar-item {
    flex: 0 1 120px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
    position: relative;
    height: 280px; /* Fixed height for consistent calculation */
    justify-content: flex-end;
    padding-bottom: 0;
}

.bar {
    width: 100%;
    background: linear-gradient(180deg, #64ffda 0%, #00d4ff 100%);
    border-radius: 12px 12px 0 0;
    transition: height 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    box-shadow: 
        0 -5px 30px rgba(100, 255, 218, 0.3),
        inset 0 -2px 10px rgba(255, 255, 255, 0.3);
    min-height: 0px;
    max-height: 100%;
    border: 2px solid rgba(100, 255, 218, 0.4);
    border-bottom: none;
}

body.light-mode .bar {
    background: linear-gradient(180deg, #0a7a5e 0%, #00a896 100%);
    box-shadow: 
        0 -5px 30px rgba(10, 122, 94, 0.3),
        inset 0 -2px 10px rgba(255, 255, 255, 0.5);
    border-color: rgba(10, 122, 94, 0.5);
}

.bar-value {
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    color: #64ffda;
    font-weight: 700;
    font-size: 1em;
    white-space: nowrap;
    background: rgba(10, 10, 10, 0.9);
    padding: 6px 12px;
    border-radius: 8px;
    border: 1px solid rgba(100, 255, 218, 0.3);
    box-shadow: 0 4px 15px rgba(100, 255, 218, 0.2);
}

body.light-mode .bar-value {
    color: #0a7a5e;
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(10, 122, 94, 0.3);
}

.bar-label {
    color: #8b949e;
    font-size: 0.9em;
    text-align: center;
    word-break: break-word;
    max-width: 100%;
    height: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1.3;
    position: absolute;
    bottom: -45px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* STREAK CELEBRATION */
.streak-celebration {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0);
    z-index: 5000;
    display: none;
    justify-content: center;
    align-items: center;
    pointer-events: none;
    transition: background 0.5s ease;
}

.streak-celebration.active {
    display: flex;
}

.streak-celebration.show-bg {
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(10px);
}

.streak-card-animated {
    background: rgba(30, 30, 30, 0.6);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 30px;
    border-radius: 20px;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 40px rgba(100, 255, 218, 0.1);
    width: 280px;
    min-width: 280px;
    opacity: 0;
    position: fixed;
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    will-change: transform, opacity, left, top;
}

body.light-mode .streak-card-animated {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(10, 122, 94, 0.2);
    box-shadow: 0 10px 40px rgba(10, 122, 94, 0.1);
}

.streak-icon-big {
    font-size: 2.5em;
    text-align: center;
    margin-bottom: 15px;
    transition: transform 0.3s ease;
}

.streak-number-container {
    position: relative;
    height: 60px;
    overflow: hidden;
    margin-bottom: 10px;
}

.streak-number-big {
    font-size: 2.5em;
    color: #64ffda;
    font-weight: 700;
    text-align: center;
    text-shadow: 0 0 30px rgba(100, 255, 218, 0.5);
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
    transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.6s ease;
    line-height: 1;
}

body.light-mode .streak-number-big {
    color: #0a7a5e;
    text-shadow: 0 0 30px rgba(10, 122, 94, 0.5);
}

.streak-text-big {
    font-size: 0.95em;
    color: #8b949e;
    text-align: center;
    font-weight: 600;
}

/* Add this new class */
.stat-card.animating {
    opacity: 0 !important;
    transition: opacity 0.3s ease;
}

body.light-mode .keyword-highlight {
    background: linear-gradient(120deg, rgba(10, 122, 94, 0.2) 0%, rgba(10, 122, 94, 0.1) 100%);
    color: #0a7a5e;
    border-bottom-color: rgba(10, 122, 94, 0.5);
}

/* AI Explanation Modal */
.ai-explanation-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 6000;
    animation: fadeIn 0.3s ease;
}

.ai-explanation-modal.active {
    display: flex;
}

.ai-explanation-content {
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 20px;
    padding: 40px;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
    animation: popIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

body.light-mode .ai-explanation-content {
    background: rgba(255, 255, 255, 0.98);
    border-color: rgba(10, 122, 94, 0.3);
}

@keyframes popIn {
    0% {
        opacity: 0;
        transform: scale(0.3) translateY(100px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.ai-close-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 100, 100, 0.2);
    border: 1px solid rgba(255, 100, 100, 0.3);
    color: #ff6b6b;
    font-size: 1.5em;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.ai-close-btn:hover {
    background: rgba(255, 100, 100, 0.3);
    transform: rotate(90deg);
}

.ai-keyword-display {
    font-size: 2em;
    color: #64ffda;
    font-weight: 700;
    text-align: center;
    margin-bottom: 25px;
    text-shadow: 0 0 20px rgba(100, 255, 218, 0.3);
}

body.light-mode .ai-keyword-display {
    color: #0a7a5e;
}

.ai-loading {
    text-align: center;
    color: #8b949e;
    padding: 20px;
}

.ai-spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(100, 255, 218, 0.2);
    border-top-color: #64ffda;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 20px auto;
}

.ai-explanation-text {
    color: #e0e0e0;
    line-height: 1.8;
    font-size: 1.05em;
}

body.light-mode .ai-explanation-text {
    color: #1a1a1a;
}

.ai-explanation-text p {
    margin-bottom: 15px;
}

.ai-explanation-text strong {
    color: #64ffda;
}

body.light-mode .ai-explanation-text strong {
    color: #0a7a5e;
}

.feature-preview {
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    padding: 20px;
    margin-top: 25px;
    text-align: center;
}

.preview-label {
    color: #8b949e;
    font-size: 0.9em;
    margin-bottom: 15px;
    font-weight: 600;
}

.preview-demo {
    position: relative;
    display: inline-block;
    font-size: 1.5em;
}

.demo-highlight {
    animation: demoGlow 2s ease-in-out infinite;
}

@keyframes demoGlow {
    0%, 100% { box-shadow: 0 0 10px rgba(100, 255, 218, 0.3); }
    50% { box-shadow: 0 0 20px rgba(100, 255, 218, 0.6); }
}

.preview-explanation {
    position: absolute;
    top: calc(100% + 10px);
    left: 50%;
    transform: translateX(-50%) scale(0);
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 12px;
    padding: 15px 20px;
    min-width: 200px;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    pointer-events: none;
    z-index: 10;
}

body.light-mode .preview-explanation {
    background: rgba(255, 255, 255, 0.98);
}

.preview-explanation.show {
    transform: translateX(-50%) scale(1);
    opacity: 1;
}

.preview-ai-icon {
    font-size: 2em;
    margin-bottom: 8px;
    animation: sparkle 1s ease-in-out infinite;
}

@keyframes sparkle {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.1) rotate(-5deg); }
    75% { transform: scale(1.1) rotate(5deg); }
}

.preview-text {
    color: #64ffda;
    font-weight: 600;
    font-size: 0.9em;
}

body.light-mode .preview-text {
    color: #0a7a5e;
}

/* UPDATE SPLASH SCREEN */
.update-splash {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.4s ease;
    overflow: hidden;
}

.update-splash.active {
    display: flex;
    overflow: hidden;
}

/* Prevent body scroll when splash is open */
body.splash-open {
    overflow: hidden;
}

.update-content {
    background: rgba(30, 30, 30, 0.95);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 25px;
    padding: 35px;
    max-width: 550px;
    width: 90%;
    max-height: 85vh;
    overflow-y: auto;
    text-align: center;
    animation: splashSlide 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

body.light-mode .update-content {
    background: rgba(255, 255, 255, 0.95);
}

.update-icon {
    font-size: 4em;
    margin-bottom: 15px;
}

.update-title {
    font-size: 2em;
    color: #64ffda;
    margin-bottom: 10px;
    text-shadow: 0 0 30px rgba(100, 255, 218, 0.3);
}

body.light-mode .update-title {
    color: #0a7a5e;
}

.update-version {
    color: #8b949e;
    margin-bottom: 25px;
    font-size: 1em;
}

.changelog {
    text-align: left;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 25px;
}

.changelog h3 {
    color: #64ffda;
    margin-bottom: 15px;
    font-size: 1.1em;
    text-align: center;
}

body.light-mode .changelog h3 {
    color: #0a7a5e;
}

.changelog ul {
    list-style: none;
    padding: 0;
}

.changelog li {
    color: #e0e0e0;
    padding: 8px 0;
    padding-left: 25px;
    position: relative;
    font-size: 0.95em;
    line-height: 1.4;
}

body.light-mode .changelog li {
    color: #1a1a1a;
}

.changelog li::before {
    content: "✓";
    position: absolute;
    left: 0;
    color: #64ffda;
    font-weight: 700;
}

.feature-preview {
    background: rgba(100, 255, 218, 0.08);
    border: 1px solid rgba(100, 255, 218, 0.25);
    border-radius: 12px;
    padding: 15px;
    margin-top: 15px;
}

.preview-label {
    color: #8b949e;
    font-size: 0.85em;
    margin-bottom: 12px;
    font-weight: 600;
}

.preview-demo {
    position: relative;
    display: inline-block;
    font-size: 1.3em;
    padding-bottom: 100px;
}

.demo-highlight {
    pointer-events: none;
    animation: demoGlow 2s ease-in-out infinite;
}

@keyframes demoGlow {
    0%, 100% { 
        box-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
        transform: translateY(0);
    }
    50% { 
        box-shadow: 0 0 20px rgba(100, 255, 218, 0.6);
        transform: translateY(-2px);
    }
}

.preview-explanation {
    position: absolute;
    top: calc(100% + 15px);
    left: 50%;
    transform: translateX(-50%) scale(0);
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 12px;
    padding: 15px 20px;
    min-width: 180px;
    opacity: 0;
    animation: previewPop 3s ease-in-out infinite;
    pointer-events: none;
    z-index: 10;
}

body.light-mode .preview-explanation {
    background: rgba(255, 255, 255, 0.98);
}

@keyframes previewPop {
    0%, 100% {
        transform: translateX(-50%) scale(0);
        opacity: 0;
    }
    20%, 80% {
        transform: translateX(-50%) scale(1);
        opacity: 1;
    }
}

.preview-ai-icon {
    font-size: 2em;
    margin-bottom: 5px;
    animation: sparkle 1.5s ease-in-out infinite;
}

@keyframes sparkle {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.15) rotate(-8deg); }
    75% { transform: scale(1.15) rotate(8deg); }
}

.preview-text {
    color: #64ffda;
    font-weight: 600;
    font-size: 0.85em;
}

body.light-mode .preview-text {
    color: #0a7a5e;
}

.close-splash-btn {
    background: rgba(100, 255, 218, 0.2);
    border: 1px solid #64ffda;
    color: #64ffda;
    padding: 12px 35px;
    border-radius: 50px;
    font-size: 1em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.close-splash-btn:hover {
    background: rgba(100, 255, 218, 0.3);
    transform: translateY(-2px);
}

/* Horizontal wave loading - teal/cyan color */
.wave-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 300px;
    max-width: 90%;
}

.wave-line {
    width: 100%;
    height: 8px;
    background: rgba(100, 255, 218, 0.2);
    border-radius: 20px;
    position: relative;
    overflow: hidden;
}

.wave-line::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent,
        rgba(100, 255, 218, 0.4),
        #64ffda,
        rgba(100, 255, 218, 0.4),
        transparent
    );
    animation: waveSlide 2.5s ease-in-out infinite; /* Changed from 1.8s to 2.5s */
    box-shadow: 0 0 20px rgba(100, 255, 218, 0.6);
}

body.light-mode .wave-line {
    background: rgba(10, 122, 94, 0.2);
}

body.light-mode .wave-line::before {
    background: linear-gradient(90deg, 
        transparent,
        rgba(10, 122, 94, 0.4),
        #0a7a5e,
        rgba(10, 122, 94, 0.4),
        transparent
    );
    box-shadow: 0 0 20px rgba(10, 122, 94, 0.6);
}

.wave-line:nth-child(1)::before {
    animation-delay: 0s;
}

.wave-line:nth-child(2)::before {
    animation-delay: 0.3s;
}

.wave-line:nth-child(3)::before {
    animation-delay: 0.6s;
}

@keyframes waveSlide {
    0% {
        left: -100%;
    }
    100% {
        left: 100%;
    }
}

/* Smooth typing animation - faster */
.typing-word {
    display: inline;
    opacity: 1 !important;
}

/* Teal glow following text - matches loading color */
.ai-explanation-text {
    position: relative;
}

.word-glow-effect {
    background: linear-gradient(90deg,
        transparent,
        rgba(100, 255, 218, 0.15),
        rgba(100, 255, 218, 0.3),
        rgba(100, 255, 218, 0.15),
        transparent
    );
    padding: 2px 6px;
    border-radius: 4px;
    display: inline;
    box-shadow: 0 0 15px rgba(100, 255, 218, 0.4);
    animation: glowFade 0.6s ease-out forwards;
}

body.light-mode .word-glow-effect {
    background: linear-gradient(90deg,
        transparent,
        rgba(10, 122, 94, 0.12),
        rgba(10, 122, 94, 0.25),
        rgba(10, 122, 94, 0.12),
        transparent
    );
    box-shadow: 0 0 15px rgba(10, 122, 94, 0.4);
}

@keyframes glowFade {
    0% {
        opacity: 0;
        transform: scale(0.98);
    }
    50% {
        opacity: 1;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(1);
    }
}

/* MOBILE OPTIMIZATION */

/* Fix horizontal scrolling */
body, html {
    overflow-x: hidden;
    max-width: 100vw;
}

.main-content {
    overflow-x: hidden;
    max-width: 100vw;
}

/* Chat messages - prevent horizontal scroll */
.chat-messages {
    overflow-x: hidden;
    width: 100%;
    max-width: 100%;
}

.message-bubble {
    max-width: 100%;
    overflow-x: auto;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.code-example, .code-fill {
    overflow-x: auto;
    max-width: 100%;
    -webkit-overflow-scrolling: touch;
}

/* Fix bar charts on mobile */
@media (max-width: 768px) {
    .bar-chart {
        height: 250px;
        padding: 20px 10px 60px 60px;
        gap: 15px;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
    }
    
    .chart-y-labels {
        left: 5px;
        font-size: 0.75em;
    }
    
    .bar-item {
        flex: 0 0 80px;
        min-width: 80px;
        height: 180px;
    }
    
    .bar-label {
        font-size: 0.75em;
        bottom: -40px;
    }
    
    .bar-value {
        font-size: 0.85em;
        top: -30px;
    }
    
    /* Make charts scrollable horizontally on mobile */
    .chart-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    /* Lesson view on mobile */
    .lesson-header-bar {
        padding: 15px 10px;
        flex-direction: column;
        align-items: flex-start;
    }
    
    .lesson-progress-info {
        width: 100%;
        margin-top: 10px;
    }
    
    .tab-switcher {
        width: 100%;
        justify-content: center;
    }
    
    /* Chat container spacing */
    .chat-container {
        padding: 20px 10px;
    }
    
    .message {
        max-width: 100%;
    }
    
    /* Exercise boxes on mobile */
    .exercise-box {
        padding: 15px;
    }
    
    .code-fill, .code-example {
        font-size: 0.85em;
        padding: 15px;
    }
    
    /* MCQ options on mobile */
    .mcq-option {
        padding: 12px 15px;
        font-size: 0.9em;
    }
    
    /* Input blanks on mobile */
    .code-blank {
        min-width: 60px;
        font-size: 0.9em;
    }
    
    /* AI Modal on mobile */
    .ai-explanation-content {
        width: 95%;
        max-height: 85vh;
        padding: 25px 15px;
    }
    
    .ai-keyword-display {
        font-size: 1.5em;
    }
    
    .wave-container {
        width: 250px;
    }
}

@media (max-width: 480px) {
    .dashboard-title {
        font-size: 2em;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .bar-chart {
        height: 220px;
        padding: 15px 5px 50px 50px;
    }
    
    .bar-item {
        flex: 0 0 70px;
        min-width: 70px;
    }
}

/* Improved bar chart for mobile */
.bar-chart {
    display: flex;
    align-items: flex-end;
    gap: 20px;
    height: 320px;
    padding: 20px 20px 60px 80px;
    justify-content: center;
    position: relative;
    background: 
        linear-gradient(90deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px),
        linear-gradient(0deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px);
    background-size: 50px 35px;
}

.chart-y-labels {
    position: absolute;
    left: 10px;
    top: 20px;
    bottom: 60px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    color: #64ffda;
    font-size: 0.85em;
    font-weight: 600;
    z-index: 10;
}

body.light-mode .chart-y-labels {
    color: #0a7a5e;
}

.chart-y-labels span {
    background: rgba(10, 10, 10, 0.8);
    padding: 4px 8px;
    border-radius: 6px;
    border: 1px solid rgba(100, 255, 218, 0.3);
}

body.light-mode .chart-y-labels span {
    background: rgba(245, 245, 245, 0.9);
    border-color: rgba(10, 122, 94, 0.3);
}

.bar-item {
    flex: 0 1 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
    position: relative;
    height: 240px;
    justify-content: flex-end;
    padding-bottom: 0;
}

.bar {
    width: 100%;
    background: linear-gradient(180deg, #64ffda 0%, #00d4ff 100%);
    border-radius: 12px 12px 0 0;
    transition: height 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    box-shadow: 
        0 -5px 30px rgba(100, 255, 218, 0.3),
        inset 0 -2px 10px rgba(255, 255, 255, 0.3);
    min-height: 0px;
    max-height: 100%;
    border: 2px solid rgba(100, 255, 218, 0.4);
    border-bottom: none;
}

.bar-value {
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    color: #64ffda;
    font-weight: 700;
    font-size: 0.95em;
    white-space: nowrap;
    background: rgba(10, 10, 10, 0.9);
    padding: 6px 12px;
    border-radius: 8px;
    border: 1px solid rgba(100, 255, 218, 0.3);
    box-shadow: 0 4px 15px rgba(100, 255, 218, 0.2);
}

body.light-mode .bar-value {
    color: #0a7a5e;
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(10, 122, 94, 0.3);
}

.bar-label {
    color: #8b949e;
    font-size: 0.85em;
    text-align: center;
    word-break: break-word;
    max-width: 100%;
    position: absolute;
    bottom: -45px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    line-height: 1.2;
}

/* OPTIMIZED MOBILE PROGRESS BARS */
@media (max-width: 768px) {
    .bar-chart {
        height: 260px;
        padding: 15px 5px 50px 50px;
        gap: 10px;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        justify-content: flex-start;
        scroll-padding-left: 50px;
    }
    
    .bar-chart::-webkit-scrollbar {
        height: 6px;
    }
    
    .bar-chart::-webkit-scrollbar-track {
        background: rgba(100, 255, 218, 0.1);
        border-radius: 10px;
        margin: 0 50px 0 10px;
    }
    
    .bar-chart::-webkit-scrollbar-thumb {
        background: rgba(100, 255, 218, 0.4);
        border-radius: 10px;
    }
    
    .bar-chart::before {
        left: 48px;
        bottom: 45px;
        height: calc(100% - 60px);
    }
    
    .bar-chart::after {
        left: 48px;
        bottom: 45px;
        width: calc(100% - 55px);
    }
    
    .chart-y-labels {
        left: 5px;
        font-size: 0.65em;
        bottom: 50px;
    }
    
    .chart-y-labels span {
        padding: 2px 4px;
        font-size: 0.9em;
    }
    
    .bar-item {
        flex: 0 0 65px;
        min-width: 65px;
        height: 180px;
    }
    
    .bar {
        border-radius: 8px 8px 0 0;
    }
    
    .bar-value {
        font-size: 0.75em;
        top: -28px;
        padding: 4px 8px;
    }
    
    .bar-label {
        font-size: 0.68em;
        bottom: -38px;
        max-width: 65px;
        line-height: 1.1;
    }
}

@media (max-width: 480px) {
    .bar-chart {
        height: 240px;
        padding: 12px 5px 45px 45px;
        gap: 8px;
    }
    
    .bar-item {
        flex: 0 0 58px;
        min-width: 58px;
        height: 165px;
    }
    
    .bar-value {
        font-size: 0.7em;
        top: -26px;
        padding: 3px 6px;
    }
    
    .bar-label {
        font-size: 0.65em;
        bottom: -36px;
        max-width: 58px;
    }
}

/* Smooth reveal with leading glow trail */
.word-reveal-container {
    position: relative;
    display: inline;
}

.word-glow-trail {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 120%;
    background: linear-gradient(90deg,
        rgba(100, 255, 218, 0.6),
        rgba(100, 255, 218, 0.4),
        rgba(100, 255, 218, 0.2),
        transparent
    );
    filter: blur(8px);
    pointer-events: none;
    z-index: 1;
    animation: glowSweep 0.8s ease-out forwards;
}

body.light-mode .word-glow-trail {
    background: linear-gradient(90deg,
        rgba(10, 122, 94, 0.5),
        rgba(10, 122, 94, 0.3),
        rgba(10, 122, 94, 0.15),
        transparent
    );
}

@keyframes glowSweep {
    0% {
        width: 0;
        opacity: 0;
    }
    20% {
        opacity: 1;
    }
    100% {
        width: 150%;
        opacity: 0;
    }
}

.word-reveal-text {
    position: relative;
    display: inline;
    opacity: 0;
    z-index: 2;
    animation: fadeInWord 0.6s ease-out forwards;
    animation-delay: 0.15s;
}

@keyframes fadeInWord {
    0% {
        opacity: 0;
        filter: blur(4px);
    }
    100% {
        opacity: 1;
        filter: blur(0);
    }
}

/* Enhanced Code Editor Interface */
.practice-workspace {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    height: calc(100vh - 250px);
    min-height: 500px;
}

.code-panel, .output-panel {
    background: rgba(30, 30, 30, 0.8);
    border: 2px solid rgba(100, 255, 218, 0.2);
    border-radius: 15px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

body.light-mode .code-panel,
body.light-mode .output-panel {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(10, 122, 94, 0.3);
}

.panel-header {
    background: rgba(20, 20, 20, 0.95);
    padding: 15px 25px;
    border-bottom: 2px solid rgba(100, 255, 218, 0.2);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

body.light-mode .panel-header {
    background: rgba(240, 240, 240, 0.95);
    border-bottom-color: rgba(10, 122, 94, 0.2);
}

.panel-title {
    color: #64ffda;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.1em;
}

body.light-mode .panel-title {
    color: #0a7a5e;
}

.run-button {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.2), rgba(0, 212, 255, 0.2));
    border: 2px solid #64ffda;
    color: #64ffda;
    padding: 10px 28px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: 700;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 1em;
    box-shadow: 0 4px 15px rgba(100, 255, 218, 0.2);
}

.run-button:hover {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.3), rgba(0, 212, 255, 0.3));
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(100, 255, 218, 0.3);
}

.run-button:active {
    transform: translateY(0);
}

body.light-mode .run-button {
    background: linear-gradient(135deg, rgba(10, 122, 94, 0.2), rgba(0, 168, 150, 0.2));
    border-color: #0a7a5e;
    color: #0a7a5e;
}

.code-editor-area {
    flex: 1;
    padding: 0;
    overflow: hidden;
    position: relative;
}

.code-editor-area textarea {
    width: 100%;
    height: 100%;
    background: #0d1117;
    color: #e6edf3;
    border: none;
    padding: 25px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: 15px;
    line-height: 1.8;
    resize: none;
    outline: none;
    tab-size: 4;
}

body.light-mode .code-editor-area textarea {
    background: #ffffff;
    color: #24292f;
}

.output-content {
    flex: 1;
    padding: 0;
    overflow: hidden;
    background: #ffffff;
}

.output-frame {
    width: 100%;
    height: 100%;
    border: none;
    background: white;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .practice-workspace {
        grid-template-columns: 1fr;
        height: auto;
        gap: 15px;
    }
    
    .code-panel, .output-panel {
        min-height: 350px;
    }
    
    .panel-header {
        padding: 12px 15px;
    }
    
    .run-button {
        padding: 8px 20px;
        font-size: 0.9em;
    }
}

#languageDetector {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 8px 16px;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 20px;
    font-size: 0.85em;
}

body.light-mode #languageDetector {
    background: rgba(10, 122, 94, 0.05);
    border-color: rgba(10, 122, 94, 0.2);
}

#detectedLang {
    font-weight: 700;
    transition: color 0.3s ease;
}

@media (max-width: 768px) {
    #languageDetector {
        font-size: 0.75em;
        padding: 6px 12px;
    }
}

.forgot-link {
    text-align: center;
    margin-top: 15px;
    color: #8b949e;
    font-size: 0.9em;
}

.forgot-link a {
    color: #64ffda;
    text-decoration: none;
    cursor: pointer;
    font-weight: 600;
    transition: color 0.3s ease;
}

.forgot-link a:hover {
    color: #00d4ff;
}

body.light-mode .forgot-link a {
    color: #0a7a5e;
}

.verification-input {
    width: 100%;
    padding: 15px 20px;
    background: rgba(100, 255, 218, 0.05);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 15px;
    color: #64ffda;
    font-size: 1.2em;
    text-align: center;
    letter-spacing: 8px;
    font-weight: 700;
    font-family: 'Courier New', monospace;
}

body.light-mode .verification-input {
    background: rgba(10, 122, 94, 0.05);
    color: #0a7a5e;
}

.auth-container .auth-form {
    display: none;
}

.auth-container .auth-form.active {
    display: block !important;
    animation: fadeIn 0.3s ease;
}

.otp-container {
    display: flex;
    gap: 8px;
    justify-content: center;
    margin: 20px 0;
    flex-wrap: nowrap; /* Prevent wrapping */
}

.otp-input {
    width: 45px;
    height: 50px;
    text-align: center;
    font-size: 20px;
    font-weight: 700;
    font-family: 'Courier New', monospace;
    background: rgba(100, 255, 218, 0.05);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 10px;
    color: #64ffda;
    outline: none;
    transition: all 0.3s ease;
}

.otp-input:focus {
    border-color: #64ffda;
    background: rgba(100, 255, 218, 0.15);
    transform: scale(1.08);
    box-shadow: 0 0 20px rgba(100, 255, 218, 0.4);
}

body.light-mode .otp-input {
    background: rgba(10, 122, 94, 0.05);
    border-color: rgba(10, 122, 94, 0.3);
    color: #0a7a5e;
}

body.light-mode .otp-input:focus {
    border-color: #0a7a5e;
    background: rgba(10, 122, 94, 0.15);
    box-shadow: 0 0 20px rgba(10, 122, 94, 0.4);
}

@media (max-width: 480px) {
    .otp-input {
        width: 38px;
        height: 42px;
        font-size: 18px;
    }
    
    .otp-container {
        gap: 6px;
    }
}

.lesson-view {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: #0a0a0a;
    z-index: 2000;
    /* FIX: Prevent background issues */
    overflow: hidden;
}

body.light-mode .lesson-view {
    background: #f5f5f5;
}

/* FIX: Ensure lesson content scrolls properly */
.lesson-content {
    flex: 1;
    overflow-y: auto;
    padding: 30px;
    background: #0a0a0a;
    -webkit-overflow-scrolling: touch;
}

body.light-mode .lesson-content {
    background: #f5f5f5;
}

/* STREAK BROKEN MODAL */
.streak-broken-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 5000;
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
}

.streak-broken-modal.active {
    background: rgba(0, 0, 0, 0.8);
    opacity: 1;
    pointer-events: all;
}

.streak-broken-content {
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(255, 100, 100, 0.3);
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    max-width: 400px;
    transform: scale(0.8);
    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.streak-broken-modal.active .streak-broken-content {
    transform: scale(1);
}

body.light-mode .streak-broken-content {
    background: rgba(255, 255, 255, 0.98);
}

.streak-broken-icon {
    font-size: 4em;
    margin-bottom: 20px;
}

.streak-broken-title {
    color: #ff6b6b;
    font-size: 2em;
    margin-bottom: 15px;
}

.streak-broken-text {
    color: #8b949e;
    font-size: 1.1em;
    margin-bottom: 10px;
}

.streak-broken-encourage {
    color: #64ffda;
    font-size: 1em;
    margin-bottom: 25px;
}

body.light-mode .streak-broken-encourage {
    color: #0a7a5e;
}

.close-broken-btn {
    background: rgba(100, 255, 218, 0.2);
    border: 2px solid #64ffda;
    color: #64ffda;
    padding: 12px 30px;
    border-radius: 50px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.close-broken-btn:hover {
    background: rgba(100, 255, 218, 0.3);
    transform: translateY(-2px);
}

/* INLINE AI POPUP */
.inline-ai-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0);
    backdrop-filter: blur(0px);
    z-index: 6000;
    transition: all 0.3s ease;
}

.inline-ai-overlay.active {
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(8px);
}

.inline-ai-popup {
    position: fixed;
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.4);
    border-radius: 15px;
    padding: 20px;
    max-width: 400px;
    min-width: 300px;
    z-index: 6001;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

body.light-mode .inline-ai-popup {
    background: rgba(255, 255, 255, 0.98);
    border-color: rgba(10, 122, 94, 0.4);
}

.inline-ai-arrow {
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid rgba(100, 255, 218, 0.4);
}

body.light-mode .inline-ai-arrow {
    border-top-color: rgba(10, 122, 94, 0.4);
}

.inline-ai-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(100, 255, 218, 0.2);
}

.inline-ai-keyword {
    color: #64ffda;
    font-size: 1.3em;
    font-weight: 700;
}

body.light-mode .inline-ai-keyword {
    color: #0a7a5e;
}

.inline-ai-close {
    background: rgba(255, 100, 100, 0.2);
    border: 1px solid rgba(255, 100, 100, 0.3);
    color: #ff6b6b;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    font-size: 1.5em;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    line-height: 1;
}

.inline-ai-close:hover {
    background: rgba(255, 100, 100, 0.3);
    transform: rotate(90deg);
}

.inline-ai-content {
    color: #e0e0e0;
    line-height: 1.7;
    font-size: 0.95em;
}

body.light-mode .inline-ai-content {
    color: #1a1a1a;
}

.inline-ai-loading {
    padding: 20px 0;
}

.inline-ai-text {
    animation: fadeIn 0.4s ease;
}

.inline-ai-text p {
    margin-bottom: 10px;
}

@keyframes fadeInWord {
    from {
        opacity: 0;
        transform: translateY(5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ENHANCED MOBILE AI POPUP */
@media (max-width: 768px) {
    .inline-ai-popup {
        position: fixed !important;
        left: 50% !important;
        top: 50% !important;
        transform: translate(-50%, -50%) scale(0.9) !important;
        width: 90vw !important;
        max-width: 90vw !important;
        max-height: 70vh;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .inline-ai-popup.active {
        transform: translate(-50%, -50%) scale(1) !important;
    }
    
    .inline-ai-arrow {
        display: none !important;
    }
    
    .inline-ai-header {
        padding: 15px;
    }
    
    .inline-ai-keyword {
        font-size: 1.3em;
    }
    
    .inline-ai-close {
        width: 32px;
        height: 32px;
        font-size: 1.6em;
    }
    
    .inline-ai-content {
        padding: 0 15px 15px 15px;
    }
    
    .inline-ai-text {
        font-size: 0.95em;
        line-height: 1.7;
    }
    
    /* Better wave loading on mobile */
    .wave-container {
        width: 200px;
    }
    
    .wave-line {
        height: 6px;
    }
}

/* WORD REVEAL ANIMATIONS FOR AI POPUP */
@keyframes glowSweepInline {
    0% {
        width: 0;
        opacity: 0;
    }
    20% {
        opacity: 1;
    }
    100% {
        width: 150%;
        opacity: 0;
    }
}

@keyframes fadeInWordInline {
    0% {
        opacity: 0;
        filter: blur(6px);
        transform: translateY(5px);
    }
    50% {
        opacity: 0.5;
        filter: blur(3px);
    }
    100% {
        opacity: 1;
        filter: blur(0);
        transform: translateY(0);
    }
}

/* ENHANCED GENERATIVE AI WORD REVEAL */
.word-reveal-container {
    position: relative;
    display: inline-block;
    margin: 0 1px;
}

.word-glow-outer,
.word-glow-inner,
.word-glow-core {
    position: absolute;
    left: -15%;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 160%;
    pointer-events: none;
    border-radius: 50%;
}

/* Outer glow - soft and wide */
.word-glow-outer {
    background: radial-gradient(ellipse at left, 
        rgba(100, 255, 218, 0.4), 
        rgba(100, 255, 218, 0.2), 
        rgba(0, 212, 255, 0.15),
        transparent 75%);
    filter: blur(20px);
    animation: glowSweepOuter 1s ease-out forwards;
    z-index: 1;
}

/* Inner glow - medium intensity */
.word-glow-inner {
    background: radial-gradient(ellipse at left, 
        rgba(100, 255, 218, 0.7), 
        rgba(100, 255, 218, 0.4), 
        rgba(0, 212, 255, 0.25),
        transparent 65%);
    filter: blur(12px);
    animation: glowSweepInner 0.85s ease-out forwards;
    animation-delay: 0.05s;
    z-index: 2;
}

/* Core glow - sharp and bright */
.word-glow-core {
    background: linear-gradient(90deg, 
        rgba(255, 255, 255, 0.9),
        rgba(100, 255, 218, 0.9), 
        rgba(100, 255, 218, 0.6), 
        rgba(0, 212, 255, 0.4),
        transparent);
    filter: blur(6px);
    animation: glowSweepCore 0.7s ease-out forwards;
    animation-delay: 0.1s;
    z-index: 3;
}

.word-reveal-text-inline {
    position: relative;
    display: inline;
    z-index: 4;
    opacity: 0;
    filter: blur(8px);
    animation: fadeInWordGenAI 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: 0.15s;
}

/* Enhanced Animations */
@keyframes glowSweepOuter {
    0% {
        width: 0;
        opacity: 0;
    }
    20% {
        opacity: 1;
    }
    40% {
        opacity: 0.8;
    }
    100% {
        width: 200%;
        opacity: 0;
    }
}

@keyframes glowSweepInner {
    0% {
        width: 0;
        opacity: 0;
    }
    30% {
        opacity: 1;
    }
    50% {
        opacity: 0.9;
    }
    100% {
        width: 180%;
        opacity: 0;
    }
}

@keyframes glowSweepCore {
    0% {
        width: 0;
        opacity: 0;
    }
    40% {
        opacity: 1;
    }
    60% {
        opacity: 0.8;
    }
    100% {
        width: 160%;
        opacity: 0;
    }
}

@keyframes fadeInWordGenAI {
    0% {
        opacity: 0;
        filter: blur(10px) brightness(0.5);
        transform: translateY(10px) scale(0.9);
        text-shadow: 0 0 0 transparent;
    }
    30% {
        opacity: 0.3;
        filter: blur(6px) brightness(1.2);
        text-shadow: 0 0 15px rgba(100, 255, 218, 0.8);
    }
    60% {
        opacity: 0.7;
        filter: blur(3px) brightness(1.3);
        text-shadow: 0 0 20px rgba(100, 255, 218, 1);
    }
    80% {
        filter: blur(1px) brightness(1.1);
        text-shadow: 0 0 10px rgba(100, 255, 218, 0.6);
    }
    100% {
        opacity: 1;
        filter: blur(0) brightness(1);
        transform: translateY(0) scale(1);
        text-shadow: 0 0 5px rgba(100, 255, 218, 0.3);
    }
}

/* Light mode adjustments */
body.light-mode .word-glow-outer {
    background: radial-gradient(ellipse at left, 
        rgba(10, 122, 94, 0.4), 
        rgba(10, 122, 94, 0.2), 
        rgba(0, 168, 150, 0.15),
        transparent 75%);
}

body.light-mode .word-glow-inner {
    background: radial-gradient(ellipse at left, 
        rgba(10, 122, 94, 0.7), 
        rgba(10, 122, 94, 0.4), 
        rgba(0, 168, 150, 0.25),
        transparent 65%);
}

body.light-mode .word-glow-core {
    background: linear-gradient(90deg, 
        rgba(255, 255, 255, 0.9),
        rgba(10, 122, 94, 0.9), 
        rgba(10, 122, 94, 0.6), 
        rgba(0, 168, 150, 0.4),
        transparent);
}

body.light-mode .word-reveal-text-inline {
    animation: fadeInWordGenAILight 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: 0.15s;
}

@keyframes fadeInWordGenAILight {
    0% {
        opacity: 0;
        filter: blur(10px) brightness(1.5);
        transform: translateY(10px) scale(0.9);
        text-shadow: 0 0 0 transparent;
    }
    30% {
        opacity: 0.3;
        filter: blur(6px) brightness(1.2);
        text-shadow: 0 0 15px rgba(10, 122, 94, 0.8);
    }
    60% {
        opacity: 0.7;
        filter: blur(3px) brightness(1.1);
        text-shadow: 0 0 20px rgba(10, 122, 94, 1);
    }
    80% {
        filter: blur(1px) brightness(1);
        text-shadow: 0 0 10px rgba(10, 122, 94, 0.6);
    }
    100% {
        opacity: 1;
        filter: blur(0) brightness(1);
        transform: translateY(0) scale(1);
        text-shadow: 0 0 5px rgba(10, 122, 94, 0.3);
    }
}
/* Light mode adjustments */
body.light-mode .word-glow-outer {
    background: radial-gradient(ellipse at left, 
        rgba(10, 122, 94, 0.3), 
        rgba(10, 122, 94, 0.15), 
        transparent 70%);
}

body.light-mode .word-glow-inner {
    background: radial-gradient(ellipse at left, 
        rgba(10, 122, 94, 0.5), 
        rgba(10, 122, 94, 0.25), 
        transparent 60%);
}

body.light-mode .word-glow-core {
    background: linear-gradient(90deg, 
        rgba(10, 122, 94, 0.8), 
        rgba(10, 122, 94, 0.4), 
        transparent);
}

/* Enhanced typing indicator animation */
.typing-indicator {
    display: flex;
    gap: 6px;
    padding: 15px 20px;
}

.typing-dot {
    width: 10px;
    height: 10px;
    background: #64ffda;
    border-radius: 50%;
    animation: typingBounce 1.4s infinite;
    box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
}

body.light-mode .typing-dot {
    background: #0a7a5e;
    box-shadow: 0 0 10px rgba(10, 122, 94, 0.5);
}

.typing-dot:nth-child(1) {
    animation-delay: 0s;
}

.typing-dot:nth-child(2) {
    animation-delay: 0.2s;
}

.typing-dot:nth-child(3) {
    animation-delay: 0.4s;
}

@keyframes typingBounce {
    0%, 60%, 100% {
        transform: translateY(0);
        opacity: 0.5;
    }
    30% {
        transform: translateY(-12px);
        opacity: 1;
        box-shadow: 0 0 20px rgba(100, 255, 218, 0.8);
    }
}

/* Smooth message appearance */
.message {
    transition: all 0.4s ease;
}

.message-bubble {
    overflow: visible;
}

/* Make sure chat messages container is smooth */
.chat-messages {
    scroll-behavior: smooth;
}

/* POPUP POSITIONING CLASSES */
.popup-above .inline-ai-arrow {
    bottom: -10px;
    top: auto;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid rgba(100, 255, 218, 0.4);
    border-bottom: none;
}

.popup-below .inline-ai-arrow {
    top: -10px;
    bottom: auto;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid rgba(100, 255, 218, 0.4);
    border-top: none;
}

body.light-mode .popup-above .inline-ai-arrow {
    border-top-color: rgba(10, 122, 94, 0.4);
}

body.light-mode .popup-below .inline-ai-arrow {
    border-bottom-color: rgba(10, 122, 94, 0.4);
}

/* ENHANCED PROFESSIONAL AI WORD REVEAL */
.word-reveal-container {
    position: relative;
    display: inline-block;
    margin: 0 1px;
}

.word-glow-outer,
.word-glow-inner,
.word-glow-core {
    position: absolute;
    left: -10%;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 140%;
    pointer-events: none;
    border-radius: 50%;
}

/* Outer glow - soft and wide */
.word-glow-outer {
    background: radial-gradient(ellipse at left, 
        rgba(100, 255, 218, 0.3), 
        rgba(100, 255, 218, 0.15), 
        transparent 70%);
    filter: blur(15px);
    animation: glowSweepOuter 0.8s ease-out forwards;
    z-index: 1;
}

/* Inner glow - medium intensity */
.word-glow-inner {
    background: radial-gradient(ellipse at left, 
        rgba(100, 255, 218, 0.5), 
        rgba(100, 255, 218, 0.25), 
        transparent 60%);
    filter: blur(10px);
    animation: glowSweepInner 0.7s ease-out forwards;
    animation-delay: 0.05s;
    z-index: 2;
}

/* Core glow - sharp and bright */
.word-glow-core {
    background: linear-gradient(90deg, 
        rgba(100, 255, 218, 0.8), 
        rgba(100, 255, 218, 0.4), 
        transparent);
    filter: blur(5px);
    animation: glowSweepCore 0.6s ease-out forwards;
    animation-delay: 0.1s;
    z-index: 3;
}

.word-reveal-text-inline {
    position: relative;
    display: inline;
    z-index: 4;
    opacity: 0;
    filter: blur(5px);
    animation: fadeInWordSmooth 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
    animation-delay: 0.2s;
}

/* Animations */
@keyframes glowSweepOuter {
    0% {
        width: 0;
        opacity: 0;
    }
    30% {
        opacity: 1;
    }
    100% {
        width: 180%;
        opacity: 0;
    }
}

@keyframes glowSweepInner {
    0% {
        width: 0;
        opacity: 0;
    }
    40% {
        opacity: 1;
    }
    100% {
        width: 160%;
        opacity: 0;
    }
}

@keyframes glowSweepCore {
    0% {
        width: 0;
        opacity: 0;
    }
    50% {
        opacity: 1;
    }
    100% {
        width: 140%;
        opacity: 0;
    }
}

@keyframes fadeInWordSmooth {
    0% {
        opacity: 0;
        filter: blur(8px);
        transform: translateY(8px) scale(0.95);
    }
    60% {
        opacity: 0.8;
        filter: blur(2px);
    }
    100% {
        opacity: 1;
        filter: blur(0);
        transform: translateY(0) scale(1);
    }
}

/* Light mode adjustments */
body.light-mode .word-glow-outer {
    background: radial-gradient(ellipse at left, 
        rgba(10, 122, 94, 0.3), 
        rgba(10, 122, 94, 0.15), 
        transparent 70%);
}

body.light-mode .word-glow-inner {
    background: radial-gradient(ellipse at left, 
        rgba(10, 122, 94, 0.5), 
        rgba(10, 122, 94, 0.25), 
        transparent 60%);
}

body.light-mode .word-glow-core {
    background: linear-gradient(90deg, 
        rgba(10, 122, 94, 0.8), 
        rgba(10, 122, 94, 0.4), 
        transparent);
}

/* MOBILE LEARN SECTION - NO HORIZONTAL MOVEMENT */
@media (max-width: 768px) {
    .lesson-content {
        overflow-x: hidden !important;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        width: 100%;
        max-width: 100vw;
    }
    
    .chat-container {
        overflow-x: hidden !important;
        width: 100%;
        max-width: 100%;
    }
    
    .chat-messages {
        overflow-x: hidden !important;
        width: 100%;
        max-width: 100%;
    }
    
    .message {
        max-width: 100%;
        overflow-x: hidden;
    }
    
    .message-bubble {
        max-width: 100%;
        overflow-x: auto;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    .code-example,
    .code-fill {
        overflow-x: auto;
        max-width: 100%;
        -webkit-overflow-scrolling: touch;
    }
}

/* MOBILE SWIPEABLE PROGRESS CAROUSEL */
.mobile-progress-carousel {
    display: none;
    width: 100%;
    overflow: hidden;
    padding: 20px 0;
}

@media (max-width: 768px) {
    .mobile-progress-carousel {
        display: block;
    }
}

.carousel-container {
    overflow: hidden;
    border-radius: 20px;
    background: rgba(30, 30, 30, 0.4);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 25px 20px;
}

body.light-mode .carousel-container {
    background: rgba(255, 255, 255, 0.6);
    border-color: rgba(10, 122, 94, 0.2);
}

.carousel-track {
    display: flex;
    transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    touch-action: pan-y;
}

.carousel-slide {
    min-width: 100%;
    padding: 10px;
}

.carousel-title {
    color: #64ffda;
    font-size: 1.8em;
    text-align: center;
    margin-bottom: 25px;
    text-shadow: 0 0 20px rgba(100, 255, 218, 0.3);
}

body.light-mode .carousel-title {
    color: #0a7a5e;
}

.mobile-course-bar {
    margin-bottom: 20px;
}

.mobile-course-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.mobile-course-name {
    color: #e0e0e0;
    font-weight: 600;
    font-size: 0.95em;
}

body.light-mode .mobile-course-name {
    color: #1a1a1a;
}

.mobile-course-percent {
    color: #64ffda;
    font-weight: 700;
    font-size: 0.95em;
}

body.light-mode .mobile-course-percent {
    color: #0a7a5e;
}

.mobile-progress-bar {
    height: 12px;
    background: rgba(100, 255, 218, 0.1);
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid rgba(100, 255, 218, 0.2);
}

.mobile-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #64ffda, #00d4ff);
    border-radius: 10px;
    transition: width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
}

body.light-mode .mobile-progress-fill {
    background: linear-gradient(90deg, #0a7a5e, #00a896);
}

.carousel-dots {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

.carousel-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(100, 255, 218, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
}

.carousel-dot.active {
    background: #64ffda;
    width: 30px;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
}

body.light-mode .carousel-dot {
    background: rgba(10, 122, 94, 0.3);
}

body.light-mode .carousel-dot.active {
    background: #0a7a5e;
}

/* Custom Logout Modal */
.custom-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    z-index: 99999;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease;
}

.custom-modal.active {
    display: flex;
}

.custom-modal-content {
    background: #1a1f35;
    border: 2px solid #64ffda;
    border-radius: 20px;
    padding: 40px;
    max-width: 400px;
    text-align: center;
    animation: slideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    box-shadow: 0 20px 60px rgba(100, 255, 218, 0.3);
}

.custom-modal-icon {
    font-size: 60px;
    margin-bottom: 20px;
    animation: wave 0.6s ease;
}

@keyframes wave {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
}

.custom-modal-title {
    font-size: 24px;
    color: #64ffda;
    margin-bottom: 10px;
    font-weight: 600;
}

.custom-modal-text {
    color: #8b949e;
    font-size: 16px;
    margin-bottom: 30px;
}

.custom-modal-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
}

.custom-modal-btn {
    padding: 12px 30px;
    border-radius: 10px;
    border: none;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    flex: 1;
}

.cancel-btn {
    background: transparent;
    color: #8b949e;
    border: 2px solid #8b949e;
}

.cancel-btn:hover {
    background: #8b949e;
    color: #0d1117;
    transform: translateY(-2px);
}

.confirm-btn {
    background: #ff6b6b;
    color: white;
    border: 2px solid #ff6b6b;
}

.confirm-btn:hover {
    background: #ff5252;
    border-color: #ff5252;
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);
}

@keyframes slideUp {
    from {
        transform: translateY(50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* ==================== ENHANCED LEARNING INTERFACE ==================== */

/* Learning Container with Preview */
.lesson-container {
    display: flex;
    gap: 20px;
    margin-top: 20px;
}

.lesson-main {
    flex: 1;
}

.preview-panel {
    width: 350px;
    background: rgba(255, 255, 255, 0.03);
    border: 2px solid #64ffda;
    border-radius: 15px;
    padding: 20px;
    position: sticky;
    top: 20px;
    max-height: calc(100vh - 40px);
    overflow-y: auto;
}

.preview-panel h3 {
    color: #64ffda;
    font-size: 18px;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.preview-content {
    background: #0d1117;
    border: 1px solid #30363d;
    border-radius: 10px;
    padding: 15px;
    min-height: 200px;
}

.preview-iframe {
    width: 100%;
    height: 300px;
    border: none;
    border-radius: 8px;
    background: white;
}

/* Enhanced Chat Messages */
.chat-message {
    margin-bottom: 20px;
    animation: messageSlide 0.4s ease;
}

@keyframes messageSlide {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.bot-message .message-content {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.1), rgba(100, 255, 218, 0.05));
    border: 1px solid rgba(100, 255, 218, 0.3);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 4px 15px rgba(100, 255, 218, 0.1);
}

/* Enhanced Code Examples */
.code-example {
    margin: 15px 0;
    position: relative;
    border-radius: 10px;
    overflow: hidden;
    background: #0d1117;
    border: 1px solid #30363d;
}

.code-example::before {
    content: 'Code Example';
    display: block;
    background: #161b22;
    padding: 8px 15px;
    font-size: 12px;
    color: #8b949e;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.code-example code {
    display: block;
    padding: 20px;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    line-height: 1.6;
    color: #c9d1d9;
    overflow-x: auto;
}

/* Try It Button */
.try-it-btn {
    background: linear-gradient(135deg, #64ffda, #00d9ff);
    color: #0d1117;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 10px;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.try-it-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.4);
}

/* Interactive Demo Container */
.demo-container {
    background: white;
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
    border: 2px solid #64ffda;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .lesson-container {
        flex-direction: column;
    }
    
    .preview-panel {
        width: 100%;
        position: relative;
        top: 0;
        max-height: none;
    }
}

/* ==================== LIGHT MODE FIXES ==================== */

body.light-mode {
    background: #ffffff;
    color: #1a1f35;
}

body.light-mode .dashboard,
body.light-mode .lesson-view,
body.light-mode .language-selector,
body.light-mode .settings-menu,
body.light-mode .profile-card {
    background: #f8f9fa;
    color: #1a1f35;
}

body.light-mode h1,
body.light-mode h2,
body.light-mode h3,
body.light-mode h4,
body.light-mode p,
body.light-mode span,
body.light-mode .stat-label,
body.light-mode .course-desc,
body.light-mode .lesson-title {
    color: #1a1f35 !important;
}

body.light-mode .bot-message .message-content {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.15), rgba(100, 255, 218, 0.08));
    border: 1px solid rgba(0, 150, 136, 0.3);
    color: #1a1f35;
}

body.light-mode .code-example {
    background: #f6f8fa;
    border: 1px solid #d0d7de;
}

body.light-mode .code-example::before {
    background: #e8ecef;
    color: #57606a;
}

body.light-mode .code-example code {
    color: #24292f;
}

body.light-mode .keyword-highlight {
    color: #0969da !important;
    background: rgba(9, 105, 218, 0.1);
}

body.light-mode .preview-panel {
    background: rgba(0, 0, 0, 0.03);
    border: 2px solid #00968a;
}

body.light-mode .preview-content {
    background: #ffffff;
    border: 1px solid #d0d7de;
}

body.light-mode .course-card,
body.light-mode .language-card {
    background: white;
    color: #1a1f35;
    border: 1px solid #d0d7de;
}

body.light-mode .sidebar {
    background: #f8f9fa;
    border-right: 1px solid #d0d7de;
}

body.light-mode .nav-item {
    color: #1a1f35;
}

body.light-mode .nav-item:hover {
    background: rgba(0, 150, 136, 0.1);
}

/* ==================== NOTIFICATION TOAST ==================== */
.notification-toast {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #1a1f35;
    color: white;
    padding: 16px 24px;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    gap: 12px;
    z-index: 100000;
    transform: translateX(400px);
    opacity: 0;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    border: 2px solid #64ffda;
    max-width: 400px;
    font-size: 15px;
    font-weight: 500;
}

.notification-toast.show {
    transform: translateX(0);
    opacity: 1;
}

.notification-icon {
    font-size: 24px;
    flex-shrink: 0;
}

.notification-message {
    flex: 1;
    line-height: 1.4;
}

.notification-success {
    border-color: #64ffda;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.1), rgba(100, 255, 218, 0.05));
}

.notification-error {
    border-color: #ff6b6b;
    background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(255, 107, 107, 0.05));
}

.notification-warning {
    border-color: #ffa500;
    background: linear-gradient(135deg, rgba(255, 165, 0, 0.1), rgba(255, 165, 0, 0.05));
}

.notification-info {
    border-color: #64b5f6;
    background: linear-gradient(135deg, rgba(100, 181, 246, 0.1), rgba(100, 181, 246, 0.05));
}

/* Light Mode */
body.light-mode .notification-toast {
    background: white;
    color: #1a1f35;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}

/* MOBILE STATS CAROUSEL */
.mobile-stats-carousel {
    display: none;
}

@media (max-width: 768px) {
    .stats-grid {
        display: none;
    }
    
    .mobile-stats-carousel {
        display: block;
        width: 100%;
        overflow: hidden;
        padding: 0;
        margin-bottom: 50px;
    }
    
    .stats-carousel-track {
        display: flex;
        transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        touch-action: pan-y;
    }
    
    .stats-carousel-slide {
        min-width: 100%;
        padding: 0 10px;
    }

    /* Ensure stat cards in carousel are always visible */
    .mobile-stats-carousel .stat-card {
        opacity: 1 !important;
        transform: none !important;
    }

    .stats-carousel-dots {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
    }
    
    .stats-carousel-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: rgba(100, 255, 218, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .stats-carousel-dot.active {
        background: #64ffda;
        width: 30px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
    }
    
    body.light-mode .stats-carousel-dot {
        background: rgba(10, 122, 94, 0.3);
    }
    
    body.light-mode .stats-carousel-dot.active {
        background: #0a7a5e;
    }
}

/* FIX PRACTICE SECTION ON MOBILE */
@media (max-width: 768px) {
    .panel-header {
        flex-direction: column;
        gap: 10px;
        align-items: stretch;
    }
    
    #languageDetector {
        order: 1;
        width: 100%;
        justify-content: center;
    }
    
    .run-button {
        order: 2;
        width: 100%;
        justify-content: center;
    }
}

/* FIX SETTINGS LOGOUT BUTTON ON MOBILE */
@media (max-width: 768px) {
    .account-header {
        flex-direction: column;
        gap: 20px;
        align-items: stretch;
    }
    
    .account-info {
        width: 100%;
        justify-content: center;
    }
    
    .logout-btn {
        width: 100%;
        padding: 15px 30px;
    }
}

/* FIX PROGRESS BARS ALIGNMENT */
.bar-chart {
    display: flex;
    align-items: flex-end;
    gap: 20px;
    height: 320px;
    padding: 20px 20px 60px 90px; /* Increased left padding */
    justify-content: center;
    position: relative;
    background: 
        linear-gradient(90deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px),
        linear-gradient(0deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px);
    background-size: 50px 35px;
}

.chart-y-labels {
    position: absolute;
    left: 15px; /* Better positioning */
    top: 20px;
    bottom: 60px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    color: #64ffda;
    font-size: 0.85em;
    font-weight: 600;
    z-index: 10;
}

@media (max-width: 768px) {
    .bar-chart {
        height: 280px;
        padding: 15px 10px 55px 65px; /* Adjusted padding */
        gap: 12px;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        justify-content: flex-start;
    }
    
    .chart-y-labels {
        left: 8px;
        font-size: 0.7em;
        bottom: 55px;
    }
    
    .bar-item {
        flex: 0 0 70px;
        min-width: 70px;
        height: 200px;
    }
}

@media (max-width: 480px) {
    .bar-chart {
        padding: 15px 5px 50px 55px; /* Further adjusted */
    }
    
    .chart-y-labels {
        left: 5px;
        font-size: 0.65em;
    }
}

/* REMOVE BUGGY LINES BETWEEN CHAT MESSAGES */
.chat-messages {
    overflow-x: hidden !important;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    border: none !important;
    outline: none !important;
}

.message {
    display: flex;
    gap: 15px;
    animation: messageSlide 0.4s ease-out;
    min-height: fit-content;
    width: 100%;
    margin-bottom: 25px;
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
}

.message-avatar {
    width: 45px;
    height: 45px;
    min-width: 45px;
    min-height: 45px;
    border-radius: 50%;
    background: rgba(100, 255, 218, 0.2);
    border: 2px solid rgba(100, 255, 218, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    flex-shrink: 0;
    box-shadow: none !important;
}

.message-bubble {
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 18px 22px;
    border-radius: 15px;
    line-height: 1.7;
    font-size: 1.05em;
    color: #e0e0e0;
    flex: 1;
    min-width: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
    contain: layout;
    outline: none !important;
    box-shadow: none !important;
}

body.light-mode .message-bubble {
    background: rgba(10, 122, 94, 0.05);
    color: #1a1a1a;
    border-color: rgba(10, 122, 94, 0.1);
}

/* Remove any default borders/outlines */
.chat-container * {
    outline: none !important;
}

.content-panel {
    border: none !important;
    outline: none !important;
}

.chat-container {
    background: rgba(30, 30, 30, 0.4);
    border: 1px solid rgba(100, 255, 218, 0.1);
    border-radius: 20px;
    padding: 35px;
    overflow: hidden !important;
}

body.light-mode .chat-container {
    background: rgba(255, 255, 255, 0.6);
    border-color: rgba(10, 122, 94, 0.2);
}

.auth-message.success {
    background: linear-gradient(135deg, rgba(100, 255, 100, 0.15), rgba(100, 255, 218, 0.15));
    border: 2px solid rgba(100, 255, 100, 0.4);
    color: #00ff00;
    padding: 20px;
    border-radius: 15px;
    animation: fadeIn 0.3s ease;
}

/* NEW COURSE BADGE */
.new-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    background: linear-gradient(135deg, #ff6b6b, #ff8e53);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.75em;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    z-index: 10;
    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
    animation: newBadgePulse 2s infinite;
}

@keyframes newBadgePulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
    }
}

body.light-mode .new-badge {
    background: linear-gradient(135deg, #e63946, #f77f00);
    box-shadow: 0 4px 15px rgba(230, 57, 70, 0.4);
}

/* ENHANCED INTERFACE DESIGN */
.nav-tabs {
    box-shadow: 0 10px 40px rgba(100, 255, 218, 0.15);
    border: 2px solid rgba(100, 255, 218, 0.2);
}

.nav-tab {
    position: relative;
    overflow: hidden;
}

.nav-tab {
    position: relative;
    overflow: hidden;
}

.nav-tab::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(100, 255, 218, 0.15);
    border-radius: 50px;
    transform: scale(0);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: -1;
}

.nav-tab:hover::before {
    transform: scale(1);
}

.nav-tab.active::before {
    transform: scale(1);
    background: rgba(100, 255, 218, 0.2);
}

.stat-card {
    position: relative;
    overflow: hidden;
}

.stat-card {
    position: relative;
    overflow: hidden;
}

.stat-card::after {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(90deg, 
        transparent 0%,
        transparent 40%,
        rgba(100, 255, 218, 0.15) 50%,
        transparent 60%,
        transparent 100%);
    transform: translateX(-100%) rotate(45deg);
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.stat-card:hover::after {
    transform: translateX(100%) rotate(45deg);
}

/* Smooth fade in/out on hover */
.stat-card {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.stat-card:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 15px 50px rgba(100, 255, 218, 0.2);
}

/* Light mode */
body.light-mode .stat-card::after {
    background: linear-gradient(90deg, 
        transparent 0%,
        transparent 40%,
        rgba(10, 122, 94, 0.12) 50%,
        transparent 60%,
        transparent 100%);
}

body.light-mode .stat-card:hover {
    box-shadow: 0 15px 50px rgba(10, 122, 94, 0.15);
}

.course-card {
    position: relative;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.course-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent 0%,
        rgba(100, 255, 218, 0.08) 30%,
        rgba(100, 255, 218, 0.15) 50%,
        rgba(100, 255, 218, 0.08) 70%,
        transparent 100%);
    transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.course-card:not(.locked):hover::before {
    left: 100%;
}

.course-card:not(.locked):hover {
    transform: translateY(-5px) scale(1.01);
    box-shadow: 0 15px 50px rgba(100, 255, 218, 0.2);
}

/* Light mode */
body.light-mode .course-card::before {
    background: linear-gradient(90deg, 
        transparent 0%,
        rgba(10, 122, 94, 0.06) 30%,
        rgba(10, 122, 94, 0.12) 50%,
        rgba(10, 122, 94, 0.06) 70%,
        transparent 100%);
}

body.light-mode .course-card:not(.locked):hover {
    box-shadow: 0 15px 50px rgba(10, 122, 94, 0.15);
}

/* Improved Mobile Nav */
.mobile-nav {
    background: linear-gradient(135deg, 
        rgba(30, 30, 30, 0.98), 
        rgba(20, 20, 30, 0.98));
    box-shadow: 0 -5px 30px rgba(100, 255, 218, 0.2);
}

body.light-mode .mobile-nav {
    background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.98), 
        rgba(250, 250, 255, 0.98));
}

/* Enhanced Button Styles */
.form-button,
.run-button,
.submit-button,
.next-button {
    position: relative;
    overflow: hidden;
}

.form-button::after,
.run-button::after,
.submit-button::after,
.next-button::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.4s ease, height 0.4s ease;
}

.form-button:hover::after,
.run-button:hover::after,
.submit-button:hover::after,
.next-button:hover::after {
    width: 300px;
    height: 300px;
}

/* Smoother Transitions */
* {
    transition: background-color 0.3s ease, 
                color 0.3s ease, 
                border-color 0.3s ease;
}

/* TOUCH FEEDBACK FOR KEYWORDS */
.keyword-highlight {
    position: relative;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

.keyword-highlight::after {
    content: '';
    position: absolute;
    inset: -4px;
    background: rgba(100, 255, 218, 0.2);
    border-radius: 8px;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.2s ease;
    pointer-events: none;
    z-index: -1;
}

.keyword-highlight:active::after {
    opacity: 1;
    transform: scale(1);
}

body.light-mode .keyword-highlight::after {
    background: rgba(10, 122, 94, 0.15);
}

.keyword-highlight {
    position: relative;
    background: linear-gradient(120deg, rgba(100, 255, 218, 0.25) 0%, rgba(100, 255, 218, 0.15) 100%);
    padding: 3px 8px;
    border-radius: 6px;
    font-weight: 700;
    color: #64ffda;
    cursor: pointer;
    transition: all 0.3s ease;
    border-bottom: 2px solid rgba(100, 255, 218, 0.5);
    display: inline-block;
    margin: 0 2px;
}

body.light-mode .keyword-highlight {
    background: linear-gradient(120deg, rgba(10, 122, 94, 0.2) 0%, rgba(10, 122, 94, 0.1) 100%);
    color: #0a7a5e;
    border-bottom-color: rgba(10, 122, 94, 0.5);
}

/* SIMPLE TOOLTIP - NO CLIPPING */
.keyword-highlight {
    position: relative;
    background: linear-gradient(120deg, rgba(100, 255, 218, 0.25) 0%, rgba(100, 255, 218, 0.15) 100%);
    padding: 3px 8px;
    border-radius: 6px;
    font-weight: 700;
    color: #64ffda;
    cursor: pointer;
    transition: all 0.3s ease;
    border-bottom: 2px solid rgba(100, 255, 218, 0.5);
    display: inline-block;
    margin: 0 2px;
}

/* HIDE ON MOBILE - USE TAP INSTEAD */
@media (max-width: 768px) {
    .keyword-highlight::after,
    .keyword-highlight::before {
        display: none !important;
    }
    
    .keyword-highlight:active {
        transform: scale(0.95);
        background: linear-gradient(120deg, rgba(100, 255, 218, 0.4) 0%, rgba(100, 255, 218, 0.3) 100%);
    }
}

/* ALLOW TOOLTIPS TO SHOW - CRITICAL FIX */
.message-bubble {
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.1);
    padding: 18px 22px;
    border-radius: 15px;
    line-height: 1.7;
    font-size: 1.05em;
    color: #e0e0e0;
    flex: 1;
    min-width: 0;
    word-wrap: break-word;
    overflow-wrap: break-word;
    /* CRITICAL: Allow tooltip to escape */
    overflow: visible !important;
    position: relative;
}

.chat-messages {
    display: flex;
    flex-direction: column;
    gap: 25px;
    overflow-x: hidden !important;
    overflow-y: auto;
    width: 100%;
    max-width: 100%;
    position: relative;
    /* Keep horizontal scroll hidden, but allow tooltips */
    padding-top: 60px; /* Space for tooltips at top */
    margin-top: -60px; /* Offset the padding */
}

.chat-container {
    background: rgba(30, 30, 30, 0.4);
    border: 1px solid rgba(100, 255, 218, 0.1);
    border-radius: 20px;
    padding: 35px;
    /* CRITICAL: Allow tooltip to show outside */
    overflow: visible !important;
    position: relative;
}

.content-panel {
    overflow: visible !important;
    position: relative;
}

.lesson-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 30px;
    -webkit-overflow-scrolling: touch;
    position: relative;
}

/* PORTAL TOOLTIP - CREATED BY JAVASCRIPT */
.keyword-tooltip-portal {
    position: fixed;
    background: linear-gradient(135deg, rgba(30, 30, 30, 0.98), rgba(40, 45, 50, 0.98));
    color: #64ffda;
    padding: 12px 20px;
    border-radius: 12px;
    font-size: 0.9em;
    white-space: nowrap;
    border: 2px solid #64ffda;
    box-shadow: 
        0 10px 30px rgba(100, 255, 218, 0.5),
        0 0 0 1px rgba(100, 255, 218, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    z-index: 999999;
    font-weight: 700;
    letter-spacing: 0.8px;
    pointer-events: none;
    font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
    animation: tooltipFadeIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

body.light-mode .keyword-tooltip-portal {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(250, 252, 255, 0.98));
    color: #0a7a5e;
    border-color: #0a7a5e;
    box-shadow: 
        0 10px 30px rgba(10, 122, 94, 0.5),
        0 0 0 1px rgba(10, 122, 94, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
}

.keyword-tooltip-arrow {
    position: fixed;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 12px solid #64ffda;
    z-index: 999998;
    pointer-events: none;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

body.light-mode .keyword-tooltip-arrow {
    border-top-color: #0a7a5e;
}

@keyframes tooltipFadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(10px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0) scale(1);
    }
}

/* FILTER & GOALS CONTROLS */
.progress-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

/* Language Filter Dropdown */
.language-filter {
    position: relative;
    display: none; /* Hidden on desktop */
}

@media (max-width: 768px) {
    .language-filter {
        display: block;
        flex: 1;
        min-width: 150px;
    }
}

.filter-button {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    padding: 12px 20px;
    background: rgba(100, 255, 218, 0.1);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 50px;
    color: #64ffda;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
}

body.light-mode .filter-button {
    background: rgba(10, 122, 94, 0.1);
    border-color: rgba(10, 122, 94, 0.3);
    color: #0a7a5e;
}

.filter-button:hover {
    background: rgba(100, 255, 218, 0.2);
    transform: translateY(-2px);
}

.filter-arrow {
    font-size: 0.8em;
    transition: transform 0.3s ease;
}

.language-filter.active .filter-arrow {
    transform: rotate(180deg);
}

.filter-dropdown {
    position: absolute;
    top: calc(100% + 10px);
    left: 0;
    right: 0;
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 20px;
    backdrop-filter: blur(20px);
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 100;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

body.light-mode .filter-dropdown {
    background: rgba(255, 255, 255, 0.98);
    border-color: rgba(10, 122, 94, 0.3);
}

.language-filter.active .filter-dropdown {
    max-height: 400px;
    opacity: 1;
    transform: translateY(0);
}

.filter-option {
    padding: 15px 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    border-bottom: 1px solid rgba(100, 255, 218, 0.1);
    color: #e0e0e0;
    font-weight: 600;
}

body.light-mode .filter-option {
    color: #1a1a1a;
    border-bottom-color: rgba(10, 122, 94, 0.1);
}

.filter-option:last-child {
    border-bottom: none;
}

.filter-option:hover {
    background: rgba(100, 255, 218, 0.1);
    padding-left: 30px;
}

.filter-option.active {
    background: rgba(100, 255, 218, 0.15);
    color: #64ffda;
}

body.light-mode .filter-option.active {
    background: rgba(10, 122, 94, 0.15);
    color: #0a7a5e;
}

/* Set Goals Button */
.set-goals-btn {
    padding: 12px 30px;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.2), rgba(0, 212, 255, 0.2));
    border: 2px solid #64ffda;
    border-radius: 50px;
    color: #64ffda;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 4px 15px rgba(100, 255, 218, 0.2);
    white-space: nowrap;
}

body.light-mode .set-goals-btn {
    background: linear-gradient(135deg, rgba(10, 122, 94, 0.2), rgba(0, 168, 150, 0.2));
    border-color: #0a7a5e;
    color: #0a7a5e;
}

.set-goals-btn:hover {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.3), rgba(0, 212, 255, 0.3));
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(100, 255, 218, 0.3);
}

/* Goals Modal */
.goals-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.3s ease;
    overflow-y: auto;
    padding: 20px;
}

.goals-modal.active {
    display: flex;
}

.goals-modal-content {
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 25px;
    padding: 40px;
    max-width: 700px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    animation: modalSlide 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

body.light-mode .goals-modal-content {
    background: rgba(255, 255, 255, 0.98);
}

.goals-header {
    text-align: center;
    margin-bottom: 35px;
    border-bottom: 2px solid rgba(100, 255, 218, 0.2);
    padding-bottom: 20px;
}

.goals-header h2 {
    font-size: 2.2em;
    color: #64ffda;
    margin-bottom: 10px;
}

body.light-mode .goals-header h2 {
    color: #0a7a5e;
}

.goals-subtitle {
    color: #8b949e;
    font-size: 1.05em;
}

.goal-language-section {
    margin-bottom: 30px;
    padding: 25px;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 20px;
    transition: all 0.3s ease;
}

.goal-language-section:hover {
    background: rgba(100, 255, 218, 0.08);
    border-color: rgba(100, 255, 218, 0.3);
}

.goal-lang-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}

.goal-lang-icon {
    font-size: 2em;
}

.goal-lang-name {
    font-size: 1.4em;
    font-weight: 700;
    color: #64ffda;
}

body.light-mode .goal-lang-name {
    color: #0a7a5e;
}

.goal-input-group {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.goal-input-row {
    display: flex;
    align-items: center;
    gap: 15px;
}

.goal-input-row label {
    color: #e0e0e0;
    font-weight: 600;
    min-width: 180px;
}

body.light-mode .goal-input-row label {
    color: #1a1a1a;
}

.goal-input-row input {
    flex: 1;
    padding: 12px 20px;
    background: rgba(100, 255, 218, 0.05);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 15px;
    color: #64ffda;
    font-size: 1em;
    font-weight: 700;
    outline: none;
    transition: all 0.3s ease;
}

body.light-mode .goal-input-row input {
    background: rgba(10, 122, 94, 0.05);
    border-color: rgba(10, 122, 94, 0.3);
    color: #0a7a5e;
}

.goal-input-row input:focus {
    border-color: #64ffda;
    background: rgba(100, 255, 218, 0.1);
}

.goals-actions {
    display: flex;
    gap: 15px;
    margin-top: 35px;
    padding-top: 25px;
    border-top: 2px solid rgba(100, 255, 218, 0.2);
}

.goal-action-btn {
    flex: 1;
    padding: 15px;
    border: none;
    border-radius: 50px;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.goal-save-btn {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.3), rgba(0, 212, 255, 0.3));
    border: 2px solid #64ffda;
    color: #64ffda;
}

.goal-save-btn:hover {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.4), rgba(0, 212, 255, 0.4));
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.4);
}

.goal-cancel-btn {
    background: rgba(100, 100, 100, 0.2);
    border: 2px solid rgba(100, 100, 100, 0.3);
    color: #8b949e;
}

.goal-cancel-btn:hover {
    background: rgba(100, 100, 100, 0.3);
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .goals-modal-content {
        padding: 30px 20px;
    }
    
    .goal-input-row {
        flex-direction: column;
        align-items: stretch;
    }
    
    .goal-input-row label {
        min-width: auto;
    }
    
    .goals-actions {
        flex-direction: column;
    }
}

/* HIDE DESKTOP CHART TABS ON MOBILE */
@media (max-width: 768px) {
    .chart-tabs {
        display: none !important; /* Hide the oval language buttons on mobile */
    }
    
    /* Make filter visible on mobile */
    .language-filter {
        display: block;
    }
}

/* INCREASE CHART SIZE ON MOBILE */
@media (max-width: 768px) {
    .bar-chart {
        height: 350px; /* Increased from 280px */
        padding: 15px 5px 55px 55px;
        gap: 12px;
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        justify-content: flex-start;
        scroll-padding-left: 50px;
    }
    
    .bar-item {
        flex: 0 0 70px;
        min-width: 70px;
        height: 260px; /* Increased from 180px */
    }
    
    .bar {
        border-radius: 8px 8px 0 0;
    }
    
    .bar-value {
        font-size: 0.8em;
        top: -30px;
        padding: 5px 10px;
    }
    
    .bar-label {
        font-size: 0.7em;
        bottom: -40px;
        max-width: 70px;
        line-height: 1.1;
    }
    
    /* Adjust Y-axis labels */
    .chart-y-labels {
        left: 5px;
        font-size: 0.7em;
        bottom: 55px;
        top: 15px;
    }
    
    .chart-y-labels span {
        padding: 3px 6px;
        font-size: 0.85em;
    }
    
    /* Adjust axis lines */
    .bar-chart::before {
        left: 50px;
        bottom: 50px;
        height: calc(100% - 65px);
    }
    
    .bar-chart::after {
        left: 50px;
        bottom: 50px;
        width: calc(100% - 55px);
    }
}

@media (max-width: 480px) {
    .bar-chart {
        height: 320px; /* Slightly smaller for very small screens */
        padding: 12px 5px 50px 50px;
        gap: 10px;
    }
    
    .bar-item {
        flex: 0 0 65px;
        min-width: 65px;
        height: 240px;
    }
    
    .bar-value {
        font-size: 0.75em;
        top: -28px;
        padding: 4px 8px;
    }
    
    .bar-label {
        font-size: 0.68em;
        bottom: -38px;
        max-width: 65px;
    }
}

/* HIDE SET GOALS BUTTON */
.set-goals-btn {
    display: none !important;
}

/* Adjust progress controls when goals button is hidden */
.progress-controls {
    justify-content: flex-start; /* Align filter to left */
}

@media (max-width: 768px) {
    .progress-controls {
        justify-content: stretch;
    }
    
    .language-filter {
        width: 100%; /* Make filter full width on mobile */
    }
}

/* MOBILE SIDEBAR - FIXED VERSION */
.mobile-sidebar-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    z-index: 9998;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.mobile-sidebar-overlay.active {
    display: block;
    opacity: 1;
}

.mobile-sidebar {
    display: none;
    position: fixed;
    top: 0;
    left: -300px;
    width: 280px;
    height: 100vh;
    background: #1a1f35;
    border-right: 2px solid rgba(100, 255, 218, 0.3);
    z-index: 9999;
    transition: left 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    overflow-y: auto;
    box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5);
    display: flex;
    flex-direction: column;
}

body.light-mode .mobile-sidebar {
    background: #ffffff;
    border-right-color: rgba(10, 122, 94, 0.3);
}

.mobile-sidebar.active {
    left: 0;
}

.sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 25px 20px;
    border-bottom: 2px solid rgba(100, 255, 218, 0.2);
    background: rgba(0, 0, 0, 0.2);
    flex-shrink: 0;
}

body.light-mode .sidebar-header {
    border-bottom-color: rgba(10, 122, 94, 0.2);
    background: rgba(0, 0, 0, 0.05);
}

.sidebar-logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

.sidebar-logo-icon {
    font-size: 2em;
    line-height: 1;
}

.sidebar-logo-text {
    font-size: 1.4em;
    color: #64ffda;
    font-weight: 700;
    line-height: 1;
}

body.light-mode .sidebar-logo-text {
    color: #0a7a5e;
}

.sidebar-close {
    background: rgba(100, 255, 218, 0.1);
    border: 2px solid rgba(100, 255, 218, 0.3);
    color: #64ffda;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 1.8em;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    line-height: 1;
    flex-shrink: 0;
}

.sidebar-close:hover {
    background: rgba(100, 255, 218, 0.2);
    transform: rotate(90deg);
}

body.light-mode .sidebar-close {
    background: rgba(10, 122, 94, 0.1);
    border-color: rgba(10, 122, 94, 0.3);
    color: #0a7a5e;
}

.sidebar-menu {
    flex: 1;
    padding: 15px 0;
    overflow-y: auto;
}

.sidebar-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 18px 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #e0e0e0;
    font-weight: 600;
    font-size: 1.05em;
    border-left: 4px solid transparent;
    margin: 4px 0;
}

body.light-mode .sidebar-item {
    color: #1a1a1a;
}

.sidebar-item:hover {
    background: rgba(100, 255, 218, 0.15);
    color: #64ffda;
    border-left-color: #64ffda;
}

.sidebar-item.active {
    background: rgba(100, 255, 218, 0.2);
    color: #64ffda;
    border-left-color: #64ffda;
}

body.light-mode .sidebar-item:hover,
body.light-mode .sidebar-item.active {
    color: #0a7a5e;
    border-left-color: #0a7a5e;
    background: rgba(10, 122, 94, 0.15);
}

.sidebar-icon {
    font-size: 1.6em;
    min-width: 35px;
    text-align: center;
    line-height: 1;
}

.sidebar-label {
    flex: 1;
    line-height: 1;
}

.sidebar-footer {
    padding: 20px;
    border-top: 2px solid rgba(100, 255, 218, 0.2);
    background: rgba(0, 0, 0, 0.2);
    flex-shrink: 0;
}

body.light-mode .sidebar-footer {
    border-top-color: rgba(10, 122, 94, 0.2);
    background: rgba(0, 0, 0, 0.05);
}

.sidebar-logout {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 15px;
    background: rgba(255, 100, 100, 0.2);
    border: 2px solid rgba(255, 100, 100, 0.4);
    color: #ff6b6b;
    border-radius: 12px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 1.05em;
}

.sidebar-logout:hover {
    background: rgba(255, 100, 100, 0.3);
    transform: translateY(-2px);
}

.sidebar-logout span:first-child {
    font-size: 1.3em;
}

/* Mobile Menu Button (Hamburger) */
.mobile-menu-btn {
    display: none;
    position: fixed;
    top: 20px;
    left: 20px;
    width: 50px;
    height: 50px;
    background: rgba(30, 30, 30, 0.95);
    backdrop-filter: blur(20px);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 12px;
    z-index: 9997;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    padding: 0;
}

body.light-mode .mobile-menu-btn {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(10, 122, 94, 0.3);
}

.mobile-menu-btn:active {
    transform: scale(0.95);
}

.mobile-menu-btn span {
    width: 24px;
    height: 3px;
    background: #64ffda;
    border-radius: 2px;
    transition: all 0.3s ease;
    display: block;
}

body.light-mode .mobile-menu-btn span {
    background: #0a7a5e;
}

@media (max-width: 768px) {
    .mobile-sidebar,
    .mobile-menu-btn {
        display: flex;
    }
    
    .mobile-sidebar {
        left: -300px;
    }
    
    body {
        padding-bottom: 20px;
    }
    
    .main-content {
        padding-top: 80px;
    }
    
    /* Ensure search is visible on mobile */
    .nav-container {
        display: block !important;
        top: 80px;
    }
}

/* Prevent body scroll when sidebar is open */
body.sidebar-open {
    overflow: hidden;
}

/* Hide desktop nav on mobile */
@media (max-width: 768px) {
    .nav-container {
        display: none !important;
    }
}

/* DISTINCTIVE LEARN MODE TABS (Courses/Roadmap) */
.learn-mode-tabs {
    display: flex;
    gap: 20px;
    justify-content: center;
    margin-bottom: 50px;
    padding: 0 20px;
}

.learn-mode-tab {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 18px 45px;
    background: linear-gradient(135deg, 
        rgba(30, 30, 30, 0.8), 
        rgba(40, 45, 50, 0.8));
    border: 3px solid rgba(100, 255, 218, 0.3);
    color: #8b949e;
    border-radius: 20px; /* Rounded rectangle, NOT oval */
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    font-weight: 700;
    font-size: 1.15em;
    position: relative;
    overflow: hidden;
    box-shadow: 
        0 5px 20px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.learn-mode-tab::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(100, 255, 218, 0.2), 
        transparent);
    transition: left 0.6s ease;
}

.learn-mode-tab:hover::before {
    left: 100%;
}

body.light-mode .learn-mode-tab {
    background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.9), 
        rgba(250, 252, 255, 0.9));
    border-color: rgba(10, 122, 94, 0.3);
    box-shadow: 
        0 5px 20px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 1);
}

.learn-mode-tab:hover {
    border-color: rgba(100, 255, 218, 0.6);
    color: #64ffda;
    transform: translateY(-3px);
    box-shadow: 
        0 8px 30px rgba(100, 255, 218, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.learn-mode-tab.active {
    background: linear-gradient(135deg, 
        rgba(100, 255, 218, 0.25), 
        rgba(0, 212, 255, 0.25));
    border-color: #64ffda;
    color: #64ffda;
    box-shadow: 
        0 8px 35px rgba(100, 255, 218, 0.5),
        inset 0 2px 10px rgba(100, 255, 218, 0.3),
        inset 0 -2px 10px rgba(0, 212, 255, 0.3);
    transform: translateY(-2px);
}

body.light-mode .learn-mode-tab.active {
    background: linear-gradient(135deg, 
        rgba(10, 122, 94, 0.25), 
        rgba(0, 168, 150, 0.25));
    border-color: #0a7a5e;
    color: #0a7a5e;
    box-shadow: 
        0 8px 35px rgba(10, 122, 94, 0.4),
        inset 0 2px 10px rgba(10, 122, 94, 0.3);
}

.learn-mode-tab span:first-child {
    font-size: 1.5em;
    filter: drop-shadow(0 0 8px currentColor);
}

.learn-mode-tab.active span:first-child {
    animation: iconPulse 2s ease-in-out infinite;
}

@keyframes iconPulse {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.15);
    }
}

.learn-mode-content {
    display: none;
}

.learn-mode-content.active {
    display: block;
    animation: fadeIn 0.4s ease;
}

/* LANGUAGE TABS (Keep as oval for contrast) */
.language-tabs {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-bottom: 40px;
    flex-wrap: wrap;
}

.language-tab {
    padding: 12px 30px;
    background: rgba(30, 30, 30, 0.6);
    border: 2px solid rgba(100, 255, 218, 0.1);
    color: #8b949e;
    border-radius: 50px; /* Oval shape */
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
    font-size: 1em;
}

body.light-mode .language-tab {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(10, 122, 94, 0.2);
}

.language-tab:hover {
    border-color: rgba(100, 255, 218, 0.3);
    color: #64ffda;
}

.language-tab.active {
    background: rgba(100, 255, 218, 0.15);
    border-color: #64ffda;
    color: #64ffda;
    box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
}

/* Mobile Adjustments */
@media (max-width: 768px) {
    .learn-mode-tabs {
        gap: 12px;
        padding: 0 15px;
    }
    
    .learn-mode-tab {
        padding: 14px 30px;
        font-size: 1em;
        border-radius: 16px;
    }
    
    .learn-mode-tab span:first-child {
        font-size: 1.3em;
    }
}

/* ENHANCED ROADMAP STYLES */
.roadmap-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.roadmap-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 50px;
}

.roadmap-stat-card {
    background: rgba(30, 30, 30, 0.6);
    border: 2px solid rgba(100, 255, 218, 0.2);
    padding: 25px;
    border-radius: 20px;
    text-align: center;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
    overflow: hidden;
}

body.light-mode .roadmap-stat-card {
    background: rgba(255, 255, 255, 0.8);
    border-color: rgba(10, 122, 94, 0.2);
}

.roadmap-stat-card::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(90deg, transparent, rgba(100, 255, 218, 0.1), transparent);
    transform: rotate(45deg);
    animation: shimmer 3s infinite;
}

@keyframes shimmer {
    0% { transform: translateX(-100%) rotate(45deg); }
    100% { transform: translateX(100%) rotate(45deg); }
}

.roadmap-stat-card:hover {
    border-color: rgba(100, 255, 218, 0.5);
    transform: translateY(-8px) scale(1.05);
    box-shadow: 0 15px 40px rgba(100, 255, 218, 0.3);
}

.roadmap-stat-icon {
    font-size: 2.5em;
    margin-bottom: 10px;
    /* REMOVED: animation: float 3s ease-in-out infinite; */
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.roadmap-stat-value {
    font-size: 2.5em;
    color: #64ffda;
    font-weight: 700;
    margin-bottom: 5px;
    text-shadow: 0 0 20px rgba(100, 255, 218, 0.5);
}

body.light-mode .roadmap-stat-value {
    color: #0a7a5e;
}

.roadmap-stat-label {
    color: #8b949e;
    font-weight: 600;
}

/* ENHANCED ROADMAP TIMELINE */
/* DYNAMIC ROADMAP TIMELINE */
.roadmap-timeline {
    position: relative;
    padding: 40px 0;
}

/* Base timeline (grey for locked areas) */
.roadmap-timeline::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 4px;
    background: rgba(100, 100, 100, 0.3);
    transform: translateX(-50%);
    border-radius: 2px;
}

/* Progress line (green - will be set dynamically) */
.roadmap-progress-line {
    position: absolute;
    left: 50%;
    top: 0;
    width: 4px;
    background: linear-gradient(180deg, 
        #64ffda 0%, 
        rgba(100, 255, 218, 0.8) 100%);
    transform: translateX(-50%);
    border-radius: 2px;
    box-shadow: 0 0 20px rgba(100, 255, 218, 0.6);
    transition: height 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    z-index: 1;
}

/* Animated glow at the end of progress line */
.roadmap-progress-line::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 20px;
    background: #64ffda;
    border-radius: 50%;
    box-shadow: 0 0 30px rgba(100, 255, 218, 1);
    animation: progressGlow 2s ease-in-out infinite;
}

@keyframes progressGlow {
    0%, 100% {
        transform: translateX(-50%) scale(1);
        opacity: 1;
    }
    50% {
        transform: translateX(-50%) scale(1.5);
        opacity: 0.5;
    }
}

/* Unlock animation */
@keyframes unlockExpand {
    0% {
        height: 0;
        opacity: 0;
    }
    60% {
        height: 110%;
        opacity: 1;
    }
    100% {
        height: 100%;
        opacity: 1;
    }
}

.roadmap-language-section {
    margin-bottom: 80px;
    animation: sectionFadeIn 0.6s ease-out backwards;
    position: relative;
}

@media (max-width: 768px) {
    .roadmap-language-section {
        margin-bottom: 40px;
    }
    
    .roadmap-language-header {
        margin-bottom: 30px;
        padding: 0 10px;
    }
    
    .roadmap-language-title {
        font-size: 1.4em;
        padding: 12px 30px;
    }
}

.roadmap-language-section:nth-child(1) { animation-delay: 0.1s; }
.roadmap-language-section:nth-child(2) { animation-delay: 0.2s; }
.roadmap-language-section:nth-child(3) { animation-delay: 0.3s; }
.roadmap-language-section:nth-child(4) { animation-delay: 0.4s; }
.roadmap-language-section:nth-child(5) { animation-delay: 0.5s; }

@keyframes sectionFadeIn {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.roadmap-language-header {
    text-align: center;
    margin-bottom: 40px;
    position: relative;
    z-index: 10;
}

.roadmap-language-title {
    display: inline-flex;
    align-items: center;
    gap: 15px;
    background: rgba(30, 30, 30, 0.95);
    border: 2px solid rgba(100, 255, 218, 0.3);
    padding: 15px 40px;
    border-radius: 50px;
    font-size: 1.8em;
    color: #64ffda;
    font-weight: 700;
    box-shadow: 0 5px 30px rgba(100, 255, 218, 0.3);
    animation: titlePulse 2s ease-in-out infinite;
}

@keyframes titlePulse {
    0%, 100% {
        box-shadow: 0 5px 30px rgba(100, 255, 218, 0.3);
    }
    50% {
        box-shadow: 0 5px 40px rgba(100, 255, 218, 0.5);
    }
}

body.light-mode .roadmap-language-title {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(10, 122, 94, 0.3);
    color: #0a7a5e;
}

.roadmap-item {
    display: flex;
    align-items: center;
    margin-bottom: 50px;
    position: relative;
    animation: itemSlideIn 0.5s ease-out backwards;
}

@keyframes itemSlideIn {
    from {
        opacity: 0;
        transform: translateX(-50px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.roadmap-item:nth-child(odd) {
    flex-direction: row-reverse;
    text-align: right;
    animation: itemSlideInRight 0.5s ease-out backwards;
}

@keyframes itemSlideInRight {
    from {
        opacity: 0;
        transform: translateX(50px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.roadmap-item:nth-child(odd) .roadmap-card {
    margin-left: 0;
    margin-right: calc(50% + 70px);
}

.roadmap-item:nth-child(even) .roadmap-card {
    margin-left: calc(50% + 70px);
}

.roadmap-node {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    z-index: 10;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.roadmap-node:hover {
    transform: translateX(-50%) scale(1.2) rotate(360deg);
}

.roadmap-node.completed {
    background: linear-gradient(135deg, rgba(100, 255, 100, 0.4), rgba(0, 255, 150, 0.4));
    border: 4px solid #00ff00;
    box-shadow: 0 0 30px rgba(100, 255, 100, 0.7),
                inset 0 0 20px rgba(100, 255, 100, 0.3);
    animation: completedPulse 2s ease-in-out infinite;
}

@keyframes completedPulse {
    0%, 100% {
        box-shadow: 0 0 30px rgba(100, 255, 100, 0.7),
                    inset 0 0 20px rgba(100, 255, 100, 0.3);
    }
    50% {
        box-shadow: 0 0 50px rgba(100, 255, 100, 1),
                    inset 0 0 30px rgba(100, 255, 100, 0.5);
    }
}

.roadmap-node.in-progress {
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.4), rgba(0, 212, 255, 0.4));
    border: 4px solid #64ffda;
    box-shadow: 0 0 30px rgba(100, 255, 218, 0.7),
                inset 0 0 20px rgba(100, 255, 218, 0.3);
    animation: progressPulse 1.5s ease-in-out infinite;
}

@keyframes progressPulse {
    0%, 100% {
        transform: translateX(-50%) scale(1);
        box-shadow: 0 0 30px rgba(100, 255, 218, 0.7),
                    inset 0 0 20px rgba(100, 255, 218, 0.3);
    }
    50% {
        transform: translateX(-50%) scale(1.15);
        box-shadow: 0 0 50px rgba(100, 255, 218, 1),
                    inset 0 0 30px rgba(100, 255, 218, 0.5);
    }
}

.roadmap-node.locked {
    background: rgba(100, 100, 100, 0.3);
    border: 4px solid #666;
    opacity: 0.6;
}

.roadmap-card {
    background: rgba(30, 30, 30, 0.9);
    border: 2px solid rgba(100, 255, 218, 0.2);
    padding: 30px;
    border-radius: 20px;
    max-width: 45%;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
    overflow: hidden;
}

.roadmap-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(100, 255, 218, 0.2), transparent);
    transition: left 0.6s ease;
}

.roadmap-card:hover::before {
    left: 100%;
}

body.light-mode .roadmap-card {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(10, 122, 94, 0.2);
}

.roadmap-card:hover {
    border-color: rgba(100, 255, 218, 0.6);
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 15px 40px rgba(100, 255, 218, 0.3);
}

.roadmap-card.completed {
    border-color: rgba(100, 255, 100, 0.5);
}

.roadmap-card.completed:hover {
    box-shadow: 0 15px 40px rgba(100, 255, 100, 0.3);
}

.roadmap-card.locked {
    opacity: 0.5;
    cursor: not-allowed;
}

.roadmap-card.locked:hover {
    transform: none;
}

.roadmap-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    position: relative;
    z-index: 1;
}

.roadmap-course-title {
    font-size: 1.4em;
    color: #64ffda;
    font-weight: 700;
    text-shadow: 0 0 15px rgba(100, 255, 218, 0.5);
}

body.light-mode .roadmap-course-title {
    color: #0a7a5e;
}

.roadmap-status-badge {
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 700;
    animation: badgeGlow 2s ease-in-out infinite;
}

@keyframes badgeGlow {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

.roadmap-status-badge.completed {
    background: rgba(100, 255, 100, 0.2);
    color: #00ff00;
    border: 2px solid #00ff00;
    box-shadow: 0 0 15px rgba(100, 255, 100, 0.5);
}

.roadmap-status-badge.in-progress {
    background: rgba(100, 255, 218, 0.2);
    color: #64ffda;
    border: 2px solid #64ffda;
    box-shadow: 0 0 15px rgba(100, 255, 218, 0.5);
}

.roadmap-status-badge.locked {
    background: rgba(100, 100, 100, 0.2);
    color: #999;
    border: 2px solid #666;
}

.roadmap-course-desc {
    color: #8b949e;
    margin-bottom: 20px;
    line-height: 1.7;
    position: relative;
    z-index: 1;
}

.roadmap-progress-bar {
    height: 10px;
    background: rgba(100, 255, 218, 0.1);
    border-radius: 10px;
    overflow: hidden;
    margin-top: 15px;
    border: 1px solid rgba(100, 255, 218, 0.2);
    position: relative;
    z-index: 1;
}

.roadmap-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #64ffda, #00d4ff, #64ffda);
    background-size: 200% 100%;
    border-radius: 10px;
    transition: width 1.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    animation: progressShine 2s linear infinite;
    box-shadow: 0 0 15px rgba(100, 255, 218, 0.6);
}

@keyframes progressShine {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .roadmap-stats {
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
    }
    
    .roadmap-timeline::before {
        left: 30px;
    }
    
    .roadmap-item {
        flex-direction: column !important;
        text-align: left !important;
        padding-left: 80px;
    }
    
    .roadmap-item:nth-child(odd) .roadmap-card,
    .roadmap-item:nth-child(even) .roadmap-card {
        margin: 0;
        max-width: 100%;
    }
    
    .roadmap-node {
        left: 30px;
    }
    
    .roadmap-language-title {
        font-size: 1.4em;
        padding: 12px 30px;
    }
}

/* MOBILE TOP SEARCH BAR - ALWAYS FIXED */
.mobile-top-search {
    display: none;
    position: fixed;
    top: 20px;
    left: 80px;
    right: 20px;
    z-index: 9996;
    /* CRITICAL: Prevent movement on scroll/keyboard */
    will-change: transform;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
}

@media (max-width: 768px) {
    .mobile-top-search {
        display: block;
    }
    
    /* Prevent body shift when keyboard opens */
    body {
        position: fixed;
        width: 100%;
    }
    
    body.keyboard-open {
        position: fixed;
        overflow: hidden;
    }
}

.mobile-search-wrapper {
    display: flex;
    align-items: center;
    gap: 12px;
    background: rgba(30, 30, 30, 0.95);
    backdrop-filter: blur(30px) saturate(180%);
    -webkit-backdrop-filter: blur(30px) saturate(180%);
    border: 2px solid rgba(100, 255, 218, 0.25);
    border-radius: 50px;
    padding: 14px 22px;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    height: 50px;
    /* CRITICAL: Keep it anchored */
    transform: translate3d(0, 0, 0);
    -webkit-transform: translate3d(0, 0, 0);
}

.mobile-search-wrapper::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(100, 255, 218, 0.1), 
        transparent);
    transition: left 0.6s ease;
}

.mobile-search-wrapper:hover::before {
    left: 100%;
}

body.light-mode .mobile-search-wrapper {
    background: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(30px) saturate(180%);
    -webkit-backdrop-filter: blur(30px) saturate(180%);
    border-color: rgba(10, 122, 94, 0.3);
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8),
        0 0 0 1px rgba(10, 122, 94, 0.1);
}

.mobile-search-wrapper:focus-within {
    background: rgba(30, 30, 30, 0.6);
    border-color: #64ffda;
    box-shadow: 
        0 8px 40px rgba(100, 255, 218, 0.5),
        inset 0 1px 0 rgba(255, 255, 255, 0.15),
        0 0 0 1px rgba(100, 255, 218, 0.3);
    transform: scale(1.01);
}

body.light-mode .mobile-search-wrapper:focus-within {
    background: rgba(255, 255, 255, 0.7);
    border-color: #0a7a5e;
    box-shadow: 
        0 8px 40px rgba(10, 122, 94, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 1),
        0 0 0 1px rgba(10, 122, 94, 0.3);
}

.mobile-search-icon {
    width: 22px;
    height: 22px;
    stroke: #64ffda;
    stroke-width: 2.5;
    fill: none;
    flex-shrink: 0;
    filter: drop-shadow(0 0 6px rgba(100, 255, 218, 0.5));
    transition: all 0.3s ease;
}

.mobile-search-wrapper:focus-within .mobile-search-icon {
    transform: scale(1.1);
    filter: drop-shadow(0 0 10px rgba(100, 255, 218, 0.8));
}

body.light-mode .mobile-search-icon {
    stroke: #0a7a5e;
    filter: drop-shadow(0 0 6px rgba(10, 122, 94, 0.5));
}

.mobile-search-field {
    flex: 1;
    background: transparent;
    border: none;
    outline: none;
    color: #e0e0e0;
    font-size: 1em;
    font-weight: 600;
}

body.light-mode .mobile-search-field {
    color: #1a1a1a;
}

.mobile-search-field::placeholder {
    color: rgba(139, 148, 158, 0.8);
}

.mobile-top-search-results {
    margin-top: 10px;
    background: rgba(30, 30, 30, 0.5);
    backdrop-filter: blur(30px) saturate(180%);
    -webkit-backdrop-filter: blur(30px) saturate(180%);
    border: 2px solid rgba(100, 255, 218, 0.25);
    border-radius: 20px;
    max-height: 400px;
    overflow-y: auto;
    display: none;
    box-shadow: 
        0 10px 40px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 0 0 1px rgba(100, 255, 218, 0.1);
}

body.light-mode .mobile-top-search-results {
    background: rgba(255, 255, 255, 0.6);
    border-color: rgba(10, 122, 94, 0.3);
    box-shadow: 
        0 10px 40px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8),
        0 0 0 1px rgba(10, 122, 94, 0.1);
}

.mobile-top-search-results.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

.mobile-top-search-results .search-result-item {
    padding: 15px 20px;
    cursor: pointer;
    transition: all 0.2s ease;
    border-bottom: 1px solid rgba(100, 255, 218, 0.1);
    backdrop-filter: blur(10px);
}

.mobile-top-search-results .search-result-item:hover {
    background: rgba(100, 255, 218, 0.15);
}

.mobile-top-search-results .search-result-title {
    color: #64ffda;
    font-weight: 600;
    margin-bottom: 5px;
    text-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
}

body.light-mode .mobile-top-search-results .search-result-title {
    color: #0a7a5e;
    text-shadow: none;
}

.mobile-top-search-results .search-result-desc {
    color: #8b949e;
    font-size: 0.85em;
}

/* Adjust main content padding to account for search bar */
@media (max-width: 768px) {
    .main-content {
        padding-top: 90px; /* Increased to make room for search bar */
    }
}

@media (max-width: 768px) {
    .roadmap-timeline::before {
        left: 30px;
        transform: none;
    }
    
    .roadmap-timeline {
        padding-left: 0;
        padding-right: 0;
    }
    
    .roadmap-item {
        padding-left: 80px;
        padding-right: 10px;
        margin-bottom: 40px; /* Reduced spacing */
    }
    
    .roadmap-card {
        width: 100%;
        max-width: 100%;
    }
    
    .roadmap-node {
        left: 30px; /* Align nodes with left line */
        transform: none;
    }
}

/* ROADMAP ENHANCEMENTS */
.roadmap-overview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
    padding: 30px;
    background: rgba(30, 30, 30, 0.6);
    border: 2px solid rgba(100, 255, 218, 0.2);
    border-radius: 20px;
}

.roadmap-path-indicator {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(100, 255, 218, 0.1);
    padding: 8px 16px;
    border-radius: 20px;
    border: 1px solid rgba(100, 255, 218, 0.3);
    font-size: 0.85em;
    color: #64ffda;
    font-weight: 600;
}

.course-time-estimate {
    color: #8b949e;
    font-size: 0.85em;
    margin-top: 10px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.skill-branch-indicator {
    position: absolute;
    left: 30px;
    width: 3px;
    background: linear-gradient(180deg, 
        rgba(100, 255, 218, 0.5) 0%,
        rgba(100, 255, 218, 0.2) 100%);
    border-radius: 2px;
}

@media (max-width: 768px) {
    .code-fill {
        padding: 15px 10px;
        font-size: 0.85em;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        white-space: normal; /* CHANGED */
        word-wrap: break-word;
    }
    
    .code-blank-wrapper {
        display: inline-block; /* Keep inline */
        margin: 2px 4px; /* More spacing */
        max-width: 100%; /* Prevent overflow */
    }
    
    .code-blank {
        min-width: 80px; /* Increased from 70px */
        max-width: 150px;
        font-size: 0.9em;
        padding: 10px 12px; /* More padding */
        width: auto; /* Let it adapt */
    }
    
    .exercise-box {
        padding: 20px 12px; /* More side padding */
    }
    
    .chat-container {
        padding: 20px 12px; /* Wider container */
    }
}
    
    .submit-button,
    .next-button {
        width: 100%;
        padding: 14px;
        font-size: 1em;
    }
}

.ai-suggestion-btn {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.2), rgba(0, 212, 255, 0.2));
    border: 2px solid #64ffda;
    border-radius: 50px;
    padding: 10px 20px;
    color: #64ffda;
    font-weight: 700;
    font-size: 0.85em;
    cursor: pointer;
    z-index: 9000;
    opacity: 0;
    backdrop-filter: blur(10px);
    box-shadow: 0 0 30px rgba(100, 255, 218, 0.5),
                0 0 60px rgba(100, 255, 218, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    animation: aiGlowPulse 3s ease-in-out infinite;
    max-width: 80%;
    text-align: center;
}

.ai-suggestion-btn.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

.ai-suggestion-btn:hover {
    transform: translateX(-50%) translateY(-5px);
    box-shadow: 0 0 40px rgba(100, 255, 218, 0.7),
                0 0 80px rgba(100, 255, 218, 0.4);
}

@keyframes aiGlowPulse {
    0%, 100% {
        box-shadow: 0 0 20px rgba(100, 255, 218, 0.4),
                    0 0 40px rgba(100, 255, 218, 0.2),
                    0 0 60px rgba(0, 212, 255, 0.1);
        border-color: rgba(100, 255, 218, 0.8);
        transform: translateX(-50%) translateY(0) scale(1);
    }
    33% {
        box-shadow: 0 0 30px rgba(100, 255, 218, 0.6),
                    0 0 60px rgba(100, 255, 218, 0.4),
                    0 0 90px rgba(0, 212, 255, 0.2);
        border-color: rgba(100, 255, 218, 1);
        transform: translateX(-50%) translateY(0) scale(1.05);
    }
    66% {
        box-shadow: 0 0 25px rgba(100, 255, 218, 0.5),
                    0 0 50px rgba(100, 255, 218, 0.3),
                    0 0 75px rgba(0, 212, 255, 0.15);
        border-color: rgba(100, 255, 218, 0.9);
        transform: translateX(-50%) translateY(0) scale(1.02);
    }
}

.ai-suggestion-title {
    font-size: 1em; /* Reduced from 1.1em */
    margin-bottom: 4px; /* Reduced from 5px */
}

.ai-suggestion-desc {
    font-size: 0.75em; /* Reduced from 0.85em */
    color: #8b949e;
    font-weight: 500;
}

/* COMPLETION STATS MODAL */
.completion-stats-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(10px);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.3s ease;
}

.completion-stats-modal.active {
    display: flex;
}

.completion-stats-content {
    background: rgba(30, 30, 30, 0.98);
    border: 2px solid #64ffda;
    border-radius: 25px;
    padding: 40px;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    animation: slideUp 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.stats-header {
    text-align: center;
    margin-bottom: 30px;
}

.stats-icon {
    font-size: 4em;
    margin-bottom: 15px;
    animation: bounce 0.6s ease;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
}

.stats-title {
    font-size: 2.2em;
    color: #64ffda;
    margin-bottom: 10px;
}

.stats-score {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-bottom: 30px;
}

.score-item {
    background: rgba(100, 255, 218, 0.1);
    padding: 20px;
    border-radius: 15px;
    text-align: center;
    border: 1px solid rgba(100, 255, 218, 0.2);
}

.score-value {
    font-size: 2.5em;
    color: #64ffda;
    font-weight: 700;
}

.score-label {
    color: #8b949e;
    font-size: 0.9em;
    margin-top: 5px;
}

.wrong-answers-list {
    background: rgba(255, 100, 100, 0.1);
    border: 1px solid rgba(255, 100, 100, 0.3);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 20px;
}

.wrong-answer-item {
    padding: 10px;
    border-bottom: 1px solid rgba(255, 100, 100, 0.2);
    color: #e0e0e0;
}

.continue-btn {
    width: 100%;
    padding: 15px;
    background: rgba(100, 255, 218, 0.2);
    border: 2px solid #64ffda;
    color: #64ffda;
    border-radius: 50px;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
}

.continue-btn:hover {
    background: rgba(100, 255, 218, 0.3);
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    body {
        padding-bottom: 100px;
        position: relative !important; /* FIX: Ensure body can scroll */
    }

    @media (max-width: 768px) {
    .roadmap-progress-line {
        left: 30px !important;
        transform: none !important;
    }
}

/* Hide mobile menu & search when in lesson view */
.lesson-view.active ~ .mobile-menu-btn,
.lesson-view.active ~ .mobile-top-search {
    display: none !important;
}

body.lesson-active .mobile-menu-btn,
body.lesson-active .mobile-top-search {
    display: none !important;
}

/* Original single button */
.scroll-to-top {
    position: fixed;
    top: 85px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px) scale(0);
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.9), rgba(0, 212, 255, 0.9));
    border: 2px solid #64ffda;
    border-radius: 50%;
    display: none; /* CHANGED: Hidden by default */
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 9500;
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.5);
    font-size: 1.3em;
    color: #0a0a0a;
    opacity: 0;
}

.scroll-to-top.show {
    transform: translateX(-50%) translateY(0) scale(1);
    opacity: 1;
}

.scroll-to-top:hover {
    transform: translateX(-50%) translateY(-5px) scale(1.1);
    box-shadow: 0 8px 30px rgba(100, 255, 218, 0.7);
}

body.light-mode .scroll-to-top {
    background: linear-gradient(135deg, rgba(10, 122, 94, 0.9), rgba(0, 168, 150, 0.9));
    border-color: #0a7a5e;
}

@media (max-width: 768px) {
    .scroll-to-top {
        top: 85px; /* Below mobile search bar */
        width: 45px;
        height: 45px;
        font-size: 1.3em;
    }
}

/* MOBILE ROADMAP FIXES */
@media (max-width: 768px) {
    .roadmap-card {
        padding: 20px 15px;
    }
    
    .roadmap-card-header {
        flex-direction: column;
        align-items: flex-start !important;
        gap: 10px;
    }
    
    .roadmap-course-title {
        font-size: 1.2em;
        width: 100%;
    }
    
    .roadmap-status-badge {
        align-self: flex-start;
        padding: 5px 12px;
        font-size: 0.8em;
        white-space: nowrap;
    }
}

/* Dynamic button container */
.scroll-button-container {
    position: fixed;
    top: 85px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    display: none; /* CHANGED: Hidden by default */
    align-items: center;
    gap: 10px;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 9500;
}

.scroll-button-container.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}

/* ONLY show on mobile screens */
@media (max-width: 768px) {
    .scroll-to-top,
    .scroll-button-container {
        display: flex; /* SHOW on mobile */
    }
    
    .scroll-nav-btn {
        width: 100px;
        height: 45px;
        font-size: 0.8em;
    }
    
    .scroll-to-top-center {
        width: 45px;
        height: 45px;
        font-size: 1.3em;
    }
}

/* EXPLICITLY hide on desktop */
@media (min-width: 769px) {
    .scroll-to-top,
    .scroll-button-container {
        display: none !important; /* HIDE on desktop */
    }
}

.scroll-nav-btn {
    width: 120px;
    height: 50px;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.9), rgba(0, 212, 255, 0.9));
    border: 2px solid #64ffda;
    border-radius: 25px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.5);
    color: #0a0a0a;
    font-weight: 700;
    font-size: 0.9em;
    opacity: 0;
    transform: scale(0);
}

.scroll-nav-btn.show {
    opacity: 1;
    transform: scale(1);
}

.scroll-nav-btn:hover {
    transform: scale(1.05) translateY(-2px);
    box-shadow: 0 8px 30px rgba(100, 255, 218, 0.7);
}

.scroll-to-top-center {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.9), rgba(0, 212, 255, 0.9));
    border: 2px solid #64ffda;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.5);
    font-size: 1.5em;
    color: #0a0a0a;
}

.scroll-to-top-center:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 8px 30px rgba(100, 255, 218, 0.7);
}

body.light-mode .scroll-nav-btn,
body.light-mode .scroll-to-top-center {
    background: linear-gradient(135deg, rgba(10, 122, 94, 0.9), rgba(0, 168, 150, 0.9));
    border-color: #0a7a5e;
}

/* Roadmap Navigation Buttons */
.roadmap-nav-container {
    position: fixed;
    top: 85px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    display: none;
    align-items: center;
    gap: 10px;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 9500;
}

.roadmap-nav-container[style*="display: flex"] {
    display: flex !important;
}

.roadmap-nav-container.show {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
}

.roadmap-nav-btn {
    width: 120px;
    height: 50px;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.9), rgba(0, 212, 255, 0.9));
    border: 2px solid #64ffda;
    border-radius: 25px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.5);
    color: #0a0a0a;
    font-weight: 700;
    font-size: 0.9em;
    opacity: 0;
    transform: scale(0);
}

.roadmap-nav-btn.show {
    opacity: 1;
    transform: scale(1);
}

.roadmap-nav-btn:hover {
    transform: scale(1.05) translateY(-2px);
    box-shadow: 0 8px 30px rgba(100, 255, 218, 0.7);
}

.roadmap-scroll-top {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, rgba(100, 255, 218, 0.9), rgba(0, 212, 255, 0.9));
    border: 2px solid #64ffda;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.5);
    font-size: 1.5em;
    color: #0a0a0a;
}

.roadmap-scroll-top:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 8px 30px rgba(100, 255, 218, 0.7);
}

body.light-mode .roadmap-nav-btn,
body.light-mode .roadmap-scroll-top {
    background: linear-gradient(135deg, rgba(10, 122, 94, 0.9), rgba(0, 168, 150, 0.9));
    border-color: #0a7a5e;
}

@media (max-width: 768px) {
    .roadmap-nav-container {
        top: 85px;
    }
    
    .roadmap-nav-btn {
        width: 100px;
        height: 45px;
        font-size: 0.8em;
    }
    
    .roadmap-scroll-top {
        width: 45px;
        height: 45px;
        font-size: 1.3em;
    }
}

@media (max-width: 768px) {
    .scroll-button-container {
        top: 85px;
    }
    
    .scroll-nav-btn {
        width: 100px;
        height: 45px;
        font-size: 0.8em;
    }
    
    .scroll-to-top-center {
        width: 45px;
        height: 45px;
        font-size: 1.3em;
    }
}

.roadmap-progress-line {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    background: linear-gradient(to bottom, #64ffda, rgba(100, 255, 218, 0.3));
    border-radius: 10px;
    transition: height 0.5s ease;
    z-index: 1;
    box-shadow: 0 0 20px rgba(100, 255, 218, 0.5);
    pointer-events: none;
    /* Will be positioned dynamically by JS */
}

/* Hide the default timeline line */
.roadmap-timeline::before {
    display: none;
}

/* Center nodes on progress line */
.roadmap-item {
    position: relative;
    display: flex;
    align-items: center;
    margin-bottom: 30px;
}

.roadmap-node {
    position: relative;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    flex-shrink: 0;
    z-index: 2;
    background: rgba(30, 30, 30, 0.9);
    border: 3px solid rgba(100, 255, 218, 0.3);
}

/* Progress line positioning */
.roadmap-progress-line {
    position: absolute;
    left: 25px; /* Center of node (50px / 2) */
    width: 4px;
    background: linear-gradient(to bottom, #64ffda, #667eea);
    transform: translateX(-50%);
    z-index: 1;
    transition: height 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Animated ring fill effect */
.roadmap-node::before {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border-radius: 50%;
    border: 3px solid transparent;
    opacity: 0;
    transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.roadmap-node.completed::before,
.roadmap-node.in-progress::before {
    border-color: #64ffda;
    opacity: 1;
    animation: pulseRing 2s ease-in-out infinite;
}

/* Pulse animation for active nodes */
@keyframes pulseRing {
    0%, 100% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.1);
        opacity: 0.7;
    }
}

/* Fill animation when reaching new node */
.roadmap-node.just-completed {
    animation: nodeFillIn 1s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes nodeFillIn {
    0% {
        transform: scale(0.5);
        box-shadow: 0 0 0 0 rgba(100, 255, 218, 0.7);
    }
    50% {
        transform: scale(1.2);
        box-shadow: 0 0 0 20px rgba(100, 255, 218, 0);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 20px rgba(100, 255, 218, 0.5);
    }
}

/* Roadmap mobile centering */
@media (max-width: 768px) {
    .roadmap-item {
        padding-left: 0;
        margin-left: 25px; /* Half of node width to center line */
    }
    
    .roadmap-node {
        position: absolute;
        left: 0;
        transform: translateX(-50%); /* Center on the line */
    }
    
    .roadmap-progress-line {
        left: 0; /* Align with centered nodes */
        transform: translateX(-50%);
    }
    
    .roadmap-card {
        margin-left: 10px; /* Space from the centered node */
    }
    
    .roadmap-language-section {
        padding-left: 0;
    }
}

/* SCROLL TO TOP BUTTON (RING SHAPE) */
.scroll-to-top {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%) translateY(-100px);
    width: 50px;
    height: 50px;
    background: rgba(30, 30, 30, 0.95);
    border: 3px solid #64ffda;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 9995;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    backdrop-filter: blur(20px);
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.3);
}

.scroll-to-top.visible {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

.scroll-to-top:hover {
    transform: translateX(-50%) translateY(-3px) scale(1.1);
    box-shadow: 0 8px 30px rgba(100, 255, 218, 0.5);
    border-width: 4px;
}

.scroll-to-top svg {
    width: 24px;
    height: 24px;
    stroke: #64ffda;
    stroke-width: 3;
    fill: none;
}

body.light-mode .scroll-to-top {
    background: rgba(255, 255, 255, 0.95);
    border-color: #0a7a5e;
}

body.light-mode .scroll-to-top svg {
    stroke: #0a7a5e;
}

/* DYNAMIC SECTION INDICATOR (OVAL) */
.section-indicator {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(40px) translateY(-100px);
    background: rgba(30, 30, 30, 0.95);
    border: 2px solid #64ffda;
    border-radius: 50px;
    padding: 10px 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 9994;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    backdrop-filter: blur(20px);
    box-shadow: 0 5px 20px rgba(100, 255, 218, 0.3);
    white-space: nowrap;
}

.section-indicator.visible {
    opacity: 1;
    transform: translateX(40px) translateY(0);
}

.section-indicator-icon {
    font-size: 1.3em;
    line-height: 1;
}

.section-indicator-text {
    color: #64ffda;
    font-weight: 700;
    font-size: 0.95em;
}

body.light-mode .section-indicator {
    background: rgba(255, 255, 255, 0.95);
    border-color: #0a7a5e;
}

body.light-mode .section-indicator-text {
    color: #0a7a5e;
}

/* Mobile adjustments */
@media (max-width: 768px) {
    .scroll-to-top {
        width: 45px;
        height: 45px;
        top: 15px;
    }
    
    .scroll-to-top svg {
        width: 20px;
        height: 20px;
    }
    
    .section-indicator {
        top: 15px;
        transform: translateX(35px) translateY(-100px);
        padding: 8px 15px;
        font-size: 0.85em;
    }
    
    .section-indicator.visible {
        transform: translateX(35px) translateY(0);
    }
    
    .section-indicator-icon {
        font-size: 1.2em;
    }
}

/* Add this to your CSS */
body.lesson-active {
    position: fixed;
    width: 100%;
    height: 100vh;
    overflow: hidden;
}

.lesson-view {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

/* Prevent viewport resize on keyboard */
@media (max-width: 768px) {
    .lesson-view {
        height: 100dvh; /* Use dynamic viewport height */
    }
}

/* Mobile fill options */
.fill-options {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin: 15px 0;
}

.fill-option-btn {
    padding: 12px 20px;
    background: rgba(100, 255, 218, 0.1);
    border: 2px solid rgba(100, 255, 218, 0.3);
    border-radius: 12px;
    color: #64ffda;
    font-weight: 600;
    font-size: 0.95em;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Courier New', monospace;
}

.fill-option-btn:hover {
    background: rgba(100, 255, 218, 0.2);
    border-color: rgba(100, 255, 218, 0.5);
    transform: translateY(-2px);
}

.fill-option-btn:active {
    transform: translateY(0);
}

.fill-option-btn.correct-option {
    background: rgba(0, 255, 0, 0.2);
    border-color: #00ff00;
    color: #00ff00;
}

.fill-option-btn.incorrect-option {
    background: rgba(255, 0, 0, 0.2);
    border-color: #ff6b6b;
    color: #ff6b6b;
    animation: shake 0.4s ease;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

.code-blank-placeholder {
    display: inline-block;
    min-width: 60px;
    padding: 4px 8px;
    background: rgba(100, 255, 218, 0.1);
    border-bottom: 2px dashed rgba(100, 255, 218, 0.5);
    color: #8b949e;
    font-weight: 500;
}

@media (max-width: 768px) {
    .stats-buttons-container {
        flex-direction: column;
        padding: 15px;
    }
    
    .stat-toggle-btn {
        padding: 10px 18px;
        font-size: 0.9em;
        width: 100%;  /* Full width on mobile */
        justify-content: center;
    }
    
    .goals-btn {
        width: auto;  /* Auto width */
        padding: 8px 16px;  /* Smaller */
        font-size: 0.85em;  /* Smaller text */
        margin: 0 auto;  /* Center it */
        border-radius: 50px;  /* More oval */
    }
    
    .goals-btn-icon {
        font-size: 1em;  /* Smaller icon */
    }
}

/* Coming Soon Section */
.coming-soon-section {
    margin-top: 40px;
    padding-top: 30px;
    border-top: 2px dashed rgba(100, 255, 218, 0.2);
}

.coming-soon-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 25px;
    padding: 15px 20px;
    background: rgba(100, 255, 218, 0.05);
    border-radius: 12px;
    border: 1px solid rgba(100, 255, 218, 0.2);
}

.coming-soon-icon {
    font-size: 1.8em;
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.8; }
}

.coming-soon-title {
    font-size: 1.4em;
    font-weight: 700;
    color: #64ffda;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.coming-soon-card {
    position: relative;
    background: rgba(20, 20, 20, 0.6);
    border: 2px solid rgba(100, 255, 218, 0.15);
    border-radius: 20px;
    padding: 30px;
    margin-bottom: 20px;
    cursor: not-allowed;
    transition: all 0.3s ease;
    opacity: 0.7;
}

.coming-soon-card:hover {
    transform: translateY(-3px);
    border-color: rgba(100, 255, 218, 0.3);
    box-shadow: 0 8px 24px rgba(100, 255, 218, 0.1);
}

.coming-soon-overlay {
    position: absolute;
    top: 15px;
    right: 15px;
    padding: 8px 16px;
    background: rgba(102, 126, 234, 0.2);
    border: 2px solid rgba(102, 126, 234, 0.4);
    border-radius: 20px;
    color: #667eea;
    font-weight: 700;
    font-size: 0.9em;
}

.ai-suggestion-btn {
    animation: aiGlowPulse 3s ease-in-out infinite;
}

@keyframes buttonPulse {
    0%, 100% {
        box-shadow: 0 8px 32px rgba(100, 255, 218, 0.4);
    }
    50% {
        box-shadow: 0 8px 32px rgba(100, 255, 218, 0.7), 0 0 0 8px rgba(100, 255, 218, 0.1);
    }
}

.ai-suggestion-btn:active {
    transform: translateX(-50%) translateY(0) scale(0.98) !important;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .ai-suggestion-btn {
        bottom: 90px !important; /* Above mobile nav */
        max-width: 80% !important;
        padding: 12px 18px !important;
        font-size: 0.8em !important;
    }

    .ai-suggestion-title {
        font-size: 0.9em !important;
    }
    
    .ai-suggestion-desc {
        font-size: 0.8em !important;
    }
}

/* Smooth transitions for layout shifts */
.progress-section {
    transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.chart-container {
    transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
    transform-origin: top center;
}

.stats-buttons-container {
    will-change: max-height, opacity, transform;
    transform-origin: top center;
}

/* Ensure smooth expansion */
.stats-buttons-container > div {
    transition: all 0.4s ease;
}

/* Prevent layout jank */
.chart-tabs {
    transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Smooth goals container animation */
#goalsButtonContainer {
    will-change: opacity, transform;
    transform-origin: right center;
}

@media (max-width: 768px) {
    #goalsButtonContainer {
        margin-top: 20px !important;
        justify-content: center !important;
        flex-wrap: wrap;
    }

    #viewGoalsBtn, #setGoalsBtn {
        font-size: 0.85em !important;
        padding: 10px 18px !important;
        white-space: nowrap;
    }
}

/* Hide scrollbar during page load */
body {
    overflow-x: hidden !important;
}

html {
    overflow-x: hidden !important;
    scrollbar-width: thin;
    scrollbar-color: rgba(100, 255, 218, 0.3) rgba(30, 30, 30, 0.3);
}

/* Custom scrollbar styling */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(30, 30, 30, 0.3);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: rgba(100, 255, 218, 0.3);
    border-radius: 10px;
    transition: all 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(100, 255, 218, 0.5);
}

/* Prevent layout shift during load and improve rendering performance */
.section,
.progress-section,
.stats-grid,
.settings-container,
.settings-section,
.dashboard,
.learn-section,
.practice-container {
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    perspective: 1000px;
}

/* Smooth scrolling with reduced motion support */
html {
    scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
    html {
        scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Smooth page load */
body.loading {
    overflow: hidden !important;
}

body.loading * {
    animation-play-state: paused !important;
    transition: none !important;
}

/* Enhanced Bar Chart Styles */
.bar-item {
    position: relative;
    transition: all 0.3s ease;
}

.bar-item:hover {
    transform: translateY(-5px);
}

.bar-item:hover .bar {
    box-shadow: 
        0 -4px 20px rgba(100, 255, 218, 0.6),
        0 8px 30px rgba(100, 255, 218, 0.3);
}

.bar {
    position: relative;
    background: rgba(30, 30, 30, 0.6);
    border: 2px solid rgba(100, 255, 218, 0.2);
    border-radius: 8px 8px 0 0;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    overflow: visible;
}

/* Pulse animation for bars */
@keyframes barPulse {
    0%, 100% {
        box-shadow: 0 -4px 20px rgba(100, 255, 218, 0.4);
    }
    50% {
        box-shadow: 0 -4px 30px rgba(100, 255, 218, 0.7);
    }
}

.bar-item:hover .bar-gradient {
    animation: barPulse 2s ease-in-out infinite;
}

.splash-features {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin: 25px 0;
    max-height: 400px;
    overflow-y: auto;
    padding-right: 10px;
}

.splash-feature {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 15px;
    background: rgba(100, 255, 218, 0.05);
    border: 1px solid rgba(100, 255, 218, 0.2);
    border-radius: 12px;
    transition: all 0.3s ease;
}

.splash-feature:hover {
    background: rgba(100, 255, 218, 0.1);
    border-color: rgba(100, 255, 218, 0.4);
    transform: translateX(5px);
}

.feature-icon {
    font-size: 2em;
    flex-shrink: 0;
}

.splash-feature strong {
    color: #64ffda;
    font-size: 1.05em;
    display: block;
    margin-bottom: 5px;
}

.splash-feature p {
    color: #8b949e;
    font-size: 0.9em;
    line-height: 1.4;
    margin: 0;
}

.splash-version {
    display: inline-block;
    padding: 6px 16px;
    background: rgba(102, 126, 234, 0.2);
    border: 1px solid rgba(102, 126, 234, 0.4);
    border-radius: 20px;
    color: #667eea;
    font-weight: 600;
    font-size: 0.9em;
    margin-bottom: 20px;
}

.splash-button {
    margin-top: 20px;
    padding: 14px 40px;
    background: linear-gradient(135deg, #667eea, #64ffda);
    border: none;
    border-radius: 50px;
    color: #fff;
    font-weight: 700;
    font-size: 1.1em;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 20px rgba(100, 255, 218, 0.4);
}

.splash-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(100, 255, 218, 0.6);
}

/* Enhanced Bar Chart */
.chart-container {
    display: flex;
    align-items: flex-end;
    gap: 20px;
    padding: 30px 20px 60px 60px; /* ✅ More bottom padding for labels */
    background: rgba(30, 30, 30, 0.6);
    border-radius: 15px;
    min-height: 450px; /* ✅ Increased from 300px */
    position: relative;
    backdrop-filter: blur(10px);
}

.bar-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 60px;
    position: relative;
}

.bar {
    width: 100%;
    max-width: 80px;
    background: rgba(30, 30, 30, 0.8);
    border: 2px solid rgba(100, 255, 218, 0.2);
    border-radius: 8px 8px 0 0;
    position: relative;
    transition: all 0.3s ease;
}

.bar-label {
    position: absolute;
    bottom: -50px; /* ✅ Fixed position below bar */
    left: 50%;
    transform: translateX(-50%);
    color: #fff;
    font-weight: 600;
    font-size: 0.85em;
    text-align: center;
    white-space: nowrap;
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Y-axis labels */
.chart-y-labels {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: absolute;
    left: 10px;
    top: 30px;
    bottom: 60px; /* Match chart bottom padding */
    color: #8b949e;
    font-size: 0.85em;
    font-weight: 600;
}

/* Force hide inactive chart containers */
.chart-container {
    display: none;
}

.chart-container.active {
    display: block;
}

/* Mobile: Force single chart display */
@media (max-width: 768px) {
    .chart-container:not(.active) {
        display: none !important;
        visibility: hidden !important;
        height: 0 !important;
        overflow: hidden !important;
    }

    .chart-container.active {
        display: block !important;
        visibility: visible !important;
        height: auto !important;
    }
}

/* ==================== WELCOME ANIMATION ==================== */
.welcome-animation {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: #000000;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    overflow: hidden;
}

.welcome-animation.fade-out {
    animation: welcomeFadeOut 0.8s ease-out forwards;
}

@keyframes welcomeFadeOut {
    to {
        opacity: 0;
        visibility: hidden;
    }
}

.binary-rain {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.binary-column {
    position: absolute;
    top: -100%;
    font-family: 'Courier New', monospace;
    font-size: 14px;
    color: #00ff41;
    opacity: 0.6;
    animation: binaryFall linear infinite;
    white-space: nowrap;
}

@keyframes binaryFall {
    to {
        transform: translateY(100vh);
        opacity: 0;
    }
}

.lego-container {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.lego-piece {
    position: absolute;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #00ff41, #00cc33);
    border-radius: 8px;
    opacity: 0;
    animation: legoFloat 2s ease-out forwards;
    box-shadow: 0 4px 20px rgba(0, 255, 65, 0.4);
}

@keyframes legoFloat {
    0% {
        opacity: 0;
        transform: translateY(100vh) rotate(0deg) scale(0.5);
    }
    50% {
        opacity: 1;
    }
    100% {
        opacity: 1;
        transform: translateY(0) rotate(360deg) scale(1);
    }
}

.lego-piece::before {
    content: '';
    position: absolute;
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
    width: 40%;
    height: 15%;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
}

.welcome-text {
    position: relative;
    z-index: 10001;
    font-size: 80px;
    font-weight: 700;
    color: #00ff41;
    text-shadow: 0 0 30px rgba(0, 255, 65, 0.8), 0 0 60px rgba(0, 255, 65, 0.5);
    opacity: 0;
    animation: welcomeTextAppear 1s ease-out 2s forwards;
    letter-spacing: 8px;
}

@keyframes welcomeTextAppear {
    0% {
        opacity: 0;
        transform: scale(0.5) rotateY(90deg);
        filter: blur(20px);
    }
    50% {
        transform: scale(1.1) rotateY(0deg);
    }
    100% {
        opacity: 1;
        transform: scale(1) rotateY(0deg);
        filter: blur(0);
    }
}

@media (max-width: 768px) {
    .welcome-text {
        font-size: 48px;
        letter-spacing: 4px;
    }
    .lego-piece {
        width: 40px;
        height: 40px;
    }
}

/* ==================== ERROR POPUP MODAL ==================== */
.error-popup-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeIn 0.2s ease-out;
    backdrop-filter: blur(5px);
}

.error-popup-modal.active {
    display: flex;
}

.error-popup-content {
    background: rgba(30, 30, 30, 0.95);
    border: 2px solid rgba(255, 100, 100, 0.5);
    border-radius: 20px;
    padding: 30px;
    max-width: 600px;
    width: 90%;
    max-height: 70vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(255, 100, 100, 0.3);
    animation: modalSlide 0.3s ease-out;
    position: relative;
}

body.light-mode .error-popup-content {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(200, 50, 50, 0.5);
}

@keyframes modalSlide {
    from {
        opacity: 0;
        transform: translateY(-30px) scale(0.9);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.error-popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(255, 100, 100, 0.3);
}

.error-popup-title {
    font-size: 1.5em;
    color: #ff6464;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 10px;
}

.error-popup-close {
    background: rgba(255, 100, 100, 0.2);
    border: 1px solid rgba(255, 100, 100, 0.4);
    color: #ff6464;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    font-size: 24px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.error-popup-close:hover {
    background: rgba(255, 100, 100, 0.3);
    transform: rotate(90deg);
}

.error-popup-body {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 100, 100, 0.2);
    border-radius: 10px;
    padding: 20px;
    font-family: 'Courier New', monospace;
    color: #ffaaaa;
    line-height: 1.6;
    white-space: pre-wrap;
    word-wrap: break-word;
    max-height: 400px;
    overflow-y: auto;
}

body.light-mode .error-popup-body {
    background: rgba(255, 240, 240, 0.8);
    color: #cc0000;
}

.error-popup-actions {
    margin-top: 20px;
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

.error-popup-btn {
    padding: 10px 20px;
    border-radius: 8px;
    border: 2px solid rgba(100, 255, 218, 0.3);
    background: rgba(100, 255, 218, 0.1);
    color: #64ffda;
    cursor: pointer;
    transition: all 0.2s ease;
    font-weight: 600;
}

.error-popup-btn:hover {
    background: rgba(100, 255, 218, 0.2);
    border-color: #64ffda;
    transform: translateY(-2px);
}

.error-button-compact {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 6px 12px;
    background: rgba(255, 100, 100, 0.15);
    border: 1px solid rgba(255, 100, 100, 0.4);
    border-radius: 6px;
    color: #ff6464;
    font-size: 0.85em;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-left: 10px;
}

.error-button-compact:hover {
    background: rgba(255, 100, 100, 0.25);
    transform: translateX(3px);
}

/* Mobile optimizations */
@media (max-width: 768px) {
    .error-popup-content {
        width: 95%;
        padding: 20px;
        max-height: 80vh;
    }

    .error-popup-title {
        font-size: 1.2em;
    }

    .error-popup-body {
        font-size: 0.9em;
        padding: 15px;
    }
}

/* Add these containment rules - MAJOR performance boost */
.section {
    contain: layout style paint;
    content-visibility: auto;
}

.section:not(.active) {
    content-visibility: hidden;
}

.stat-card, .course-card, .lesson-card {
    contain: layout paint;
}

.mobile-stats-carousel {
    contain: layout style paint;
}

            /* LOADING ANIMATION - FULL SCREEN FIX */
.page-loader {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    background: #000000 !important;
    z-index: 999999 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: opacity 0.8s ease, visibility 0.8s ease;
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}

.page-loader.fade-out {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

#loaderCanvas {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 999998;
}

.loader-text {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 999999;
    font-size: 80px;
    font-weight: 900;
    color: #64ffda;
    opacity: 0;
    transform: scale(0.5) !important;
    transition: opacity 1s ease, transform 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    text-shadow: 
        0 0 30px rgba(100, 255, 218, 0.8),
        0 0 60px rgba(100, 255, 218, 0.5);
    font-family: 'Poppins', sans-serif;
    white-space: nowrap;
    letter-spacing: 2px;
    pointer-events: none;
}

.loader-text.show {
    opacity: 1 !important;
    transform: scale(1) !important;
}

/* CRITICAL: Hide ALL content during loading */
html.loading,
body.loading {
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
    height: 100vh !important;
    width: 100vw !important;
}

body.loading > *:not(#pageLoader),
body.loading > *:not(.page-loader) {
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
}

/* Prevent scrolling during load */
body.loading::-webkit-scrollbar {
    display: none !important;
}

@media (max-width: 768px) {
    .loader-text {
        font-size: 48px !important;
    }
}

.main-content {
    min-height: 100vh;
    width: 100%;
    will-change: contents; /* Hint to browser */
}

/* Prevent layout shift when content loads */
.section {
    min-height: 500px; /* Reserve minimum space */
    contain: layout; /* Contain layout changes */
}

.section.active {
    min-height: 100vh;
}

.chart-container {
    min-height: 400px; /* Reserve space BEFORE chart loads */
    width: 100%;
    position: relative;
}

.bar-chart,
#allChart {
    height: 400px !important; /* Fixed height prevents shifts */
    width: 100% !important;
}

.stats-buttons-container {
    min-height: 60px; /* Reserve space for buttons */
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.stats-buttons-container button {
    height: 40px; /* Fixed height */
    min-width: 100px;
}

#settings.section {
    min-height: 100vh;
}

.settings-section {
    margin-bottom: 20px;
    min-height: 80px; /* Reserve space */
}

/* Remove theme options completely */
.theme-options {
    display: none !important; /* This removes the space */
}

/* PREVENT ALL LAYOUT SHIFTS */
* {
    box-sizing: border-box;
}

img, 
video,
iframe,
canvas {
    max-width: 100%;
    height: auto;
    display: block;
}

/* Reserve space for dynamic content */
[data-loading] {
    min-height: 200px;
}

/* Font loading optimization */
body {
    font-display: swap; /* Prevent invisible text */
}

/* Prevent shifts from transitions */
.section:not(.active) {
    position: absolute;
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
}

.section.active {
    position: relative;
    visibility: visible;
    opacity: 1;
}
